(()=>{"use strict";var e={476:(e,n,t)=>{t.d(n,{v:()=>On});var r={};function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.r(r),t.d(r,{resolve:()=>qe,set:()=>Fe});var c=new Map;function l(e){var n=c.get(e);return void 0===n&&(n=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c.set(e,n)),n}function s(e,n){var t=window.ShadyCSS;return t&&!t.nativeShadow?e(t):n}function u(e){return"<".concat(String(e.tagName).toLowerCase(),">")}var d="ActiveXObject"in window,f=Promise.resolve(),p=new WeakMap;function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e){return e},v=function(e){if("object"!==b(e))throw TypeError("Assigned value must be an object: ".concat(b(e)));return e&&Object.freeze(e)};function m(e,n){var t=b(e),r=h;switch(t){case"string":r=String;break;case"number":r=Number;break;case"boolean":r=Boolean;break;case"function":e=(r=e)();break;case"object":e&&Object.freeze(e),r=v}return{get:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return t},set:function(e,n,t){return r(n,t)},connect:"object"!==t&&"undefined"!==t?function(t,o,a){if(t[o]===e){var i=l(o);if(t.hasAttribute(i)){var c=t.getAttribute(i);t[o]=""===c&&r===Boolean||c}}return n&&n(t,o,a)}:n}}function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){w(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function w(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=new WeakMap,E=new Set;function $(){try{E.forEach((function(e){try{S.get(e)(),E.delete(e)}catch(n){throw E.delete(e),n}}))}catch(e){throw E.size&&$(),e}}function N(e){E.size||requestAnimationFrame($),E.add(e)}var k=new WeakMap;function _(e,n){var t=k.get(e);t||(t=new Map,k.set(e,t));var r=t.get(n);return r||(r={target:e,key:n,value:void 0,contexts:void 0,deps:void 0,state:0,checksum:0,observed:!1},t.set(n,r)),r}function O(e){var n=e.state;return e.deps&&e.deps.forEach((function(e){n+=e.state})),n}function I(e){e.observed&&N(e),e.contexts&&e.contexts.forEach(I)}function M(e,n){n&&n.forEach((function(n){e.deps.add(n),e.observed&&(n.contexts||(n.contexts=new Set),n.contexts.add(e)),M(e,n.deps)}))}var j=new Set;function T(e,n,t,r){var o=_(e,n);if(j.size&&j.has(o))throw Error("Circular get invocation is forbidden: '".concat(n,"'"));if(j.forEach((function(e){e.deps||(e.deps=new Set),e.deps.add(o),e.observed&&(o.contexts||(o.contexts=new Set),o.contexts.add(e))})),(r&&r(o.value)||!r)&&o.checksum&&o.checksum===O(o))return o.value;try{j.add(o),o.observed&&o.deps&&o.deps.size&&o.deps.forEach((function(e){e.contexts&&e.contexts.delete(o)})),o.deps=void 0;var a=t(e,o.value);o.deps&&o.deps.forEach((function(e){M(o,e.deps)})),a!==o.value&&(o.state+=1,o.value=a,I(o)),o.checksum=O(o),j.delete(o)}catch(e){throw o.checksum=0,j.delete(o),j.forEach((function(e){e.deps.delete(o),e.observed&&o.contexts.delete(e)})),e}return o.value}var A=new Set;function C(e,n,t,r){if(j.size)throw Error("Invalidating property in chain of get calls is forbidden: '".concat(n,"'"));!function(e,n,t){e.checksum=0,e.state+=1,I(e),t&&function(e){A.size||requestAnimationFrame((function(){A.forEach((function(e){(!e.contexts||e.contexts&&0===e.contexts.size)&&k.get(e.target).delete(e.key)})),A.clear()})),A.add(e)}(e),n&&(e.value=void 0)}(_(e,n),t,r)}function D(e,n,t,r){var o,a=_(e,n);a.observed=!0;var i=function(e,n){return S.set(e,n),N(e),function(){E.delete(e),S.delete(e)}}(a,(function(){var a=T(e,n,t);a!==o&&(r(e,a,o),o=a)}));return a.deps&&a.deps.forEach((function(e){e.contexts||(e.contexts=new Set),e.contexts.add(a)})),function(){i(),a.observed=!1,a.deps&&a.deps.size&&a.deps.forEach((function(e){e.contexts&&e.contexts.delete(a)}))}}function P(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,n){return!n||"object"!==W(n)&&"function"!=typeof n?R(e):n}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){var n="function"==typeof Map?new Map:void 0;return(z=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return V(e,arguments,q(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),B(r,e)})(e)}function V(e,n,t){return(V=F()?Reflect.construct:function(e,n,t){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(e,r));return t&&B(o,t.prototype),o}).apply(null,arguments)}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function B(e,n){return(B=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{X.env.NODE_ENV}catch(e){var X={env:{NODE_ENV:"production"}}}var H,G=function(e,n){return n},Y=new WeakMap,U=new WeakMap;function J(e,n){e.hybrids=n;var t=[],r=Object.keys(n);Y.set(e,t),U.set(e,r),r.forEach((function(r){var o,a=n[r],i=W(a);o="function"===i?"render"===r?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof e)throw TypeError("The first argument must be a function: ".concat(x(e)));var t=y({shadowRoot:!0},n),r={mode:"open"};return"object"===x(t.shadowRoot)&&Object.assign(r,t.shadowRoot),{get:function(n){var o=e(n),a=n;return t.shadowRoot&&(n.shadowRoot||n.attachShadow(r),a=n.shadowRoot),function(){return o(n,a),a}},observe:function(e,n){n()}}}(a):{get:a}:"object"!==i||null===a||Array.isArray(a)?m(a):{get:a.get||G,set:a.set||!a.get&&G||void 0,connect:a.connect,observe:a.observe},Object.defineProperty(e.prototype,r,{get:function(){return T(this,r,o.get)},set:o.set&&function(e){!function(e,n,t,r){var o=_(e,n),a=t(e,r,o.value);a!==o.value&&(o.checksum=0,o.state+=1,o.value=a,I(o))}(this,r,o.set,e)},enumerable:!0,configurable:"production"!==X.env.NODE_ENV}),o.observe&&t.unshift((function(e){return D(e,r,o.get,o.observe)})),o.connect&&t.push((function(e){return o.connect(e,r,(function(){C(e,r)}))}))}))}if("production"!==X.env.NODE_ENV){var Z=function e(n,t){t(n),Array.from(n.children).forEach((function(n){return e(n,t)})),n.shadowRoot&&Array.from(n.shadowRoot.children).forEach((function(n){return e(n,t)}))},K=new Map;H=function(e,n){K.size||f.then((function(){Z(document.body,(function(e){if(K.has(e.constructor)){var n=K.get(e.constructor);e.disconnectedCallback(),Object.keys(e.constructor.hybrids).forEach((function(t){C(e,t,e.constructor.hybrids[t]!==n[t])})),e.connectedCallback()}})),K.clear()})),K.set(e,n)}}var Q=new WeakMap;function ee(e,n){var t=W(n);if("object"!==t&&"function"!==t)throw TypeError("Second argument must be an object or a function: ".concat(t));if(null!==e){var r=window.customElements.get(e);if("function"===t)return r!==n?window.customElements.define(e,n):r;if(r){if(r.hybrids===n)return r;if("production"!==X.env.NODE_ENV&&r.hybrids){Object.keys(r.hybrids).forEach((function(e){delete r.prototype[e]}));var o=r.hybrids;return J(r,n),H(r,o),r}throw Error("Element '".concat(e,"' already defined"))}}var a=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&B(e,n)}(a,e);var n,t,r,o=(n=a,function(){var e,t=q(n);if(F()){var r=q(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return L(this,e)});function a(){var e;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,a),e=o.call(this);for(var n=U.get(a),t=0;t<n.length;t+=1){var r=n[t];if(Object.prototype.hasOwnProperty.call(R(e),r)){var i=e[r];delete e[r],e[r]=i}}return e}return t=a,(r=[{key:"connectedCallback",value:function(){for(var e=Y.get(a),n=[],t=0;t<e.length;t+=1){var r=e[t](this);r&&n.push(r)}Q.set(this,n)}},{key:"disconnectedCallback",value:function(){for(var e=Q.get(this),n=0;n<e.length;n+=1)e[n]()}}])&&P(t.prototype,r),a}(z(HTMLElement));return J(a,n),null!==e&&(Object.defineProperty(a,"name",{get:function(){return e}}),customElements.define(e,a)),a}function ne(e){return Object.keys(e).reduce((function(n,t){var r=l(t.replace(/((?!([A-Z]{2}|^))[A-Z])/g,"-$1"));return n[t]=ee(r,e[t]),n}),{})}function te(){return"object"===W(arguments.length<=0?void 0:arguments[0])&&null!==(arguments.length<=0?void 0:arguments[0])?ne(arguments.length<=0?void 0:arguments[0]):ee.apply(void 0,arguments)}var re=new WeakMap,oe=function(e,n){return re.get(e)||(n&&re.set(e,n),n)};function ae(e){for(var n;e&&(n=oe(e))&&n.endNode;)e=n.endNode;return e}function ie(e){if(e.nodeType!==Node.TEXT_NODE)for(var n=e.childNodes[0];n;)e.removeChild(n),n=e.childNodes[0];else{var t=oe(e);if(t.startNode)for(var r=ae(t.endNode),o=t.startNode,a=r.nextSibling;o;){var i=o.nextSibling;o.parentNode.removeChild(o),o=i!==a&&i}}}var ce=new WeakMap;function le(e,n){var t=oe(e),r=t.startNode,o=ae(t.endNode);n.parentNode.insertBefore(e,n.nextSibling);for(var a=e,i=r;i;){var c=i.nextSibling;a.parentNode.insertBefore(i,a.nextSibling),a=i,i=c!==o.nextSibling&&c}}function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,n,t){var r=Array.isArray(t)?"array":se(t),o=oe(n,{});switch(o.type!==r&&(ie(n),"array"===r&&ce.delete(n),o=function(e,n){return re.set(e,n),n}(n,{type:r}),""!==n.textContent&&(n.textContent="")),r){case"function":t(e,n);break;case"array":!function(e,n,t,r){var o=ce.get(n),a=t.map((function(e,n){return{id:Object.prototype.hasOwnProperty.call(e,"id")?e.id:n,value:e,placeholder:null,available:!0}}));if(ce.set(n,a),o){var i=new Set;a.forEach((function(e){return i.add(e.id)})),o=o.filter((function(e){return!!i.has(e.id)||(ie(e.placeholder),e.placeholder.parentNode.removeChild(e.placeholder),!1)}))}for(var c=n,l=t.length-1,s=oe(n),u=0;u<a.length;u+=1){var d=a[u],f=void 0;if(o)for(var p=0;p<o.length;p+=1)if(o[p].available&&o[p].id===d.id){f=o[p];break}f?(f.available=!1,d.placeholder=f.placeholder,d.placeholder.previousSibling!==c&&le(d.placeholder,c),f.value!==d.value&&r(e,d.placeholder,d.value)):(d.placeholder=document.createTextNode(""),c.parentNode.insertBefore(d.placeholder,c.nextSibling),r(e,d.placeholder,d.value)),c=ae(oe(d.placeholder).endNode||d.placeholder),0===u&&(s.startNode=d.placeholder),u===l&&(s.endNode=c)}o&&o.forEach((function(e){e.available&&(ie(e.placeholder),e.placeholder.parentNode.removeChild(e.placeholder))}))}(e,n,t,ue);break;default:n.textContent="number"===r||t?t:""}}function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fe=new WeakMap;function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var be=new WeakMap;function he(e,n,t){var r=be.get(n)||new Set,o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return Array.isArray(e)?e.forEach((function(e){return n.add(e)})):null!==e&&"object"===pe(e)?Object.keys(e).forEach((function(t){return e[t]&&n.add(t)})):n.add(e),n}(t);be.set(n,o),o.forEach((function(e){n.classList.add(e),r.delete(e)})),r.forEach((function(e){n.classList.remove(e)}))}function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var me=new WeakMap;function ge(e,n,t){if(null===t||"object"!==ve(t))throw TypeError("Style value must be an object in ".concat(u(n),":"),t);var r=me.get(n)||new Map,o=Object.keys(t).reduce((function(e,o){var a=l(o),i=t[o];return i||0===i?n.style.setProperty(a,i):n.style.removeProperty(a),e.set(a,i),r.delete(a),e}),new Map);r.forEach((function(e,t){n.style[t]=""})),me.set(n,o)}function ye(e,n,t){if("on"===n.substr(0,2))return r=n.substr(2),function(e,n,t,o){if(o){var a=fe.get(n);a&&n.removeEventListener(r,a.get(o),void 0!==o.options&&o.options)}if(t){if("function"!=typeof t)throw Error("Event listener must be a function: ".concat(de(t)));var i=fe.get(n);i||(i=new WeakMap,fe.set(n,i));var c=t.bind(null,e);i.set(t,c),n.addEventListener(r,c,void 0!==t.options&&t.options)}};var r;switch(e){case"class":return he;case"style":return ge;default:return function(r,o,a){if(t||o instanceof SVGElement||!(n in o))if(!1===a||null==a)o.removeAttribute(e);else{var i=!0===a?"":String(a);o.setAttribute(e,i)}else o[n]!==a&&(o[n]=a)}}}function we(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return t}}(e,n)||function(e,n){if(e){if("string"==typeof e)return xe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?xe(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{Ee.env.NODE_ENV}catch(e){var Ee={env:{NODE_ENV:"production"}}}var $e=Date.now(),Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"{{h-".concat($e,"-").concat(e,"}}")},ke=Ne("(\\d+)"),_e=new RegExp("^".concat(ke,"$")),Oe=new RegExp(ke,"g"),Ie="--".concat($e,"--"),Me=new RegExp(Ie,"g"),je=new WeakMap,Te="object"===Se(window.ShadyDOM)&&window.ShadyDOM.inUse?function(e){var n;return{get currentNode(){return n},nextNode:function(){if(void 0===n)n=e.childNodes[0];else if(n.childNodes.length)n=n.childNodes[0];else if(n.nextSibling)n=n.nextSibling;else{var t=n.parentNode;for(n=t.nextSibling;!n&&t!==e;)t=t.parentNode,n=t.nextSibling}return!!n}}}:function(e){return document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null,!1)},Ae=document.createElement("div"),Ce=new Map;function De(e,n){var t=Ne(n),r=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(e=e.replace(/(^[\n\s\t ]+)|([\n\s\t ]+$)+/g,"")).indexOf("\n");if(t>-1){var r=0-n-2;for(t+=1;" "===e[t]&&t<e.length;t+=1)r+=1;return e.replace(/\n +/g,(function(e){return e.substr(0,Math.max(e.length-r,1))}))}return e}(e).split("\n").filter((function(e){return e})).map((function(e){var n=e.indexOf(t);return n>-1?"| ".concat(e,"\n--").concat("-".repeat(n)).concat("^".repeat(6)):"| ".concat(e)})).join("\n").replace(Oe,"${...}");return"".concat(r)}function Pe(e,n,t){var r=document.createElement("template"),o=[],a=function(e,n){var t=e.reduce((function(n,t,r){return 0===r?t:e.slice(r).join("").match(/^\s*<\/\s*(table|tr|thead|tbody|tfoot|colgroup)>/)?"".concat(n,"\x3c!--").concat(Ne(r-1),"--\x3e").concat(t):n+Ne(r-1)+t}),"");return n&&(t+="<style>\n".concat(n.join("\n/*------*/\n"),"\n</style>")),d?t.replace(/style\s*=\s*(["][^"]+["]|['][^']+[']|[^\s"'<>/]+)/g,(function(e){return"".concat(Ie).concat(e)})):t}(e,t);if(n&&(a="<svg>".concat(a,"</svg>")),d?r.innerHTML=a:(Ae.innerHTML="<template>".concat(a,"</template>"),r.content.appendChild(Ae.children[0].content)),n){var i=r.content.firstChild;r.content.removeChild(i),Array.from(i.childNodes).forEach((function(e){return r.content.appendChild(e)}))}!function(e){for(var n,t=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,null,!1);n=t.nextNode();)_e.test(n.textContent)&&(n.parentNode.insertBefore(document.createTextNode(n.textContent),n),n.parentNode.removeChild(n))}(r.content);for(var c=Te(r.content),l=0,f=function(){var t=c.currentNode;if(t.nodeType===Node.TEXT_NODE){var r=t.textContent;if(!r.match(_e)){var a=r.match(Oe);if(a){var i=t;a.reduce((function(e,n){var t=we(e.pop().split(n),2),r=t[0],o=t[1];return r&&e.push(r),e.push(n),o&&e.push(o),e}),[r]).forEach((function(e,n){0===n?i.textContent=e:i=i.parentNode.insertBefore(document.createTextNode(e),i.nextSibling)}))}}var s=t.textContent.match(_e);s&&(d||(t.textContent=""),o[s[1]]=[l,ue])}else t.nodeType===Node.ELEMENT_NODE&&Array.from(t.attributes).forEach((function(r){var a=r.value.trim(),i=d?r.name.replace(Ie,""):r.name,c=a.match(_e);if(c){var s=e[c[1]].replace(/\s*=\s*['"]*$/g,"").split(/\s+/).pop();o[c[1]]=[l,ye(i,s,n)],t.removeAttribute(r.name)}else{var u=a.match(Oe);if(u){var f="attr__".concat(i);u.forEach((function(e,n){var t=we(e.match(_e),2)[1];o[t]=[l,function(t,r,o){var c=oe(r,{});c[f]=(c[f]||a).replace(e,null==o?"":o),1!==u.length&&n+1!==u.length||(r.setAttribute(i,c[f]),c[f]=void 0)}]})),r.value="",d&&i!==r.name&&(t.removeAttribute(r.name),t.setAttribute(i,""))}}}));l+=1};c.nextNode();)f();return function(e,n,t,i){var c=oe(n,{type:"function"});if(r!==c.template){(c.template||n.nodeType===Node.ELEMENT_NODE)&&ie(n),c.prevArgs=null;var l=document.importNode(function(e,n){return n?s((function(t){var r=je.get(e);r||(r=new Map,je.set(e,r));var o=r.get(n);if(!o){(o=document.createElement("template")).content.appendChild(e.content.cloneNode(!0)),r.set(n,o);var a=o.content.querySelectorAll("style");Array.from(a).forEach((function(e){for(var n=e.childNodes.length+1,t=0;t<n;t+=1)e.parentNode.insertBefore(document.createTextNode(Ne()),e)})),t.prepareTemplate(o,n.toLowerCase())}return o}),e):e}(r,e.tagName).content,!0),f=Te(l),p=o.slice(0),b=0,h=p.shift(),v=[];for(c.template=r,c.markers=v;f.nextNode();){var m=f.currentNode;if(m.nodeType===Node.TEXT_NODE)_e.test(m.textContent)?m.textContent="":d&&(m.textContent=m.textContent.replace(Me,""));else if("production"!==Ee.env.NODE_ENV&&m.nodeType===Node.ELEMENT_NODE&&m.tagName.indexOf("-")>-1&&!customElements.get(m.tagName.toLowerCase()))throw Error("Missing ".concat(u(m)," element definition in ").concat(u(e)));for(;h&&h[0]===b;)v.push([m,h[1]]),h=p.shift();b+=1}if(n.nodeType===Node.TEXT_NODE){c.startNode=l.childNodes[0],c.endNode=l.childNodes[l.childNodes.length-1];for(var g=n,y=l.childNodes[0];y;)n.parentNode.insertBefore(y,g.nextSibling),g=y,y=l.childNodes[0]}else n.appendChild(l)}var w=n.adoptedStyleSheets;if(i){var x=!1;if((i=i.map((function(e){if(e instanceof CSSStyleSheet)return e;var n=Ce.get(e);return n||((n=new CSSStyleSheet).replaceSync(e),Ce.set(e,n)),n}))).length===w.length){x=!0;for(var S=0;S<i.length;S+=1)if(i[S]!==w[S]){x=!1;break}}x||(n.adoptedStyleSheets=i)}else w&&w.length&&(n.adoptedStyleSheets=[]);var E=c.prevArgs;c.prevArgs=t;for(var $=0;$<c.markers.length;$+=1){var N=we(c.markers[$],2),k=N[0],_=N[1];if(!E||E[$]!==t[$])try{_(e,k,t[$],E?E[$]:void 0)}catch(n){throw"production"!==Ee.env.NODE_ENV&&console.error("Following error was thrown when updating a template expression in ".concat(u(e),"\n").concat(De(a,$))),n}}n.nodeType!==Node.TEXT_NODE&&s((function(n){e.shadowRoot&&(E?n.styleSubtree(e):n.styleElement(e))}))}}function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,n){var t,r=e.target;switch(r.type){case"radio":case"checkbox":t=r.checked&&r.value;break;case"file":t=r.files;break;default:t=r.value}n(t)}function ze(e,n){return e.split(".").reverse().reduce((function(e,t){return function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}({},t,e||n)}),null)}var Ve=new Map;function Fe(e,n){if(!e)throw Error("The first argument must be a property name or an object instance: ".concat(e));if("object"===Le(e)){if(void 0===n)throw Error("For model instance property the second argument must be defined");var t=p.get(e);if(!t)throw Error("Provided object must be a model instance of the store");return function(r,o){Re(o,(function(r){t.set(e,null!==n?ze(n,r):n)}))}}if(2===arguments.length)return function(t){t[e]=n};var r=Ve.get(e);return r||(r=function(n,t){Re(t,(function(t){n[e]=t}))},Ve.set(e,r)),r}var Be=new WeakMap;function qe(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return function(r,o){var a;n&&(a=setTimeout((function(){a=void 0,requestAnimationFrame((function(){n(r,o)}))}),t)),Be.set(o,e),e.then((function(n){a&&clearTimeout(a),Be.get(o)===e&&(n(r,o),Be.set(o,null))}))}}var We=Ne(),Xe=Ne("svg"),He=/@import/,Ge=new Map,Ye=new WeakMap,Ue={define:function(e){return te(e),this},key:function(e){return this.id=e,this},style:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Ye.set(this,n.filter((function(e){return e}))),this}};function Je(e,n,t){return Object.assign((function r(o){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,c=Ye.get(r),l=e.join(We);if(c){var s=c.join(We);(a=!!i.adoptedStyleSheets&&!He.test(s))||(l+=s)}t&&(l+=Xe);var u=Ge.get(l);u||(u=Pe(e,t,!a&&c),Ge.set(l,u)),u(o,i,n,a&&c)}),Ue)}function Ze(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return Je(e,t)}Object.assign(Ze,r),Object.assign((function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return Je(e,t,!0)}),r);const Ke={grow:1,margin:0,border:!1,colour:m("#ffffff"),_direction:"row",render:({grow:e,margin:n,border:t,colour:r,_direction:o})=>{const a=`\n    :host{\n      flex-grow: ${e};\n      margin: ${n}rem;\n      display: flex;\n      flex-direction: ${o};\n\n    }\n    div {\n      display: flex;\n      flex-direction: ${o};\n      flex: 1 1;\n      border-radius: var(--b-radius);\n      border: ${t?"var(--b-width) solid":"none"}; \n      border-color: ${r};\n\n    }`;return Ze`<div><slot></div>`.style(a)}};te("group-row",Ke);var Qe,en,nn,tn=Object.assign({},Ke);async function rn(){try{return Qe||(Qe=await navigator.requestMIDIAccess()),Qe}catch(e){console.error("MIDI getAccess failed",e)}}function on(e,n=1,t=127){if(!en)return;const r=n;dn(e,"note"),dn(t,"velocity"),un(r),console.log(`MIDI note on - note:${e}, velo:${t}, channel:${r}`),en.send([r-1+144,e,t])}function an(e,n=1,t=0){if(!en)return;const r=nn>0?nn:n;dn(e,"note"),dn(t,"velocity"),un(r),console.debug(`MIDI note off - note:${e}, velo:${t}, channel:${r}`),en.send([r-1+128,e,t])}function cn(e,n=1,t=0){if(!en)return;const r=n;dn(e,"CC"),dn(t),un(r),console.debug(`MIDI control - cc:${e}, val:${t}, channel:${r}`),en.send([r-1+176,e,t])}function ln(e,n=1,t=0,r=!1){if(!en)return;const o=nn>0?nn:n;try{const a=e.split(","),i=parseInt(a[0].trim()),c=parseInt(a[1].trim());if(dn(i,"NRPN LSB"),dn(c,"NRPN MSB"),un(o),en.send([n-1+176,99,c]),en.send([n-1+176,98,i]),console.debug(`MIDI nrpn - lsb:${i}, msb:${c}, val:${t}, channel:${o}, highRes:${r}`),r){if(!Number.isInteger(t))throw"Bad value";const e=Math.floor(t/128),r=Math.floor(t%128);en.send([n-1+176,6,e]),en.send([n-1+176,38,r])}else dn(t),en.send([n-1+176,6,t])}catch(n){console.warn("Malformed NRPN, it should be two integers separated by commas:",e,t)}}function sn(e,n=1,t=0,r){if(!en)return;const o=nn>0&&!r?nn:n;try{const n=e.split(","),r=parseInt(n[0].trim()),a=parseInt(n[1].trim());dn(r,"Bank LSB"),dn(a,"Bank MSB"),un(o),console.log(`MIDI prog change - lsb:${r}, msb:${a}, progNum:${t}, channel:${o}`),en.send([o-1+176,0,a]),en.send([o-1+176,32,r]),en.send([o-1+192,t]),console.log(`Sent bank ${a}-${r}, prog ${t} to channel ${o}`)}catch(n){console.error(n),console.warn("Malformed program change number, it should be two integers separated by commas:",e,t,o)}}function un(e){if(!(e>0&&e<=16&&Number.isInteger(e)))throw`MIDI channel '${e}' is invalid, should be an integer between 1 and 16`}function dn(e,n="value"){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw`MIDI value '${e}' for '${n}' is invalid, should be an integer between 0 and 127`}tn._direction="column",te("group-column",tn);const fn=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1);function pn(e,n,t){return Math.min(Math.max(e,n),t)}function bn(e,n="",t="",r="",o="",a=""){let i=e.replaceAll("\\n","<br>");var c;return i=i.replaceAll(/%v([-+]\d+)?/g,((e,t)=>t?n+parseInt(t):n)),i=i.replaceAll("%h",r),i=i.replaceAll("%t",o),i=i.replaceAll("%n",a),i=i.replaceAll("%a",["C","C&sharp;","D","D&sharp;","E","F","F&sharp;","G","G&sharp;","A","A&sharp;","B"][(c=a)%12]+(Math.floor(c/12)-1)),i=i.replaceAll("%p",t),i=i.replaceAll("%%","%"),i}function hn(e="",n="60"){return e.startsWith("#")?`${e}${n}`:`${function(e){var n={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return void 0!==n[e.toLowerCase()]?n[e.toLowerCase()]:"#ffffff"}(e)}${n}`}function vn(e,n,t){t!==Number.MIN_SAFE_INTEGER&&On.restoreValues&&localStorage.setItem(`touchmidi.${fn}.${e}.${n}`,t)}function mn(e,n=""){n||(n=`${e.cc}${e.chan}${e.nrpn}`);const t=e.tagName.toLowerCase();return localStorage.getItem(`touchmidi.${fn}.${t}.${n}`)}function gn(){for(let[e,n]of Object.entries(localStorage))e.startsWith(`touchmidi.${fn}`)&&localStorage.removeItem(e)}const yn="#dialog {\r\n  border: var(--b-width) solid;\r\n  border-color: #11dd11;\r\n  border-radius: var(--b-radius);\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  padding: 1rem;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 100;\r\n  background-color: var(--bg);\r\n  width: 100%;\r\n  color: #dddddd;\r\n}\r\n\r\n#container {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n@media (orientation: landscape) {\r\n  #container {\r\n    flex-direction: row;\r\n  }\r\n}\r\n\r\n.box {\r\n  flex: 1;\r\n  margin: 0.5rem;\r\n}\r\n@media (orientation: landscape) {\r\n  #container {\r\n    flex-direction: row;\r\n  }\r\n}\r\n\r\nINPUT[type='checkbox'] {\r\n  width: min(5vw, 1.3rem);\r\n  height: min(5vw, 1.3rem);\r\n}\r\n\r\nselect {\r\n  scrollbar-width: none;\r\n  background-color: var(--bg);\r\n  color: #bbbbbb;\r\n  width: 100%;\r\n  overflow-y: auto;\r\n  border: var(--b-width) solid;\r\n  border-color: #222222;\r\n  border-radius: var(--b-radius);\r\n  margin: 0.2rem;\r\n  outline: none;\r\n  font-family: var(--font);\r\n}\r\n\r\n#start {\r\n  border: var(--b-width) solid;\r\n  border-radius: var(--b-radius);\r\n  background-color: var(--bg);\r\n  font-family: var(--font);\r\n  margin-top: 1rem;\r\n  width: 100%;\r\n  background-color: darkgreen;\r\n  color: white;\r\n  border-color: #11dd11;\r\n}\r\n\r\n.disabled {\r\n  color: #444444 !important;\r\n  background-color: #111111 !important;\r\n  border-color: #666666 !important;\r\n  pointer-events: none !important;\r\n}\r\n\r\n#title {\r\n  text-align: right;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  color: #666666;\r\n}\r\n\r\n#title a {\r\n  color: #666666;\r\n  text-decoration: none;\r\n}\r\n";let wn={deviceId:"output-1",globalChannel:1,restoreValues:!1};function xn(e){const n=e.shadowRoot.querySelector("#deviceList").value,t=parseInt(e.shadowRoot.querySelector("#channel").value)||0,r=e.shadowRoot.querySelector("#restoreValues").checked,o=e.shadowRoot.querySelector("#fullScreen").checked;if(!n)return;r||gn();const i=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1);localStorage.setItem(`touchmidi.${i}.config`,JSON.stringify({deviceId:n,globalChannel:t,restoreValues:r})),function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.dispatchEvent(new CustomEvent(n,a({bubbles:!1},t)))}(e,"config-done",{detail:{deviceId:n,globalChannel:t,restoreValues:r}}),o&&document.body.requestFullscreen(),document.getElementById("pageMask").style.display="none",document.body.removeChild(e)}function Sn(e){e.shadowRoot.querySelector("#start").classList.remove("disabled")}function En(e,n){if(n.restoreValue)e.value=n.restoreValue;else{e._previousPos={x:n.x,y:n.y};var t=0;(t=e.horizontal?e.value+n.dx:e.value-n.dy)>e.max&&(t=e.max),t<e.min&&(t=e.min),e.value=Math.round(t)}}function $n(e,n){n.preventDefault(),!e.toggle&&e._pressed&&(e._pressed=!1,e.note>0&&an(e.note,e.chan),e.cc>0&&e.valueOff&&cn(e.cc,e.chan,e.valueOff),e.nrpn&&e.valueOff&&ln(e.nrpn,e.chan,e.valueOff,e.nrpnHires))}function Nn(e,n){if(n.preventDefault(),e.toggle?e._pressed=!e._pressed:e._pressed=!0,e._pressed){if(e.multinote.length>0){const n=e.multinote.split(",");sn("1,1",2,28,!0),cn(7,2,64);for(const t of n)on(parseInt(t),parseInt(e.chan),e.velo);setTimeout((()=>{for(const t of n)an(parseInt(t),parseInt(e.chan),0);sn("1,1",2,31,!0)}),2e4)}if(e.cc>0&&cn(e.cc,e.chan,e.value),e.nrpn&&ln(e.nrpn,e.chan,e.value,e.nrpnHires),e.note>0&&on(e.note,e.chan,e.velo),e.prog&&sn(e.prog,e.chan,e.value),e.multiprog&&console.log("MULTIPROG",e.multiprog),e.xpperform&&e.xpperform.length>0){const n="1,1";let t=parseInt(e.xpperform)-1;console.log("xpperform",t,16),sn(n,16,t,!0)}if(e.multiprog){const n=e.multiprog.split("|");for(const t of n){let n=t.trim().split(",");if(4!==n.length)throw new Error(`Malformed multiprog, should be "1,1,1,1|2,1,1,2|3,1,1,3" etc, is: ${e.multiprog}`);const r=parseInt(n[0]),o=n[1]+","+n[2];let a=parseInt(n[3]);!isNaN(a)&&a>-1&&sn(o,r,a,!0)}}}else e.toggle&&(e.note>0&&an(e.note,e.chan),e.cc>0&&e.valueOff&&cn(e.cc,e.chan,e.valueOff),e.nrpn&&e.valueOff&&ln(e.nrpn,e.chan,e.valueOff,e.nrpnHires),e.prog&&e.valueOff&&sn(e.prog,e.chan,e.valueOff))}function kn(e,n){n.preventDefault(),"inc"==n.target.id?e.value=e.value+1:e.value=e.value-1,e.value>e.max&&(e.value=e.max),e.value<e.min&&(e.value=e.min),e.cc>0&&cn(e.cc,e.chan,e.value)}te("midi-config",{render:()=>{if(document.getElementById("pageMask").style.display="block",!Qe)return void alert("No MIDI access, something went wrong!\nYou should never see this error!");if(0==Qe.outputs.size)return Ze` <div id="dialog">
        <div class="box" style="text-align:center">
          No MIDI output devices were found &#128549;<br /><br />Please attach a MIDI device and try again
        </div>
        <button onclick="window.location.reload()" id="start" class="enabled" style="background-color:darkgreen">Reload</button>
      </div>`.style(yn);const e=Array.from(Array(16).keys()),n=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),t=localStorage.getItem(`touchmidi.${n}.config`);let r={};r=t?JSON.parse(t):wn;let o="disabled";return Qe.outputs.forEach((function(e,n){n==r.deviceId&&(o="enabled")})),Ze`
      <div id="dialog">
        <span id="title">Touch Midi v${"2.2.0"} &nbsp; <a href="https://code.benco.io/touchmidi/" target="_blank">[[ GitHub ]]</a></span>
        <div id="container">
          <div class="box">
            Select MIDI Device
            <select size="5" id="deviceList" onchange="${Sn}">
              ${Array.from(Qe.outputs.entries()).map((e=>Ze`<option value="${e[0]}" selected="${e[0]==r.deviceId}">${e[1].name}</option>`))}
            </select>
            <br />
          </div>
          <div class="box">
            MIDI Channels
            <select id="channel">
              <option value="0">Set By Layout</option>
              ${e.map((e=>Ze`<option value="${e+1}" selected="${e==r.globalChannel-1}">${e+1}</option>`))}
            </select>
          </div>
          <div class="box">
            <input type="checkbox" id="restoreValues" name="restoreValues" checked="${r.restoreValues}" />
            <label for="restoreValues">Save &amp; Restore at Startup</label>
            <br />
            <input type="checkbox" id="fullScreen" name="fullScreen" />
            <label for="fullScreen">Start Fullscreen</label>
          </div>
        </div>
        <button onclick="${xn}" id="start" class="${o}">Start</button>
      </div>
    `.style(yn)}}),te("midi-slider",{_previousPos:null,_width:30,_update:{observe:En},value:Number.MIN_SAFE_INTEGER,chan:1,cc:-1,nrpn:"",min:0,max:127,pitchBend:!1,colour:m("#ffffff"),label:"__unset__",horizontal:!1,labelScale:1,grow:1,render:({value:e,colour:n,label:t,min:r,max:o,cc:a,chan:i,horizontal:c,nrpn:l,pitchBend:s,_width:u,labelScale:d,grow:f})=>{const p=e;vn("midi-slider",`${a}${i}${l}`,e),e>o&&(e=o),e<r&&(e=r);const b=Math.round((e-r)/(o-r)*100);"__unset__"===t&&(t="%v");const h=`\n    :host { \n      flex-grow: ${f} \n    }\n    div {\n      background: linear-gradient(to ${c?"right":"top"}, ${hn(n)} ${b}%, var(--bg) ${b}%);\n      color: ${n};\n      border-color: ${n};\n      font-size: ${.2*u*d}px;\n    }`;return a>0&&p>Number.MIN_SAFE_INTEGER&&cn(a,i,e),l&&p>Number.MIN_SAFE_INTEGER&&ln(l,i,e,o>127),s&&function(e=1,n=0){if(!en)return;const t=nn>0?nn:e;un(t);const r=Math.floor(n/128),o=Math.floor(n%128);console.debug(`MIDI pitchbend - val_msb:${r}, val_lsb:${o}, channel:${t}`),en.send([t-1+224,r,o])}(i,e),Ze`<div innerHTML="${bn(t,e,b,i,a)}"></div>`.style(":host {\r\n  flex: 1 1;\r\n  display: flex;\r\n  margin: var(--spacing);\r\n}\r\n\r\ndiv {\r\n  font-size: 4vw;\r\n  display: flex;\r\n  flex: 1 1;\r\n  border: var(--b-width) solid;\r\n  border-radius: var(--b-radius);\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  line-height: 0.9em;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  user-select: none;\r\n}\r\n",h)}}),te("midi-encoder",{_previousPos:null,_width:30,_update:{observe:En},value:Number.MIN_SAFE_INTEGER,chan:1,cc:-1,nrpn:"",min:0,max:127,colour:m("#ffffff"),label:"__unset__",horizontal:!1,labelScale:1,grow:1,render:({value:e,colour:n,label:t,min:r,max:o,chan:a,cc:i,nrpn:c,_width:l,labelScale:s,grow:u})=>{const d=e;vn("midi-encoder",`${i}${a}${c}`,e),e>o&&(e=o),e<r&&(e=r);const f=Math.round((e-r)/(o-r)*100),p=(e-r)/(o-r)*75;"__unset__"===t&&(t="%v"),i>0&&d>Number.MIN_SAFE_INTEGER&&cn(i,a,e),c&&d>Number.MIN_SAFE_INTEGER&&ln(c,a,e,o>127);const b=`\n    :host {\n      flex-grow: ${u}\n    }\n    #label {\n      color: ${n}; \n      font-size:${.2*l*s}px\n    }`;return Ze`<div>
      <svg viewBox="0 0 36 36">
        <path
          d="M18 2.0
    a 1 1 0 0 1 0 32
    a 1 1 0 0 1 0 -32"
          fill="none"
          stroke="${n}"
          stroke-opacity="0.3"
          stroke-width="0.1rem"
          stroke-dasharray="75, 100"
          transform="rotate(226 18 18)"
          stroke-linecap="round"
        />
        <path
          d="M18 2.0
    a 1 1 0 0 1 0 32
    a 1 1 0 0 1 0 -32"
          fill="none"
          stroke="${n}"
          stroke-width="0.25rem"
          stroke-dasharray="${p}, 100"
          transform="rotate(226 18 18)"
          stroke-linecap="round"
        />
      </svg>
      <div id="label" innerHTML="${bn(t,e,f,a,i)}"></div>
    </div>`.style(":host {\r\n  flex: 1 1;\r\n  display: flex;\r\n  margin: var(--spacing);\r\n}\r\n\r\nsvg {\r\n  height: 100%;\r\n  margin: 0 auto;\r\n}\r\n\r\ndiv {\r\n  flex: auto;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  user-select: none;\r\n  position: relative;\r\n}\r\n\r\n#label {\r\n  font-size: 5vmin;\r\n  position: absolute;\r\n  z-index: 40;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  text-align: center;\r\n  line-height: 0.9em;\r\n  width: 100%;\r\n  padding: 0.2rem;\r\n}\r\n",b)}}),te("midi-button",{_pressed:!1,_width:30,chan:1,cc:-1,nrpn:"",nrpnHires:!1,value:0,valueOff:0,velo:127,note:-1,prog:"",multiprog:"",multinote:"",xpperform:"",hsl:"",colour:m("#ffffff"),label:"__unset__",toggle:!1,labelScale:1,grow:1,render:({label:e,colour:n,_pressed:t,chan:r,cc:o,nrpn:a,prog:i,note:c,_width:l,labelScale:s,grow:u,hsl:d})=>{"__unset__"===e&&(c>0?e="%a":o>0?e="%t":a?e=a:i&&(e=i));const f=`\n    :host {\n      flex-grow: ${u}\n    }\n    button {\n      background-color: hsl(${d}, 100%, 20%);\n      color: ${n};\n      border-color: ${n};\n    }`;return Ze`<button
      onmouseup="${$n}"
      ontouchend="${$n}"
      onmousedown="${Nn}"
      ontouchstart="${Nn}"
      onmouseleave="${$n}"
      innerHTML="${bn(e,"","",r,o,c)}"
    ></button>`.style(":host {\r\n  flex: 1 1;\r\n  display: flex;\r\n  margin: var(--spacing);\r\n}\r\n\r\nbutton {\r\n  font-family: var(--font);\r\n  display: flex;\r\n  flex: 1 1;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  width: 1px;\r\n  user-select: none;\r\n}\r\n\r\nbutton .selected {\r\n  border: 10px solid;\r\n}\r\n",f)}}),te("midi-pad",{_previousPos:null,_width:30,_update:{observe:(e,n)=>{if(n.restoreValue)return void(e.value=n.restoreValue);e._previousPos={x:n.x,y:n.y};let t=e.valueX+n.dx,r=e.valueY-n.dy;t=pn(t,e.min,e.max),r=pn(r,e.min,e.max),e.valueX=Math.round(t),e.valueY=Math.round(r)}},valueX:Number.MIN_SAFE_INTEGER,valueY:Number.MIN_SAFE_INTEGER,chan:1,ccX:-1,ccY:-1,min:0,max:127,colour:m("#ffffff"),label:"__unset__",labelScale:1,grow:1,render:({valueX:e,valueY:n,colour:t,label:r,min:o,max:a,ccX:i,ccY:c,chan:l,nrpn:s,_width:u,labelScale:d,grow:f})=>{const p=e,b=n;vn("midi-pad",`${i}${l}${s}X`,e),vn("midi-pad",`${c}${l}${s}Y`,n),e=pn(e,o,a),n=pn(n,o,a);let h=Math.round((e-o)/(a-o)*100),v=Math.round((n-o)/(a-o)*100);"__unset__"===r&&(r="%v");const m=`\n    :host {\n      flex-grow: ${f}\n    }\n    div {\n      color: ${t};\n      border-color: ${t};\n    }\n    #label {\n      font-size: ${.4*u*d}px;\n    }\n    #marker {\n      background-color: ${hn(t)};\n      border-color: ${t};\n      bottom: calc(${v}% - ${.05*u}px);\n      left: calc(${h}% - ${.05*u}px);\n      width: ${.1*u}px;\n      height: ${.1*u}px;\n    }`;return i>0&&c>0&&p>Number.MIN_SAFE_INTEGER&&b>Number.MIN_SAFE_INTEGER&&(cn(i,l,e),cn(c,l,n)),Ze`<div>
      <div id="label" innerHTML="${bn(r,`${e},${n}`,`${h},${v}`,l)}"></div>
      <span id="marker"></span>
    </div>`.style(":host {\r\n  flex: 1 1;\r\n  display: flex;\r\n  margin: var(--spacing);\r\n}\r\n\r\ndiv {\r\n  font-size: 4vw;\r\n  display: flex;\r\n  flex: 1 1;\r\n  border: var(--b-width) solid;\r\n  border-radius: var(--b-radius);\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  line-height: 0.9em;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  width: 1px;\r\n  user-select: none;\r\n  position: relative;\r\n}\r\n\r\n#marker {\r\n  width: 3vmax;\r\n  height: 3vmax;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  background-color: white;\r\n  display: block;\r\n  z-index: 10;\r\n  border: 0.3vmax solid white;\r\n}\r\n\r\n#label {\r\n  border: none;\r\n  padding: 1rem;\r\n}\r\n",m)}}),te("midi-counter",{_width:30,chan:1,cc:-1,value:0,min:0,max:127,colour:m("#ffffff"),label:"__unset__",labelScale:1,grow:1,render:({colour:e,chan:n,cc:t,_width:r,labelScale:o,grow:a,value:i})=>{vn("midi-counter",`${t}${n}0`,i);const c=`\n    :host {\n      flex-grow: ${a}\n    }\n    button:active {\n      background-color: ${hn(e)};\n    }\n    #label {\n      font-size: ${.2*r*o}px !important;\n      border-color: ${e};\n      color: ${e};\n      background-color: var(--bg);\n    }\n    button {\n      color: ${e};\n      border-color: ${e};\n      font-size: ${.3*r*o}px !important;\n    }`;return Ze`<div>
      <span id="label" innerHTML="${i}"></span>
      <button id="dec" onmousedown="${kn}" ontouchstart="${kn}">-1</button>
      <button id="inc" onmousedown="${kn}" ontouchstart="${kn}">+1</button>
    </div>`.style(":host {\r\n  flex: 1 1;\r\n  display: flex;\r\n  margin: var(--spacing);\r\n}\r\n\r\ndiv {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex: 1 1;\r\n  position: relative;\r\n}\r\n\r\nbutton {\r\n  font-family: var(--font);\r\n  background-color: var(--bg);\r\n  font-size: 5vw;\r\n  flex: 1 1;\r\n  border: var(--b-width) solid;\r\n  border-radius: var(--b-radius);\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  user-select: none;\r\n}\r\n\r\n#label {\r\n  position: absolute;\r\n  background-color: var(--bg);\r\n  height: 50%;\r\n  text-align: center;\r\n  width: 25%;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 4;\r\n  font-size: 5vw;\r\n  overflow: hidden;\r\n  display: block;\r\n  pointer-events: none;\r\n}\r\n",c)}}),te("midi-spacer",{grow:1,render:({grow:e})=>{const n=`\n    :host{\n      flex: ${e} 1;\n    }\n    div {\n      flex ${e} 1;\n    }`;return Ze`<div></div>`.style(n)}}),te("midi-label",{grow:1,render:({grow:e})=>{const n=`\n    :host{\n      flex: ${e} 1;\n    }\n    div {\n      flex ${e} 1;\n      font-size: 4vw;\n    }`;return Ze`<div><slot></div>`.style(n)}});let _n=[],On={};function In(e){for(let n of e.changedTouches)_n[n.identifier]=n.target}function Mn(e){for(let n of e.changedTouches)Dn(n.target,n.screenX,n.screenY)}function jn(e){for(let n of e.changedTouches)_n.splice(n.identifier,1)}function Tn(e){_n[20]=e.target}function An(e){Dn(_n[20],e.screenX,e.screenY)}function Cn(){_n.splice(20,1)}function Dn(e,n,t){if(!e)return;let r=0,o=0;e._previousPos&&(r=n-e._previousPos.x,o=t-e._previousPos.y,r=pn(r,-6,6)/1,o=pn(o,-6,6)/1),e._update={dx:r,dy:o,x:n,y:t}}function Pn(e){e.preventDefault()}async function Ln(e){if(!e.deviceId)return void alert("No MIDI device id, MIDI output will fail!");await async function(){await async function(e){const n=await fetch(e);let t=function(e){let n=[],t=!1,r=0,o=0,a=0;for(;a<e.length;a++){const i=e[a],c=e[a+1];n[r]=n[r]||[],n[r][o]=n[r][o]||"",'"'==i&&t&&'"'==c?(n[r][o]+=i,++a):'"'!=i?","!=i||t?"\r"!=i||"\n"!=c||t?"\n"==i&&!t||"\r"==i&&!t?(++r,o=0):n[r][o]+=i:(++r,o=0,++a):++o:t=!t}return n}(await n.text()),r=0,o=0,a=document.createElement("group-row");document.body.appendChild(a),t.shift(),t=t.sort(((e,n)=>e[0]>n[0]?1:-1));for(let e of t){console.log(r,e);const n=e[0],i="1,1,1,"+(e[1]-1),c="2,0,1,"+(e[2]-1),l=`3,0,1,${e[3]}`,s=e[4],u=e[5],d=document.createElement("midi-button");d.setAttribute("label",n),d.setAttribute("multiprog",`${i}|${c}|${l}`),s.length>0&&(console.log("xpperform",s),d.setAttribute("xpperform",s)),d.setAttribute("hsl",(r/(t.length-2)*360).toString()),a.appendChild(d),console.log(n,i,c,l,s,u),o>5&&(a=document.createElement("group-row"),document.body.appendChild(a),o=0),o++,r++}}(`../assets/csv/patches.csv?random=${Math.random()}`)}();let n=!1;for(let t of Qe.outputs.values())t.id===e.deviceId&&(n=!0);if(n){if(function(e="output-1",n=0){en=e,nn=n}(Qe.outputs.get(e.deviceId),e.globalChannel||0),console.log(`MIDI configured for device '${e.deviceId}' and channel: ${e.globalChannel}`),e.restoreValues){console.log("Restoring saved widget values...");for(let e of document.body.querySelectorAll("midi-slider,midi-encoder,midi-pad,midi-counter"))if("midi-pad"==e.tagName.toLowerCase()){let n=mn(e,`${e.ccX}${e.chan}${e.nrpn}X`),t=mn(e,`${e.ccY}${e.chan}${e.nrpn}Y`);n&&(e.valueX=n),t&&(e.valueY=t)}else{let n=mn(e);n&&(e.value=n)}}}else alert(`The provided MIDI device id '${e.deviceId}' is invalid, MIDI output will fail!`)}function Rn(){for(let e of document.body.querySelectorAll("midi-slider,midi-encoder,midi-pad,midi-button,midi-counter"))e._width=e.clientWidth}window.addEventListener("load",(async()=>{await async function(){const e=document.createElement("div");e.id="pageMask",document.body.append(e);const n=document.createElement("style");n.textContent="@import url('https://fonts.googleapis.com/css2?family=PT+Sans&display=swap');\r\n\r\n:root {\r\n  /* these variables are used everywhere */\r\n  --bg: black; /* background colour */\r\n  --b-radius: 0; /* border radius */\r\n  --b-width: 0rem; /* border thickness */\r\n  --spacing: 0rem; /* widget spacing */\r\n\r\n  --font: sans-serif; /* Consolas, 'Courier New', monospace; */\r\n}\r\n\r\nhtml,\r\nbody {\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  overflow-y: hidden;\r\n  color: white;\r\n  background-color: var(--bg);\r\n  font-family: var(--font);\r\n  touch-action: none;\r\n  padding-right: 10px;\r\n}\r\n\r\nbody {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* Used to hide the page behind the config dialog */\r\n#pageMask {\r\n  background: rgba(0, 0, 0, 0.8);\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  display: none;\r\n}\r\n";let t=document.createElement("meta");t.setAttribute("name","viewport"),t.setAttribute("content","width=device-width, user-scalable=no, initial-scale=1.0"),document.getElementsByTagName("head")[0].appendChild(t);let r=document.querySelector("link[rel~='icon']");r||(r=document.createElement("link"),r.rel="icon",r.href="https://raw.githubusercontent.com/benc-uk/touchmidi/main/src/assets/favicon.png",document.getElementsByTagName("head")[0].appendChild(r)),document.head.append(n)}();const e=await rn();if(e){for(let n of e.outputs.values())console.log(`MIDI device found --- deviceId: ${n.id}, name: ${n.name}`);null===new URLSearchParams(window.location.search).get("nomidi")&&function(e){const n=new URLSearchParams(window.location.search);if(n.has("channel")||n.has("device")||n.has("restore")){On=wn,On.globalChannel=n.has("channel")?parseInt(n.get("channel")):1,On.deviceId=n.has("device")?n.get("device"):On.deviceId,On.restoreValues=n.has("restore")?"true"===n.get("restore"):On.restoreValues,On.restoreValues||gn();const e=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1);return localStorage.setItem(`touchmidi.${e}.config`,JSON.stringify(On)),void Ln(On)}const t=document.createElement("midi-config");t.channelNames=void 0,t.addEventListener("config-done",(e=>{Ln(e.detail)})),document.body.appendChild(t)}(),window.addEventListener("resize",Rn),setTimeout(Rn,200),window.addEventListener("mousedown",Tn,!1),window.addEventListener("mousemove",An,!1),window.addEventListener("mouseup",Cn,!1),window.addEventListener("touchstart",In,!1),window.addEventListener("touchmove",Mn,!1),window.addEventListener("touchend",jn,!1),window.addEventListener("dblclick",Pn,!1),window.addEventListener("contextmenu",Pn,!1)}else document.body.innerHTML='<div style="text-align: center; font-size: 120%">\n    <h2 style="color:#ee2222">Failed to get MIDI access &#128559;</h2>\n    <br>This is likely because your browser doesn\'t support MIDI or permissions were not granted.\n    <br>Also ensure you load the page from a https:// or file:// URL origin. <br><br>Try again using Chrome or Edge</div>'}))}},n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t(476)})();
//# sourceMappingURL=bundle.js.map