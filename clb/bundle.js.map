{"version":3,"sources":["webpack://touchmidi/./node_modules/hybrids/esm/utils.js","webpack://touchmidi/./node_modules/hybrids/esm/property.js","webpack://touchmidi/./node_modules/hybrids/esm/render.js","webpack://touchmidi/./node_modules/hybrids/esm/emitter.js","webpack://touchmidi/./node_modules/hybrids/esm/cache.js","webpack://touchmidi/./node_modules/hybrids/esm/define.js","webpack://touchmidi/./node_modules/hybrids/esm/template/utils.js","webpack://touchmidi/./node_modules/hybrids/esm/template/resolvers/array.js","webpack://touchmidi/./node_modules/hybrids/esm/template/resolvers/value.js","webpack://touchmidi/./node_modules/hybrids/esm/template/resolvers/event.js","webpack://touchmidi/./node_modules/hybrids/esm/template/resolvers/class.js","webpack://touchmidi/./node_modules/hybrids/esm/template/resolvers/style.js","webpack://touchmidi/./node_modules/hybrids/esm/template/resolvers/property.js","webpack://touchmidi/./node_modules/hybrids/esm/template/core.js","webpack://touchmidi/./node_modules/hybrids/esm/template/helpers.js","webpack://touchmidi/./node_modules/hybrids/esm/template/index.js","webpack://touchmidi/./src/components/row.js","webpack://touchmidi/./src/components/column.js","webpack://touchmidi/./src/midi.js","webpack://touchmidi/./src/utils.js","webpack://touchmidi/./src/components/config.css","webpack://touchmidi/./src/components/config.js","webpack://touchmidi/./src/components/slider.js","webpack://touchmidi/./src/components/button.js","webpack://touchmidi/./src/components/counter.js","webpack://touchmidi/./src/components/slider.css","webpack://touchmidi/./src/components/encoder.js","webpack://touchmidi/./src/components/encoder.css","webpack://touchmidi/./src/components/button.css","webpack://touchmidi/./src/components/xypad.js","webpack://touchmidi/./src/components/xypad.css","webpack://touchmidi/./src/components/counter.css","webpack://touchmidi/./src/components/helpers.js","webpack://touchmidi/./src/main.js","webpack://touchmidi/./src/setlist.js","webpack://touchmidi/./src/setlist/csv.js","webpack://touchmidi/./src/css/main.css","webpack://touchmidi/webpack/bootstrap","webpack://touchmidi/webpack/runtime/define property getters","webpack://touchmidi/webpack/runtime/hasOwnProperty shorthand","webpack://touchmidi/webpack/runtime/make namespace object","webpack://touchmidi/webpack/startup"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","camelToDashMap","Map","camelToDash","str","result","get","undefined","replace","toLowerCase","set","shadyCSS","fn","fallback","shady","window","ShadyCSS","nativeShadow","stringifyElement","concat","String","tagName","IS_IE","deferred","Promise","resolve","storePointer","WeakMap","_typeof","Symbol","iterator","constructor","prototype","defaultTransform","v","objectTransform","TypeError","freeze","property","connect","type","transform","Number","Boolean","host","val","oldValue","invalidate","attrName","hasAttribute","attrValue","getAttribute","callbacks","queue","Set","execute","delete","e","size","requestAnimationFrame","add","entries","getEntry","targetMap","entry","contexts","deps","state","checksum","observed","calculateChecksum","depEntry","dispatchDeep","restoreDeepDeps","contextStack","getter","validate","has","Error","context","nextValue","gcList","clearValue","deleteValue","clear","deleteEntry","invalidateEntry","observe","lastValue","unsubscribe","cb","_defineProperties","props","descriptor","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","_wrapNativeSuper","Class","_cache","Function","toString","indexOf","Wrapper","_construct","_getPrototypeOf","this","create","_setPrototypeOf","Parent","args","_isNativeReflectConstruct","Reflect","construct","a","instance","bind","sham","Proxy","Date","o","p","setPrototypeOf","__proto__","getPrototypeOf","process","env","NODE_ENV","update","defaultMethod","callbacksMap","propsMap","compile","Hybrid","descriptors","hybrids","config","desc","customOptions","options","shadowRoot","shadowRootInit","mode","assign","attachShadow","flush","render","Array","isArray","newValue","setter","unshift","walkInShadow","node","from","children","el","updateQueue","lastHybrids","then","document","body","disconnectedCallback","connectedCallback","disconnects","defineElement","hybridsOrConstructor","CustomElement","customElements","define","_HTMLElement","subClass","superClass","_inherits","Derived","Constructor","protoProps","_super","Super","NewTarget","_this","_classCallCheck","index","hasOwnProperty","list","HTMLElement","defineMap","elements","reduce","acc","map","dataMap","defaultValue","getTemplateEnd","data","endNode","removeTemplate","nodeType","Node","TEXT_NODE","child","childNodes","removeChild","startNode","lastNextSibling","nextSibling","parentNode","arrayMap","movePlaceholder","previousSibling","insertBefore","prevNode","nextNode","resolveValue","textContent","lastEntries","item","id","placeholder","available","ids","lastIndex","matchedEntry","createTextNode","resolveArray","targets","classMap","resolveClassList","previousList","className","normalizeValue","classList","remove","styleMap","resolveStyle","previousMap","nextMap","dashKey","styleValue","style","setProperty","removeProperty","resolveProperty","propertyName","isSVG","substr","eventType","eventMap","removeEventListener","_eventMap","callback","addEventListener","SVGElement","removeAttribute","setAttribute","_slicedToArray","arr","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","next","done","err","_iterableToArrayLimit","minLen","_arrayLikeToArray","n","slice","name","test","_unsupportedIterableToArray","_nonIterableRest","len","arr2","TIMESTAMP","now","getPlaceholder","PLACEHOLDER_REGEXP_TEXT","PLACEHOLDER_REGEXP_EQUAL","RegExp","PLACEHOLDER_REGEXP_ALL","ATTR_PREFIX","ATTR_REGEXP","preparedTemplates","createWalker","ShadyDOM","inUse","createTreeWalker","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","container","createElement","styleSheetsMap","beautifyTemplateLog","input","output","startIndent","indent","t","Math","max","normalizeWhitespace","split","line","startIndex","repeat","join","compileTemplate","rawParts","styles","template","parts","signature","part","match","createSignature","innerHTML","content","appendChild","svgRoot","firstChild","fragment","createNodeIterator","SHOW_COMMENT","replaceComments","compileWalker","compileIndex","_loop","currentNode","text","results","_acc$pop$split2","pop","before","equal","ELEMENT_NODE","attributes","attr","trim","_results","partialName","styleSheets","prevArgs","importNode","clone","cloneNode","querySelectorAll","count","prepareTemplate","applyShadyCSS","renderWalker","clonedParts","renderIndex","currentPart","shift","markers","previousChild","adoptedStyleSheets","isEqual","CSSStyleSheet","styleSheet","replaceSync","_data$markers$index","_node","marker","error","console","styleSubtree","styleElement","_ref","checked","files","getPartialObject","reverse","stringCache","valueOrPath","store","event","promiseMap","promise","delay","timeout","setTimeout","clearTimeout","PLACEHOLDER","SVG_PLACEHOLDER","STYLE_IMPORT_REGEXP","templatesMap","stylesMap","methods","_len","_key","createTemplate","hasAdoptedStyleSheets","joinedStyles","html","_len2","_key2","_len3","_key3","Component","grow","margin","border","colour","_direction","css","access","midiOut","globalChannel","ColumnComponent","async","getAccess","navigator","requestMIDIAccess","sendNoteOn","note","chan","velo","channel","checkValue","checkChannel","log","send","sendNoteOff","debug","sendCC","cc","sendNRPN","bytePair","highRes","bytes","lsb","parseInt","msb","isInteger","val_msb","floor","val_lsb","warn","sendProgChange","progNum","overrideGlobal","filename","location","pathname","substring","lastIndexOf","clamp","min","formatLabel","percent","newLabel","replaceAll","midiNote","modifier","darkenColour","hexOpacity","startsWith","colours","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","colourNameToHex","saveWidgetValue","widgetName","MIN_SAFE_INTEGER","restoreValues","localStorage","setItem","getWidgetValue","widget","nrpn","getItem","removeStorage","removeItem","defaultConfig","deviceId","startClicked","querySelector","fullScreen","JSON","stringify","dispatchEvent","CustomEvent","bubbles","dispatch","detail","requestFullscreen","getElementById","display","deviceSelected","updateObserver","restoreValue","_previousPos","x","y","tempValue","horizontal","dx","dy","round","eventReleased","evt","preventDefault","toggle","_pressed","valueOff","nrpnHires","eventPressed","multinote","notes","prog","multiprog","xpperform","bank","programs","program","progInfo","isNaN","alert","channels","configJSON","parse","startClass","device","_width","_update","pitchBend","label","labelScale","originalValue","newStyle","valLength","hsl","tempX","valueX","tempY","valueY","ccX","ccY","originalValueX","originalValueY","percentX","percentY","activeWidgets","eventTouchStart","touch","changedTouches","identifier","eventTouchMove","updateWidget","screenX","screenY","eventTouchEnd","splice","eventMouseDown","eventMouseMove","eventMouseUp","eventSinkHole","startLayout","url","response","fetch","csvArray","quote","row","col","c","nc","parseCSV","counter","rowCount","rowDiv","sort","b","patchName","xp50User","jx8P","korg","akai","loadSetList","random","fetchSetList","validDevice","outDevice","globalChan","savedValX","savedValY","savedVal","updateWidgetWidths","clientWidth","pageMask","append","viewport","getElementsByTagName","iconLink","rel","href","head","pageSetup","outputs","values","URLSearchParams","search","channelNames","urlParams","configDialog","openConfigDialog","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","d","definition","prop","r","toStringTag"],"mappings":"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","file":"bundle.js","sourcesContent":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar camelToDashMap = new Map();\nexport function camelToDash(str) {\n  var result = camelToDashMap.get(str);\n\n  if (result === undefined) {\n    result = str.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n    camelToDashMap.set(str, result);\n  }\n\n  return result;\n}\nexport function pascalToDash(str) {\n  return camelToDash(str.replace(/((?!([A-Z]{2}|^))[A-Z])/g, \"-$1\"));\n}\nexport function dispatch(host, eventType) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return host.dispatchEvent(new CustomEvent(eventType, _objectSpread({\n    bubbles: false\n  }, options)));\n}\nexport function shadyCSS(fn, fallback) {\n  var shady = window.ShadyCSS;\n  /* istanbul ignore next */\n\n  if (shady && !shady.nativeShadow) {\n    return fn(shady);\n  }\n\n  return fallback;\n}\nexport function stringifyElement(target) {\n  return \"<\".concat(String(target.tagName).toLowerCase(), \">\");\n}\nexport var IS_IE = (\"ActiveXObject\" in window);\nexport var deferred = Promise.resolve();\nexport var storePointer = new WeakMap();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlscy5qcyJdLCJuYW1lcyI6WyJjYW1lbFRvRGFzaE1hcCIsIk1hcCIsImNhbWVsVG9EYXNoIiwic3RyIiwicmVzdWx0IiwiZ2V0IiwidW5kZWZpbmVkIiwicmVwbGFjZSIsInRvTG93ZXJDYXNlIiwic2V0IiwicGFzY2FsVG9EYXNoIiwiZGlzcGF0Y2giLCJob3N0IiwiZXZlbnRUeXBlIiwib3B0aW9ucyIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImJ1YmJsZXMiLCJzaGFkeUNTUyIsImZuIiwiZmFsbGJhY2siLCJzaGFkeSIsIndpbmRvdyIsIlNoYWR5Q1NTIiwibmF0aXZlU2hhZG93Iiwic3RyaW5naWZ5RWxlbWVudCIsInRhcmdldCIsIlN0cmluZyIsInRhZ05hbWUiLCJJU19JRSIsImRlZmVycmVkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzdG9yZVBvaW50ZXIiLCJXZWFrTWFwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFNQSxjQUFjLEdBQUcsSUFBSUMsR0FBSixFQUF2QjtBQUNBLE9BQU8sU0FBU0MsV0FBVCxDQUFxQkMsR0FBckIsRUFBMEI7QUFDL0IsTUFBSUMsTUFBTSxHQUFHSixjQUFjLENBQUNLLEdBQWYsQ0FBbUJGLEdBQW5CLENBQWI7O0FBQ0EsTUFBSUMsTUFBTSxLQUFLRSxTQUFmLEVBQTBCO0FBQ3hCRixJQUFBQSxNQUFNLEdBQUdELEdBQUcsQ0FBQ0ksT0FBSixDQUFZLGlCQUFaLEVBQStCLE9BQS9CLEVBQXdDQyxXQUF4QyxFQUFUO0FBQ0FSLElBQUFBLGNBQWMsQ0FBQ1MsR0FBZixDQUFtQk4sR0FBbkIsRUFBd0JDLE1BQXhCO0FBQ0Q7O0FBQ0QsU0FBT0EsTUFBUDtBQUNEO0FBRUQsT0FBTyxTQUFTTSxZQUFULENBQXNCUCxHQUF0QixFQUEyQjtBQUNoQyxTQUFPRCxXQUFXLENBQUNDLEdBQUcsQ0FBQ0ksT0FBSixDQUFZLDBCQUFaLEVBQXdDLEtBQXhDLENBQUQsQ0FBbEI7QUFDRDtBQUVELE9BQU8sU0FBU0ksUUFBVCxDQUFrQkMsSUFBbEIsRUFBd0JDLFNBQXhCLEVBQWlEO0FBQUEsTUFBZEMsT0FBYyx1RUFBSixFQUFJO0FBQ3RELFNBQU9GLElBQUksQ0FBQ0csYUFBTCxDQUNMLElBQUlDLFdBQUosQ0FBZ0JILFNBQWhCO0FBQTZCSSxJQUFBQSxPQUFPLEVBQUU7QUFBdEMsS0FBZ0RILE9BQWhELEVBREssQ0FBUDtBQUdEO0FBRUQsT0FBTyxTQUFTSSxRQUFULENBQWtCQyxFQUFsQixFQUFzQkMsUUFBdEIsRUFBZ0M7QUFDckMsTUFBTUMsS0FBSyxHQUFHQyxNQUFNLENBQUNDLFFBQXJCO0FBRUE7O0FBQ0EsTUFBSUYsS0FBSyxJQUFJLENBQUNBLEtBQUssQ0FBQ0csWUFBcEIsRUFBa0M7QUFDaEMsV0FBT0wsRUFBRSxDQUFDRSxLQUFELENBQVQ7QUFDRDs7QUFFRCxTQUFPRCxRQUFQO0FBQ0Q7QUFFRCxPQUFPLFNBQVNLLGdCQUFULENBQTBCQyxNQUExQixFQUFrQztBQUN2QyxvQkFBV0MsTUFBTSxDQUFDRCxNQUFNLENBQUNFLE9BQVIsQ0FBTixDQUF1QnBCLFdBQXZCLEVBQVg7QUFDRDtBQUVELE9BQU8sSUFBTXFCLEtBQUssSUFBRyxtQkFBbUJQLE1BQXRCLENBQVg7QUFDUCxPQUFPLElBQU1RLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxPQUFSLEVBQWpCO0FBRVAsT0FBTyxJQUFNQyxZQUFZLEdBQUcsSUFBSUMsT0FBSixFQUFyQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNhbWVsVG9EYXNoTWFwID0gbmV3IE1hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIGNhbWVsVG9EYXNoKHN0cikge1xuICBsZXQgcmVzdWx0ID0gY2FtZWxUb0Rhc2hNYXAuZ2V0KHN0cik7XG4gIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHJlc3VsdCA9IHN0ci5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgY2FtZWxUb0Rhc2hNYXAuc2V0KHN0ciwgcmVzdWx0KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFzY2FsVG9EYXNoKHN0cikge1xuICByZXR1cm4gY2FtZWxUb0Rhc2goc3RyLnJlcGxhY2UoLygoPyEoW0EtWl17Mn18XikpW0EtWl0pL2csIFwiLSQxXCIpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoKGhvc3QsIGV2ZW50VHlwZSwgb3B0aW9ucyA9IHt9KSB7XG4gIHJldHVybiBob3N0LmRpc3BhdGNoRXZlbnQoXG4gICAgbmV3IEN1c3RvbUV2ZW50KGV2ZW50VHlwZSwgeyBidWJibGVzOiBmYWxzZSwgLi4ub3B0aW9ucyB9KSxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoYWR5Q1NTKGZuLCBmYWxsYmFjaykge1xuICBjb25zdCBzaGFkeSA9IHdpbmRvdy5TaGFkeUNTUztcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBpZiAoc2hhZHkgJiYgIXNoYWR5Lm5hdGl2ZVNoYWRvdykge1xuICAgIHJldHVybiBmbihzaGFkeSk7XG4gIH1cblxuICByZXR1cm4gZmFsbGJhY2s7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlFbGVtZW50KHRhcmdldCkge1xuICByZXR1cm4gYDwke1N0cmluZyh0YXJnZXQudGFnTmFtZSkudG9Mb3dlckNhc2UoKX0+YDtcbn1cblxuZXhwb3J0IGNvbnN0IElTX0lFID0gXCJBY3RpdmVYT2JqZWN0XCIgaW4gd2luZG93O1xuZXhwb3J0IGNvbnN0IGRlZmVycmVkID0gUHJvbWlzZS5yZXNvbHZlKCk7XG5cbmV4cG9ydCBjb25zdCBzdG9yZVBvaW50ZXIgPSBuZXcgV2Vha01hcCgpO1xuIl19","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { camelToDash } from \"./utils.js\";\n\nvar defaultTransform = function defaultTransform(v) {\n  return v;\n};\n\nvar objectTransform = function objectTransform(value) {\n  if (_typeof(value) !== \"object\") {\n    throw TypeError(\"Assigned value must be an object: \".concat(_typeof(value)));\n  }\n\n  return value && Object.freeze(value);\n};\n\nexport default function property(value, connect) {\n  var type = _typeof(value);\n\n  var transform = defaultTransform;\n\n  switch (type) {\n    case \"string\":\n      transform = String;\n      break;\n\n    case \"number\":\n      transform = Number;\n      break;\n\n    case \"boolean\":\n      transform = Boolean;\n      break;\n\n    case \"function\":\n      transform = value;\n      value = transform();\n      break;\n\n    case \"object\":\n      if (value) Object.freeze(value);\n      transform = objectTransform;\n      break;\n\n    default:\n      break;\n  }\n\n  return {\n    get: function get(host) {\n      var val = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : value;\n      return val;\n    },\n    set: function set(host, val, oldValue) {\n      return transform(val, oldValue);\n    },\n    connect: type !== \"object\" && type !== \"undefined\" ? function (host, key, invalidate) {\n      if (host[key] === value) {\n        var attrName = camelToDash(key);\n\n        if (host.hasAttribute(attrName)) {\n          var attrValue = host.getAttribute(attrName);\n          host[key] = attrValue === \"\" && transform === Boolean ? true : attrValue;\n        }\n      }\n\n      return connect && connect(host, key, invalidate);\n    } : connect\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wcm9wZXJ0eS5qcyJdLCJuYW1lcyI6WyJjYW1lbFRvRGFzaCIsImRlZmF1bHRUcmFuc2Zvcm0iLCJ2Iiwib2JqZWN0VHJhbnNmb3JtIiwidmFsdWUiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJmcmVlemUiLCJwcm9wZXJ0eSIsImNvbm5lY3QiLCJ0eXBlIiwidHJhbnNmb3JtIiwiU3RyaW5nIiwiTnVtYmVyIiwiQm9vbGVhbiIsImdldCIsImhvc3QiLCJ2YWwiLCJzZXQiLCJvbGRWYWx1ZSIsImtleSIsImludmFsaWRhdGUiLCJhdHRyTmFtZSIsImhhc0F0dHJpYnV0ZSIsImF0dHJWYWx1ZSIsImdldEF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxTQUFTQSxXQUFULFFBQTRCLFlBQTVCOztBQUVBLElBQU1DLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBbUIsQ0FBQUMsQ0FBQztBQUFBLFNBQUlBLENBQUo7QUFBQSxDQUExQjs7QUFFQSxJQUFNQyxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLENBQUFDLEtBQUssRUFBSTtBQUMvQixNQUFJLFFBQU9BLEtBQVAsTUFBaUIsUUFBckIsRUFBK0I7QUFDN0IsVUFBTUMsU0FBUyxxREFBNkNELEtBQTdDLEdBQWY7QUFDRDs7QUFDRCxTQUFPQSxLQUFLLElBQUlFLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjSCxLQUFkLENBQWhCO0FBQ0QsQ0FMRDs7QUFPQSxlQUFlLFNBQVNJLFFBQVQsQ0FBa0JKLEtBQWxCLEVBQXlCSyxPQUF6QixFQUFrQztBQUMvQyxNQUFNQyxJQUFJLFdBQVVOLEtBQVYsQ0FBVjs7QUFDQSxNQUFJTyxTQUFTLEdBQUdWLGdCQUFoQjs7QUFFQSxVQUFRUyxJQUFSO0FBQ0UsU0FBSyxRQUFMO0FBQ0VDLE1BQUFBLFNBQVMsR0FBR0MsTUFBWjtBQUNBOztBQUNGLFNBQUssUUFBTDtBQUNFRCxNQUFBQSxTQUFTLEdBQUdFLE1BQVo7QUFDQTs7QUFDRixTQUFLLFNBQUw7QUFDRUYsTUFBQUEsU0FBUyxHQUFHRyxPQUFaO0FBQ0E7O0FBQ0YsU0FBSyxVQUFMO0FBQ0VILE1BQUFBLFNBQVMsR0FBR1AsS0FBWjtBQUNBQSxNQUFBQSxLQUFLLEdBQUdPLFNBQVMsRUFBakI7QUFDQTs7QUFDRixTQUFLLFFBQUw7QUFDRSxVQUFJUCxLQUFKLEVBQVdFLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjSCxLQUFkO0FBQ1hPLE1BQUFBLFNBQVMsR0FBR1IsZUFBWjtBQUNBOztBQUNGO0FBQ0U7QUFuQko7O0FBc0JBLFNBQU87QUFDTFksSUFBQUEsR0FBRyxFQUFFLGFBQUNDLElBQUQ7QUFBQSxVQUFPQyxHQUFQLHVFQUFhYixLQUFiO0FBQUEsYUFBdUJhLEdBQXZCO0FBQUEsS0FEQTtBQUVMQyxJQUFBQSxHQUFHLEVBQUUsYUFBQ0YsSUFBRCxFQUFPQyxHQUFQLEVBQVlFLFFBQVo7QUFBQSxhQUF5QlIsU0FBUyxDQUFDTSxHQUFELEVBQU1FLFFBQU4sQ0FBbEM7QUFBQSxLQUZBO0FBR0xWLElBQUFBLE9BQU8sRUFDTEMsSUFBSSxLQUFLLFFBQVQsSUFBcUJBLElBQUksS0FBSyxXQUE5QixHQUNJLFVBQUNNLElBQUQsRUFBT0ksR0FBUCxFQUFZQyxVQUFaLEVBQTJCO0FBQ3pCLFVBQUlMLElBQUksQ0FBQ0ksR0FBRCxDQUFKLEtBQWNoQixLQUFsQixFQUF5QjtBQUN2QixZQUFNa0IsUUFBUSxHQUFHdEIsV0FBVyxDQUFDb0IsR0FBRCxDQUE1Qjs7QUFFQSxZQUFJSixJQUFJLENBQUNPLFlBQUwsQ0FBa0JELFFBQWxCLENBQUosRUFBaUM7QUFDL0IsY0FBTUUsU0FBUyxHQUFHUixJQUFJLENBQUNTLFlBQUwsQ0FBa0JILFFBQWxCLENBQWxCO0FBQ0FOLFVBQUFBLElBQUksQ0FBQ0ksR0FBRCxDQUFKLEdBQ0VJLFNBQVMsS0FBSyxFQUFkLElBQW9CYixTQUFTLEtBQUtHLE9BQWxDLEdBQTRDLElBQTVDLEdBQW1EVSxTQURyRDtBQUVEO0FBQ0Y7O0FBRUQsYUFBT2YsT0FBTyxJQUFJQSxPQUFPLENBQUNPLElBQUQsRUFBT0ksR0FBUCxFQUFZQyxVQUFaLENBQXpCO0FBQ0QsS0FiTCxHQWNJWjtBQWxCRCxHQUFQO0FBb0JEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2FtZWxUb0Rhc2ggfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG5jb25zdCBkZWZhdWx0VHJhbnNmb3JtID0gdiA9PiB2O1xuXG5jb25zdCBvYmplY3RUcmFuc2Zvcm0gPSB2YWx1ZSA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoYEFzc2lnbmVkIHZhbHVlIG11c3QgYmUgYW4gb2JqZWN0OiAke3R5cGVvZiB2YWx1ZX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWUgJiYgT2JqZWN0LmZyZWV6ZSh2YWx1ZSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcm9wZXJ0eSh2YWx1ZSwgY29ubmVjdCkge1xuICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICBsZXQgdHJhbnNmb3JtID0gZGVmYXVsdFRyYW5zZm9ybTtcblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICB0cmFuc2Zvcm0gPSBTdHJpbmc7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICB0cmFuc2Zvcm0gPSBOdW1iZXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgdHJhbnNmb3JtID0gQm9vbGVhbjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgdHJhbnNmb3JtID0gdmFsdWU7XG4gICAgICB2YWx1ZSA9IHRyYW5zZm9ybSgpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgaWYgKHZhbHVlKSBPYmplY3QuZnJlZXplKHZhbHVlKTtcbiAgICAgIHRyYW5zZm9ybSA9IG9iamVjdFRyYW5zZm9ybTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0OiAoaG9zdCwgdmFsID0gdmFsdWUpID0+IHZhbCxcbiAgICBzZXQ6IChob3N0LCB2YWwsIG9sZFZhbHVlKSA9PiB0cmFuc2Zvcm0odmFsLCBvbGRWYWx1ZSksXG4gICAgY29ubmVjdDpcbiAgICAgIHR5cGUgIT09IFwib2JqZWN0XCIgJiYgdHlwZSAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICA/IChob3N0LCBrZXksIGludmFsaWRhdGUpID0+IHtcbiAgICAgICAgICAgIGlmIChob3N0W2tleV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGF0dHJOYW1lID0gY2FtZWxUb0Rhc2goa2V5KTtcblxuICAgICAgICAgICAgICBpZiAoaG9zdC5oYXNBdHRyaWJ1dGUoYXR0ck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0clZhbHVlID0gaG9zdC5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgICAgICAgICAgIGhvc3Rba2V5XSA9XG4gICAgICAgICAgICAgICAgICBhdHRyVmFsdWUgPT09IFwiXCIgJiYgdHJhbnNmb3JtID09PSBCb29sZWFuID8gdHJ1ZSA6IGF0dHJWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdCAmJiBjb25uZWN0KGhvc3QsIGtleSwgaW52YWxpZGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICA6IGNvbm5lY3QsXG4gIH07XG59XG4iXX0=","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport default function render(fn) {\n  var customOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (typeof fn !== \"function\") {\n    throw TypeError(\"The first argument must be a function: \".concat(_typeof(fn)));\n  }\n\n  var options = _objectSpread({\n    shadowRoot: true\n  }, customOptions);\n\n  var shadowRootInit = {\n    mode: \"open\"\n  };\n\n  if (_typeof(options.shadowRoot) === \"object\") {\n    Object.assign(shadowRootInit, options.shadowRoot);\n  }\n\n  return {\n    get: function get(host) {\n      var update = fn(host);\n      var target = host;\n\n      if (options.shadowRoot) {\n        if (!host.shadowRoot) host.attachShadow(shadowRootInit);\n        target = host.shadowRoot;\n      }\n\n      return function flush() {\n        update(host, target);\n        return target;\n      };\n    },\n    observe: function observe(host, flush) {\n      flush();\n    }\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZW5kZXIuanMiXSwibmFtZXMiOlsicmVuZGVyIiwiZm4iLCJjdXN0b21PcHRpb25zIiwiVHlwZUVycm9yIiwib3B0aW9ucyIsInNoYWRvd1Jvb3QiLCJzaGFkb3dSb290SW5pdCIsIm1vZGUiLCJPYmplY3QiLCJhc3NpZ24iLCJnZXQiLCJob3N0IiwidXBkYXRlIiwidGFyZ2V0IiwiYXR0YWNoU2hhZG93IiwiZmx1c2giLCJvYnNlcnZlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLGVBQWUsU0FBU0EsTUFBVCxDQUFnQkMsRUFBaEIsRUFBd0M7QUFBQSxNQUFwQkMsYUFBb0IsdUVBQUosRUFBSTs7QUFDckQsTUFBSSxPQUFPRCxFQUFQLEtBQWMsVUFBbEIsRUFBOEI7QUFDNUIsVUFBTUUsU0FBUywwREFBa0RGLEVBQWxELEdBQWY7QUFDRDs7QUFFRCxNQUFNRyxPQUFPO0FBQUtDLElBQUFBLFVBQVUsRUFBRTtBQUFqQixLQUEwQkgsYUFBMUIsQ0FBYjs7QUFDQSxNQUFNSSxjQUFjLEdBQUc7QUFBRUMsSUFBQUEsSUFBSSxFQUFFO0FBQVIsR0FBdkI7O0FBRUEsTUFBSSxRQUFPSCxPQUFPLENBQUNDLFVBQWYsTUFBOEIsUUFBbEMsRUFBNEM7QUFDMUNHLElBQUFBLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjSCxjQUFkLEVBQThCRixPQUFPLENBQUNDLFVBQXRDO0FBQ0Q7O0FBRUQsU0FBTztBQUNMSyxJQUFBQSxHQURLLGVBQ0RDLElBREMsRUFDSztBQUNSLFVBQU1DLE1BQU0sR0FBR1gsRUFBRSxDQUFDVSxJQUFELENBQWpCO0FBQ0EsVUFBSUUsTUFBTSxHQUFHRixJQUFiOztBQUVBLFVBQUlQLE9BQU8sQ0FBQ0MsVUFBWixFQUF3QjtBQUN0QixZQUFJLENBQUNNLElBQUksQ0FBQ04sVUFBVixFQUFzQk0sSUFBSSxDQUFDRyxZQUFMLENBQWtCUixjQUFsQjtBQUN0Qk8sUUFBQUEsTUFBTSxHQUFHRixJQUFJLENBQUNOLFVBQWQ7QUFDRDs7QUFFRCxhQUFPLFNBQVNVLEtBQVQsR0FBaUI7QUFDdEJILFFBQUFBLE1BQU0sQ0FBQ0QsSUFBRCxFQUFPRSxNQUFQLENBQU47QUFDQSxlQUFPQSxNQUFQO0FBQ0QsT0FIRDtBQUlELEtBZEk7QUFlTEcsSUFBQUEsT0FmSyxtQkFlR0wsSUFmSCxFQWVTSSxLQWZULEVBZWdCO0FBQ25CQSxNQUFBQSxLQUFLO0FBQ047QUFqQkksR0FBUDtBQW1CRCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbmRlcihmbiwgY3VzdG9tT3B0aW9ucyA9IHt9KSB7XG4gIGlmICh0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgIHRocm93IFR5cGVFcnJvcihgVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbjogJHt0eXBlb2YgZm59YCk7XG4gIH1cblxuICBjb25zdCBvcHRpb25zID0geyBzaGFkb3dSb290OiB0cnVlLCAuLi5jdXN0b21PcHRpb25zIH07XG4gIGNvbnN0IHNoYWRvd1Jvb3RJbml0ID0geyBtb2RlOiBcIm9wZW5cIiB9O1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5zaGFkb3dSb290ID09PSBcIm9iamVjdFwiKSB7XG4gICAgT2JqZWN0LmFzc2lnbihzaGFkb3dSb290SW5pdCwgb3B0aW9ucy5zaGFkb3dSb290KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0KGhvc3QpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZSA9IGZuKGhvc3QpO1xuICAgICAgbGV0IHRhcmdldCA9IGhvc3Q7XG5cbiAgICAgIGlmIChvcHRpb25zLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgaWYgKCFob3N0LnNoYWRvd1Jvb3QpIGhvc3QuYXR0YWNoU2hhZG93KHNoYWRvd1Jvb3RJbml0KTtcbiAgICAgICAgdGFyZ2V0ID0gaG9zdC5zaGFkb3dSb290O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgIHVwZGF0ZShob3N0LCB0YXJnZXQpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgfTtcbiAgICB9LFxuICAgIG9ic2VydmUoaG9zdCwgZmx1c2gpIHtcbiAgICAgIGZsdXNoKCk7XG4gICAgfSxcbiAgfTtcbn1cbiJdfQ==","var callbacks = new WeakMap();\nvar queue = new Set();\n\nfunction execute() {\n  try {\n    queue.forEach(function (target) {\n      try {\n        callbacks.get(target)();\n        queue.delete(target);\n      } catch (e) {\n        queue.delete(target);\n        throw e;\n      }\n    });\n  } catch (e) {\n    if (queue.size) execute();\n    throw e;\n  }\n}\n\nexport function dispatch(target) {\n  if (!queue.size) {\n    requestAnimationFrame(execute);\n  }\n\n  queue.add(target);\n}\nexport function subscribe(target, cb) {\n  callbacks.set(target, cb);\n  dispatch(target);\n  return function unsubscribe() {\n    queue.delete(target);\n    callbacks.delete(target);\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbWl0dGVyLmpzIl0sIm5hbWVzIjpbImNhbGxiYWNrcyIsIldlYWtNYXAiLCJxdWV1ZSIsIlNldCIsImV4ZWN1dGUiLCJmb3JFYWNoIiwidGFyZ2V0IiwiZ2V0IiwiZGVsZXRlIiwiZSIsInNpemUiLCJkaXNwYXRjaCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImFkZCIsInN1YnNjcmliZSIsImNiIiwic2V0IiwidW5zdWJzY3JpYmUiXSwibWFwcGluZ3MiOiJBQUFBLElBQU1BLFNBQVMsR0FBRyxJQUFJQyxPQUFKLEVBQWxCO0FBQ0EsSUFBTUMsS0FBSyxHQUFHLElBQUlDLEdBQUosRUFBZDs7QUFFQSxTQUFTQyxPQUFULEdBQW1CO0FBQ2pCLE1BQUk7QUFDRkYsSUFBQUEsS0FBSyxDQUFDRyxPQUFOLENBQWMsVUFBQUMsTUFBTSxFQUFJO0FBQ3RCLFVBQUk7QUFDRk4sUUFBQUEsU0FBUyxDQUFDTyxHQUFWLENBQWNELE1BQWQ7QUFDQUosUUFBQUEsS0FBSyxDQUFDTSxNQUFOLENBQWFGLE1BQWI7QUFDRCxPQUhELENBR0UsT0FBT0csQ0FBUCxFQUFVO0FBQ1ZQLFFBQUFBLEtBQUssQ0FBQ00sTUFBTixDQUFhRixNQUFiO0FBQ0EsY0FBTUcsQ0FBTjtBQUNEO0FBQ0YsS0FSRDtBQVNELEdBVkQsQ0FVRSxPQUFPQSxDQUFQLEVBQVU7QUFDVixRQUFJUCxLQUFLLENBQUNRLElBQVYsRUFBZ0JOLE9BQU87QUFDdkIsVUFBTUssQ0FBTjtBQUNEO0FBQ0Y7O0FBRUQsT0FBTyxTQUFTRSxRQUFULENBQWtCTCxNQUFsQixFQUEwQjtBQUMvQixNQUFJLENBQUNKLEtBQUssQ0FBQ1EsSUFBWCxFQUFpQjtBQUNmRSxJQUFBQSxxQkFBcUIsQ0FBQ1IsT0FBRCxDQUFyQjtBQUNEOztBQUNERixFQUFBQSxLQUFLLENBQUNXLEdBQU4sQ0FBVVAsTUFBVjtBQUNEO0FBRUQsT0FBTyxTQUFTUSxTQUFULENBQW1CUixNQUFuQixFQUEyQlMsRUFBM0IsRUFBK0I7QUFDcENmLEVBQUFBLFNBQVMsQ0FBQ2dCLEdBQVYsQ0FBY1YsTUFBZCxFQUFzQlMsRUFBdEI7QUFDQUosRUFBQUEsUUFBUSxDQUFDTCxNQUFELENBQVI7QUFFQSxTQUFPLFNBQVNXLFdBQVQsR0FBdUI7QUFDNUJmLElBQUFBLEtBQUssQ0FBQ00sTUFBTixDQUFhRixNQUFiO0FBQ0FOLElBQUFBLFNBQVMsQ0FBQ1EsTUFBVixDQUFpQkYsTUFBakI7QUFDRCxHQUhEO0FBSUQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjYWxsYmFja3MgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcXVldWUgPSBuZXcgU2V0KCk7XG5cbmZ1bmN0aW9uIGV4ZWN1dGUoKSB7XG4gIHRyeSB7XG4gICAgcXVldWUuZm9yRWFjaCh0YXJnZXQgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2FsbGJhY2tzLmdldCh0YXJnZXQpKCk7XG4gICAgICAgIHF1ZXVlLmRlbGV0ZSh0YXJnZXQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBxdWV1ZS5kZWxldGUodGFyZ2V0KTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChxdWV1ZS5zaXplKSBleGVjdXRlKCk7XG4gICAgdGhyb3cgZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGF0Y2godGFyZ2V0KSB7XG4gIGlmICghcXVldWUuc2l6ZSkge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShleGVjdXRlKTtcbiAgfVxuICBxdWV1ZS5hZGQodGFyZ2V0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmliZSh0YXJnZXQsIGNiKSB7XG4gIGNhbGxiYWNrcy5zZXQodGFyZ2V0LCBjYik7XG4gIGRpc3BhdGNoKHRhcmdldCk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgIHF1ZXVlLmRlbGV0ZSh0YXJnZXQpO1xuICAgIGNhbGxiYWNrcy5kZWxldGUodGFyZ2V0KTtcbiAgfTtcbn1cbiJdfQ==","import * as emitter from \"./emitter.js\";\nvar entries = new WeakMap();\nexport function getEntry(target, key) {\n  var targetMap = entries.get(target);\n\n  if (!targetMap) {\n    targetMap = new Map();\n    entries.set(target, targetMap);\n  }\n\n  var entry = targetMap.get(key);\n\n  if (!entry) {\n    entry = {\n      target: target,\n      key: key,\n      value: undefined,\n      contexts: undefined,\n      deps: undefined,\n      state: 0,\n      checksum: 0,\n      observed: false\n    };\n    targetMap.set(key, entry);\n  }\n\n  return entry;\n}\nexport function getEntries(target) {\n  var result = [];\n  var targetMap = entries.get(target);\n\n  if (targetMap) {\n    targetMap.forEach(function (entry) {\n      result.push(entry);\n    });\n  }\n\n  return result;\n}\n\nfunction calculateChecksum(entry) {\n  var checksum = entry.state;\n\n  if (entry.deps) {\n    entry.deps.forEach(function (depEntry) {\n      checksum += depEntry.state;\n    });\n  }\n\n  return checksum;\n}\n\nfunction dispatchDeep(entry) {\n  if (entry.observed) emitter.dispatch(entry);\n  if (entry.contexts) entry.contexts.forEach(dispatchDeep);\n}\n\nfunction restoreDeepDeps(entry, deps) {\n  if (deps) {\n    deps.forEach(function (depEntry) {\n      entry.deps.add(depEntry);\n\n      if (entry.observed) {\n        /* istanbul ignore if */\n        if (!depEntry.contexts) depEntry.contexts = new Set();\n        depEntry.contexts.add(entry);\n      }\n\n      restoreDeepDeps(entry, depEntry.deps);\n    });\n  }\n}\n\nvar contextStack = new Set();\nexport function get(target, key, getter, validate) {\n  var entry = getEntry(target, key);\n\n  if (contextStack.size && contextStack.has(entry)) {\n    throw Error(\"Circular get invocation is forbidden: '\".concat(key, \"'\"));\n  }\n\n  contextStack.forEach(function (context) {\n    if (!context.deps) context.deps = new Set();\n    context.deps.add(entry);\n\n    if (context.observed) {\n      if (!entry.contexts) entry.contexts = new Set();\n      entry.contexts.add(context);\n    }\n  });\n\n  if ((validate && validate(entry.value) || !validate) && entry.checksum && entry.checksum === calculateChecksum(entry)) {\n    return entry.value;\n  }\n\n  try {\n    contextStack.add(entry);\n\n    if (entry.observed && entry.deps && entry.deps.size) {\n      entry.deps.forEach(function (depEntry) {\n        /* istanbul ignore else */\n        if (depEntry.contexts) depEntry.contexts.delete(entry);\n      });\n    }\n\n    entry.deps = undefined;\n    var nextValue = getter(target, entry.value);\n\n    if (entry.deps) {\n      entry.deps.forEach(function (depEntry) {\n        restoreDeepDeps(entry, depEntry.deps);\n      });\n    }\n\n    if (nextValue !== entry.value) {\n      entry.state += 1;\n      entry.value = nextValue;\n      dispatchDeep(entry);\n    }\n\n    entry.checksum = calculateChecksum(entry);\n    contextStack.delete(entry);\n  } catch (e) {\n    entry.checksum = 0;\n    contextStack.delete(entry);\n    contextStack.forEach(function (context) {\n      context.deps.delete(entry);\n      if (context.observed) entry.contexts.delete(context);\n    });\n    throw e;\n  }\n\n  return entry.value;\n}\nexport function set(target, key, setter, value) {\n  var entry = getEntry(target, key);\n  var newValue = setter(target, value, entry.value);\n\n  if (newValue !== entry.value) {\n    entry.checksum = 0;\n    entry.state += 1;\n    entry.value = newValue;\n    dispatchDeep(entry);\n  }\n}\nvar gcList = new Set();\n\nfunction deleteEntry(entry) {\n  if (!gcList.size) {\n    requestAnimationFrame(function () {\n      gcList.forEach(function (e) {\n        if (!e.contexts || e.contexts && e.contexts.size === 0) {\n          var targetMap = entries.get(e.target);\n          targetMap.delete(e.key);\n        }\n      });\n      gcList.clear();\n    });\n  }\n\n  gcList.add(entry);\n}\n\nfunction invalidateEntry(entry, clearValue, deleteValue) {\n  entry.checksum = 0;\n  entry.state += 1;\n  dispatchDeep(entry);\n  if (deleteValue) deleteEntry(entry);\n\n  if (clearValue) {\n    entry.value = undefined;\n  }\n}\n\nexport function invalidate(target, key, clearValue, deleteValue) {\n  if (contextStack.size) {\n    throw Error(\"Invalidating property in chain of get calls is forbidden: '\".concat(key, \"'\"));\n  }\n\n  var entry = getEntry(target, key);\n  invalidateEntry(entry, clearValue, deleteValue);\n}\nexport function invalidateAll(target, clearValue, deleteValue) {\n  if (contextStack.size) {\n    throw Error(\"Invalidating all properties in chain of get calls is forbidden\");\n  }\n\n  var targetMap = entries.get(target);\n\n  if (targetMap) {\n    targetMap.forEach(function (entry) {\n      invalidateEntry(entry, clearValue, deleteValue);\n    });\n  }\n}\nexport function observe(target, key, getter, fn) {\n  var entry = getEntry(target, key);\n  entry.observed = true;\n  var lastValue;\n  var unsubscribe = emitter.subscribe(entry, function () {\n    var value = get(target, key, getter);\n\n    if (value !== lastValue) {\n      fn(target, value, lastValue);\n      lastValue = value;\n    }\n  });\n\n  if (entry.deps) {\n    entry.deps.forEach(function (depEntry) {\n      /* istanbul ignore else */\n      if (!depEntry.contexts) depEntry.contexts = new Set();\n      depEntry.contexts.add(entry);\n    });\n  }\n\n  return function unobserve() {\n    unsubscribe();\n    entry.observed = false;\n\n    if (entry.deps && entry.deps.size) {\n      entry.deps.forEach(function (depEntry) {\n        /* istanbul ignore else */\n        if (depEntry.contexts) depEntry.contexts.delete(entry);\n      });\n    }\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jYWNoZS5qcyJdLCJuYW1lcyI6WyJlbWl0dGVyIiwiZW50cmllcyIsIldlYWtNYXAiLCJnZXRFbnRyeSIsInRhcmdldCIsImtleSIsInRhcmdldE1hcCIsImdldCIsIk1hcCIsInNldCIsImVudHJ5IiwidmFsdWUiLCJ1bmRlZmluZWQiLCJjb250ZXh0cyIsImRlcHMiLCJzdGF0ZSIsImNoZWNrc3VtIiwib2JzZXJ2ZWQiLCJnZXRFbnRyaWVzIiwicmVzdWx0IiwiZm9yRWFjaCIsInB1c2giLCJjYWxjdWxhdGVDaGVja3N1bSIsImRlcEVudHJ5IiwiZGlzcGF0Y2hEZWVwIiwiZGlzcGF0Y2giLCJyZXN0b3JlRGVlcERlcHMiLCJhZGQiLCJTZXQiLCJjb250ZXh0U3RhY2siLCJnZXR0ZXIiLCJ2YWxpZGF0ZSIsInNpemUiLCJoYXMiLCJFcnJvciIsImNvbnRleHQiLCJkZWxldGUiLCJuZXh0VmFsdWUiLCJlIiwic2V0dGVyIiwibmV3VmFsdWUiLCJnY0xpc3QiLCJkZWxldGVFbnRyeSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNsZWFyIiwiaW52YWxpZGF0ZUVudHJ5IiwiY2xlYXJWYWx1ZSIsImRlbGV0ZVZhbHVlIiwiaW52YWxpZGF0ZSIsImludmFsaWRhdGVBbGwiLCJvYnNlcnZlIiwiZm4iLCJsYXN0VmFsdWUiLCJ1bnN1YnNjcmliZSIsInN1YnNjcmliZSIsInVub2JzZXJ2ZSJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLQSxPQUFaLE1BQXlCLGNBQXpCO0FBRUEsSUFBTUMsT0FBTyxHQUFHLElBQUlDLE9BQUosRUFBaEI7QUFDQSxPQUFPLFNBQVNDLFFBQVQsQ0FBa0JDLE1BQWxCLEVBQTBCQyxHQUExQixFQUErQjtBQUNwQyxNQUFJQyxTQUFTLEdBQUdMLE9BQU8sQ0FBQ00sR0FBUixDQUFZSCxNQUFaLENBQWhCOztBQUNBLE1BQUksQ0FBQ0UsU0FBTCxFQUFnQjtBQUNkQSxJQUFBQSxTQUFTLEdBQUcsSUFBSUUsR0FBSixF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QXRCO0FBQ0QsS0FKRDtBQUtEOztBQUVELFNBQU8sU0FBUzZDLFNBQVQsR0FBcUI7QUFDMUJGLElBQUFBLFdBQVc7QUFDWDNDLElBQUFBLEtBQUssQ0FBQ08sUUFBTixHQUFpQixLQUFqQjs7QUFDQSxRQUFJUCxLQUFLLENBQUNJLElBQU4sSUFBY0osS0FBSyxDQUFDSSxJQUFOLENBQVdrQixJQUE3QixFQUFtQztBQUNqQ3RCLE1BQUFBLEtBQUssQ0FBQ0ksSUFBTixDQUFXTSxPQUFYLENBQW1CLFVBQUFHLFFBQVEsRUFBSTtBQUM3QjtBQUNBLFlBQUlBLFFBQVEsQ0FBQ1YsUUFBYixFQUF1QlUsUUFBUSxDQUFDVixRQUFULENBQWtCdUIsTUFBbEIsQ0FBeUIxQixLQUF6QjtBQUN4QixPQUhEO0FBSUQ7QUFDRixHQVREO0FBVUQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBlbWl0dGVyIGZyb20gXCIuL2VtaXR0ZXIuanNcIjtcblxuY29uc3QgZW50cmllcyA9IG5ldyBXZWFrTWFwKCk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0RW50cnkodGFyZ2V0LCBrZXkpIHtcbiAgbGV0IHRhcmdldE1hcCA9IGVudHJpZXMuZ2V0KHRhcmdldCk7XG4gIGlmICghdGFyZ2V0TWFwKSB7XG4gICAgdGFyZ2V0TWFwID0gbmV3IE1hcCgpO1xuICAgIGVudHJpZXMuc2V0KHRhcmdldCwgdGFyZ2V0TWFwKTtcbiAgfVxuXG4gIGxldCBlbnRyeSA9IHRhcmdldE1hcC5nZXQoa2V5KTtcblxuICBpZiAoIWVudHJ5KSB7XG4gICAgZW50cnkgPSB7XG4gICAgICB0YXJnZXQsXG4gICAgICBrZXksXG4gICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgY29udGV4dHM6IHVuZGVmaW5lZCxcbiAgICAgIGRlcHM6IHVuZGVmaW5lZCxcbiAgICAgIHN0YXRlOiAwLFxuICAgICAgY2hlY2tzdW06IDAsXG4gICAgICBvYnNlcnZlZDogZmFsc2UsXG4gICAgfTtcbiAgICB0YXJnZXRNYXAuc2V0KGtleSwgZW50cnkpO1xuICB9XG5cbiAgcmV0dXJuIGVudHJ5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW50cmllcyh0YXJnZXQpIHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGNvbnN0IHRhcmdldE1hcCA9IGVudHJpZXMuZ2V0KHRhcmdldCk7XG4gIGlmICh0YXJnZXRNYXApIHtcbiAgICB0YXJnZXRNYXAuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICByZXN1bHQucHVzaChlbnRyeSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlQ2hlY2tzdW0oZW50cnkpIHtcbiAgbGV0IGNoZWNrc3VtID0gZW50cnkuc3RhdGU7XG4gIGlmIChlbnRyeS5kZXBzKSB7XG4gICAgZW50cnkuZGVwcy5mb3JFYWNoKGRlcEVudHJ5ID0+IHtcbiAgICAgIGNoZWNrc3VtICs9IGRlcEVudHJ5LnN0YXRlO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGNoZWNrc3VtO1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaERlZXAoZW50cnkpIHtcbiAgaWYgKGVudHJ5Lm9ic2VydmVkKSBlbWl0dGVyLmRpc3BhdGNoKGVudHJ5KTtcbiAgaWYgKGVudHJ5LmNvbnRleHRzKSBlbnRyeS5jb250ZXh0cy5mb3JFYWNoKGRpc3BhdGNoRGVlcCk7XG59XG5cbmZ1bmN0aW9uIHJlc3RvcmVEZWVwRGVwcyhlbnRyeSwgZGVwcykge1xuICBpZiAoZGVwcykge1xuICAgIGRlcHMuZm9yRWFjaChkZXBFbnRyeSA9PiB7XG4gICAgICBlbnRyeS5kZXBzLmFkZChkZXBFbnRyeSk7XG5cbiAgICAgIGlmIChlbnRyeS5vYnNlcnZlZCkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCFkZXBFbnRyeS5jb250ZXh0cykgZGVwRW50cnkuY29udGV4dHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGRlcEVudHJ5LmNvbnRleHRzLmFkZChlbnRyeSk7XG4gICAgICB9XG5cbiAgICAgIHJlc3RvcmVEZWVwRGVwcyhlbnRyeSwgZGVwRW50cnkuZGVwcyk7XG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgY29udGV4dFN0YWNrID0gbmV3IFNldCgpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldCh0YXJnZXQsIGtleSwgZ2V0dGVyLCB2YWxpZGF0ZSkge1xuICBjb25zdCBlbnRyeSA9IGdldEVudHJ5KHRhcmdldCwga2V5KTtcblxuICBpZiAoY29udGV4dFN0YWNrLnNpemUgJiYgY29udGV4dFN0YWNrLmhhcyhlbnRyeSkpIHtcbiAgICB0aHJvdyBFcnJvcihgQ2lyY3VsYXIgZ2V0IGludm9jYXRpb24gaXMgZm9yYmlkZGVuOiAnJHtrZXl9J2ApO1xuICB9XG5cbiAgY29udGV4dFN0YWNrLmZvckVhY2goY29udGV4dCA9PiB7XG4gICAgaWYgKCFjb250ZXh0LmRlcHMpIGNvbnRleHQuZGVwcyA9IG5ldyBTZXQoKTtcbiAgICBjb250ZXh0LmRlcHMuYWRkKGVudHJ5KTtcblxuICAgIGlmIChjb250ZXh0Lm9ic2VydmVkKSB7XG4gICAgICBpZiAoIWVudHJ5LmNvbnRleHRzKSBlbnRyeS5jb250ZXh0cyA9IG5ldyBTZXQoKTtcbiAgICAgIGVudHJ5LmNvbnRleHRzLmFkZChjb250ZXh0KTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmIChcbiAgICAoKHZhbGlkYXRlICYmIHZhbGlkYXRlKGVudHJ5LnZhbHVlKSkgfHwgIXZhbGlkYXRlKSAmJlxuICAgIGVudHJ5LmNoZWNrc3VtICYmXG4gICAgZW50cnkuY2hlY2tzdW0gPT09IGNhbGN1bGF0ZUNoZWNrc3VtKGVudHJ5KVxuICApIHtcbiAgICByZXR1cm4gZW50cnkudmFsdWU7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnRleHRTdGFjay5hZGQoZW50cnkpO1xuXG4gICAgaWYgKGVudHJ5Lm9ic2VydmVkICYmIGVudHJ5LmRlcHMgJiYgZW50cnkuZGVwcy5zaXplKSB7XG4gICAgICBlbnRyeS5kZXBzLmZvckVhY2goZGVwRW50cnkgPT4ge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICBpZiAoZGVwRW50cnkuY29udGV4dHMpIGRlcEVudHJ5LmNvbnRleHRzLmRlbGV0ZShlbnRyeSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBlbnRyeS5kZXBzID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IG5leHRWYWx1ZSA9IGdldHRlcih0YXJnZXQsIGVudHJ5LnZhbHVlKTtcblxuICAgIGlmIChlbnRyeS5kZXBzKSB7XG4gICAgICBlbnRyeS5kZXBzLmZvckVhY2goZGVwRW50cnkgPT4ge1xuICAgICAgICByZXN0b3JlRGVlcERlcHMoZW50cnksIGRlcEVudHJ5LmRlcHMpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG5leHRWYWx1ZSAhPT0gZW50cnkudmFsdWUpIHtcbiAgICAgIGVudHJ5LnN0YXRlICs9IDE7XG4gICAgICBlbnRyeS52YWx1ZSA9IG5leHRWYWx1ZTtcblxuICAgICAgZGlzcGF0Y2hEZWVwKGVudHJ5KTtcbiAgICB9XG5cbiAgICBlbnRyeS5jaGVja3N1bSA9IGNhbGN1bGF0ZUNoZWNrc3VtKGVudHJ5KTtcbiAgICBjb250ZXh0U3RhY2suZGVsZXRlKGVudHJ5KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGVudHJ5LmNoZWNrc3VtID0gMDtcblxuICAgIGNvbnRleHRTdGFjay5kZWxldGUoZW50cnkpO1xuICAgIGNvbnRleHRTdGFjay5mb3JFYWNoKGNvbnRleHQgPT4ge1xuICAgICAgY29udGV4dC5kZXBzLmRlbGV0ZShlbnRyeSk7XG4gICAgICBpZiAoY29udGV4dC5vYnNlcnZlZCkgZW50cnkuY29udGV4dHMuZGVsZXRlKGNvbnRleHQpO1xuICAgIH0pO1xuXG4gICAgdGhyb3cgZTtcbiAgfVxuXG4gIHJldHVybiBlbnRyeS52YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldCh0YXJnZXQsIGtleSwgc2V0dGVyLCB2YWx1ZSkge1xuICBjb25zdCBlbnRyeSA9IGdldEVudHJ5KHRhcmdldCwga2V5KTtcbiAgY29uc3QgbmV3VmFsdWUgPSBzZXR0ZXIodGFyZ2V0LCB2YWx1ZSwgZW50cnkudmFsdWUpO1xuXG4gIGlmIChuZXdWYWx1ZSAhPT0gZW50cnkudmFsdWUpIHtcbiAgICBlbnRyeS5jaGVja3N1bSA9IDA7XG4gICAgZW50cnkuc3RhdGUgKz0gMTtcbiAgICBlbnRyeS52YWx1ZSA9IG5ld1ZhbHVlO1xuXG4gICAgZGlzcGF0Y2hEZWVwKGVudHJ5KTtcbiAgfVxufVxuXG5jb25zdCBnY0xpc3QgPSBuZXcgU2V0KCk7XG5mdW5jdGlvbiBkZWxldGVFbnRyeShlbnRyeSkge1xuICBpZiAoIWdjTGlzdC5zaXplKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGdjTGlzdC5mb3JFYWNoKGUgPT4ge1xuICAgICAgICBpZiAoIWUuY29udGV4dHMgfHwgKGUuY29udGV4dHMgJiYgZS5jb250ZXh0cy5zaXplID09PSAwKSkge1xuICAgICAgICAgIGNvbnN0IHRhcmdldE1hcCA9IGVudHJpZXMuZ2V0KGUudGFyZ2V0KTtcbiAgICAgICAgICB0YXJnZXRNYXAuZGVsZXRlKGUua2V5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBnY0xpc3QuY2xlYXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdjTGlzdC5hZGQoZW50cnkpO1xufVxuXG5mdW5jdGlvbiBpbnZhbGlkYXRlRW50cnkoZW50cnksIGNsZWFyVmFsdWUsIGRlbGV0ZVZhbHVlKSB7XG4gIGVudHJ5LmNoZWNrc3VtID0gMDtcbiAgZW50cnkuc3RhdGUgKz0gMTtcblxuICBkaXNwYXRjaERlZXAoZW50cnkpO1xuICBpZiAoZGVsZXRlVmFsdWUpIGRlbGV0ZUVudHJ5KGVudHJ5KTtcblxuICBpZiAoY2xlYXJWYWx1ZSkge1xuICAgIGVudHJ5LnZhbHVlID0gdW5kZWZpbmVkO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZhbGlkYXRlKHRhcmdldCwga2V5LCBjbGVhclZhbHVlLCBkZWxldGVWYWx1ZSkge1xuICBpZiAoY29udGV4dFN0YWNrLnNpemUpIHtcbiAgICB0aHJvdyBFcnJvcihcbiAgICAgIGBJbnZhbGlkYXRpbmcgcHJvcGVydHkgaW4gY2hhaW4gb2YgZ2V0IGNhbGxzIGlzIGZvcmJpZGRlbjogJyR7a2V5fSdgLFxuICAgICk7XG4gIH1cblxuICBjb25zdCBlbnRyeSA9IGdldEVudHJ5KHRhcmdldCwga2V5KTtcbiAgaW52YWxpZGF0ZUVudHJ5KGVudHJ5LCBjbGVhclZhbHVlLCBkZWxldGVWYWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZhbGlkYXRlQWxsKHRhcmdldCwgY2xlYXJWYWx1ZSwgZGVsZXRlVmFsdWUpIHtcbiAgaWYgKGNvbnRleHRTdGFjay5zaXplKSB7XG4gICAgdGhyb3cgRXJyb3IoXG4gICAgICBcIkludmFsaWRhdGluZyBhbGwgcHJvcGVydGllcyBpbiBjaGFpbiBvZiBnZXQgY2FsbHMgaXMgZm9yYmlkZGVuXCIsXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHRhcmdldE1hcCA9IGVudHJpZXMuZ2V0KHRhcmdldCk7XG4gIGlmICh0YXJnZXRNYXApIHtcbiAgICB0YXJnZXRNYXAuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICBpbnZhbGlkYXRlRW50cnkoZW50cnksIGNsZWFyVmFsdWUsIGRlbGV0ZVZhbHVlKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZSh0YXJnZXQsIGtleSwgZ2V0dGVyLCBmbikge1xuICBjb25zdCBlbnRyeSA9IGdldEVudHJ5KHRhcmdldCwga2V5KTtcbiAgZW50cnkub2JzZXJ2ZWQgPSB0cnVlO1xuXG4gIGxldCBsYXN0VmFsdWU7XG4gIGNvbnN0IHVuc3Vic2NyaWJlID0gZW1pdHRlci5zdWJzY3JpYmUoZW50cnksICgpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IGdldCh0YXJnZXQsIGtleSwgZ2V0dGVyKTtcbiAgICBpZiAodmFsdWUgIT09IGxhc3RWYWx1ZSkge1xuICAgICAgZm4odGFyZ2V0LCB2YWx1ZSwgbGFzdFZhbHVlKTtcbiAgICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKGVudHJ5LmRlcHMpIHtcbiAgICBlbnRyeS5kZXBzLmZvckVhY2goZGVwRW50cnkgPT4ge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgIGlmICghZGVwRW50cnkuY29udGV4dHMpIGRlcEVudHJ5LmNvbnRleHRzID0gbmV3IFNldCgpO1xuICAgICAgZGVwRW50cnkuY29udGV4dHMuYWRkKGVudHJ5KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiB1bm9ic2VydmUoKSB7XG4gICAgdW5zdWJzY3JpYmUoKTtcbiAgICBlbnRyeS5vYnNlcnZlZCA9IGZhbHNlO1xuICAgIGlmIChlbnRyeS5kZXBzICYmIGVudHJ5LmRlcHMuc2l6ZSkge1xuICAgICAgZW50cnkuZGVwcy5mb3JFYWNoKGRlcEVudHJ5ID0+IHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKGRlcEVudHJ5LmNvbnRleHRzKSBkZXBFbnRyeS5jb250ZXh0cy5kZWxldGUoZW50cnkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuIl19","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport property from \"./property.js\";\nimport render from \"./render.js\";\nimport * as cache from \"./cache.js\";\nimport { pascalToDash, deferred } from \"./utils.js\";\n/* istanbul ignore next */\n\ntry {\n  process.env.NODE_ENV;\n} catch (e) {\n  var process = {\n    env: {\n      NODE_ENV: 'production'\n    }\n  };\n} // eslint-disable-line\n\n\nvar defaultMethod = function defaultMethod(host, value) {\n  return value;\n};\n\nvar callbacksMap = new WeakMap();\nvar propsMap = new WeakMap();\n\nfunction compile(Hybrid, descriptors) {\n  Hybrid.hybrids = descriptors;\n  var callbacks = [];\n  var props = Object.keys(descriptors);\n  callbacksMap.set(Hybrid, callbacks);\n  propsMap.set(Hybrid, props);\n  props.forEach(function (key) {\n    var desc = descriptors[key];\n\n    var type = _typeof(desc);\n\n    var config;\n\n    if (type === \"function\") {\n      config = key === \"render\" ? render(desc) : {\n        get: desc\n      };\n    } else if (type !== \"object\" || desc === null || Array.isArray(desc)) {\n      config = property(desc);\n    } else {\n      config = {\n        get: desc.get || defaultMethod,\n        set: desc.set || !desc.get && defaultMethod || undefined,\n        connect: desc.connect,\n        observe: desc.observe\n      };\n    }\n\n    Object.defineProperty(Hybrid.prototype, key, {\n      get: function get() {\n        return cache.get(this, key, config.get);\n      },\n      set: config.set && function set(newValue) {\n        cache.set(this, key, config.set, newValue);\n      },\n      enumerable: true,\n      configurable: process.env.NODE_ENV !== \"production\"\n    });\n\n    if (config.observe) {\n      callbacks.unshift(function (host) {\n        return cache.observe(host, key, config.get, config.observe);\n      });\n    }\n\n    if (config.connect) {\n      callbacks.push(function (host) {\n        return config.connect(host, key, function () {\n          cache.invalidate(host, key);\n        });\n      });\n    }\n  });\n}\n\nvar update;\n/* istanbul ignore else */\n\nif (process.env.NODE_ENV !== \"production\") {\n  var walkInShadow = function walkInShadow(node, fn) {\n    fn(node);\n    Array.from(node.children).forEach(function (el) {\n      return walkInShadow(el, fn);\n    });\n\n    if (node.shadowRoot) {\n      Array.from(node.shadowRoot.children).forEach(function (el) {\n        return walkInShadow(el, fn);\n      });\n    }\n  };\n\n  var updateQueue = new Map();\n\n  update = function update(Hybrid, lastHybrids) {\n    if (!updateQueue.size) {\n      deferred.then(function () {\n        walkInShadow(document.body, function (node) {\n          if (updateQueue.has(node.constructor)) {\n            var hybrids = updateQueue.get(node.constructor);\n            node.disconnectedCallback();\n            Object.keys(node.constructor.hybrids).forEach(function (key) {\n              cache.invalidate(node, key, node.constructor.hybrids[key] !== hybrids[key]);\n            });\n            node.connectedCallback();\n          }\n        });\n        updateQueue.clear();\n      });\n    }\n\n    updateQueue.set(Hybrid, lastHybrids);\n  };\n}\n\nvar disconnects = new WeakMap();\n\nfunction defineElement(tagName, hybridsOrConstructor) {\n  var type = _typeof(hybridsOrConstructor);\n\n  if (type !== \"object\" && type !== \"function\") {\n    throw TypeError(\"Second argument must be an object or a function: \".concat(type));\n  }\n\n  if (tagName !== null) {\n    var CustomElement = window.customElements.get(tagName);\n\n    if (type === \"function\") {\n      if (CustomElement !== hybridsOrConstructor) {\n        return window.customElements.define(tagName, hybridsOrConstructor);\n      }\n\n      return CustomElement;\n    }\n\n    if (CustomElement) {\n      if (CustomElement.hybrids === hybridsOrConstructor) {\n        return CustomElement;\n      }\n\n      if (process.env.NODE_ENV !== \"production\" && CustomElement.hybrids) {\n        Object.keys(CustomElement.hybrids).forEach(function (key) {\n          delete CustomElement.prototype[key];\n        });\n        var lastHybrids = CustomElement.hybrids;\n        compile(CustomElement, hybridsOrConstructor);\n        update(CustomElement, lastHybrids);\n        return CustomElement;\n      }\n\n      throw Error(\"Element '\".concat(tagName, \"' already defined\"));\n    }\n  }\n\n  var Hybrid = /*#__PURE__*/function (_HTMLElement) {\n    _inherits(Hybrid, _HTMLElement);\n\n    var _super = _createSuper(Hybrid);\n\n    function Hybrid() {\n      var _this;\n\n      _classCallCheck(this, Hybrid);\n\n      _this = _super.call(this);\n      var props = propsMap.get(Hybrid);\n\n      for (var index = 0; index < props.length; index += 1) {\n        var key = props[index];\n\n        if (Object.prototype.hasOwnProperty.call(_assertThisInitialized(_this), key)) {\n          var value = _this[key];\n          delete _this[key];\n          _this[key] = value;\n        }\n      }\n\n      return _this;\n    }\n\n    _createClass(Hybrid, [{\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        var callbacks = callbacksMap.get(Hybrid);\n        var list = [];\n\n        for (var index = 0; index < callbacks.length; index += 1) {\n          var cb = callbacks[index](this);\n          if (cb) list.push(cb);\n        }\n\n        disconnects.set(this, list);\n      }\n    }, {\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        var list = disconnects.get(this);\n\n        for (var index = 0; index < list.length; index += 1) {\n          list[index]();\n        }\n      }\n    }]);\n\n    return Hybrid;\n  }( /*#__PURE__*/_wrapNativeSuper(HTMLElement));\n\n  compile(Hybrid, hybridsOrConstructor);\n\n  if (tagName !== null) {\n    Object.defineProperty(Hybrid, \"name\", {\n      get: function get() {\n        return tagName;\n      }\n    });\n    customElements.define(tagName, Hybrid);\n  }\n\n  return Hybrid;\n}\n\nfunction defineMap(elements) {\n  return Object.keys(elements).reduce(function (acc, key) {\n    var tagName = pascalToDash(key);\n    acc[key] = defineElement(tagName, elements[key]);\n    return acc;\n  }, {});\n}\n\nexport default function define() {\n  if (_typeof(arguments.length <= 0 ? undefined : arguments[0]) === \"object\" && (arguments.length <= 0 ? undefined : arguments[0]) !== null) {\n    return defineMap(arguments.length <= 0 ? undefined : arguments[0]);\n  }\n\n  return defineElement.apply(void 0, arguments);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9kZWZpbmUuanMiXSwibmFtZXMiOlsicHJvcGVydHkiLCJyZW5kZXIiLCJjYWNoZSIsInBhc2NhbFRvRGFzaCIsImRlZmVycmVkIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiZSIsImRlZmF1bHRNZXRob2QiLCJob3N0IiwidmFsdWUiLCJjYWxsYmFja3NNYXAiLCJXZWFrTWFwIiwicHJvcHNNYXAiLCJjb21waWxlIiwiSHlicmlkIiwiZGVzY3JpcHRvcnMiLCJoeWJyaWRzIiwiY2FsbGJhY2tzIiwicHJvcHMiLCJPYmplY3QiLCJrZXlzIiwic2V0IiwiZm9yRWFjaCIsImtleSIsImRlc2MiLCJ0eXBlIiwiY29uZmlnIiwiZ2V0IiwiQXJyYXkiLCJpc0FycmF5IiwidW5kZWZpbmVkIiwiY29ubmVjdCIsIm9ic2VydmUiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvdHlwZSIsIm5ld1ZhbHVlIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsInVuc2hpZnQiLCJwdXNoIiwiaW52YWxpZGF0ZSIsInVwZGF0ZSIsIndhbGtJblNoYWRvdyIsIm5vZGUiLCJmbiIsImZyb20iLCJjaGlsZHJlbiIsImVsIiwic2hhZG93Um9vdCIsInVwZGF0ZVF1ZXVlIiwiTWFwIiwibGFzdEh5YnJpZHMiLCJzaXplIiwidGhlbiIsImRvY3VtZW50IiwiYm9keSIsImhhcyIsImNvbnN0cnVjdG9yIiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJjb25uZWN0ZWRDYWxsYmFjayIsImNsZWFyIiwiZGlzY29ubmVjdHMiLCJkZWZpbmVFbGVtZW50IiwidGFnTmFtZSIsImh5YnJpZHNPckNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiQ3VzdG9tRWxlbWVudCIsIndpbmRvdyIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiRXJyb3IiLCJpbmRleCIsImxlbmd0aCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImxpc3QiLCJjYiIsIkhUTUxFbGVtZW50IiwiZGVmaW5l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Q0MsSUFBUCxDQUFZMkQsUUFBWixFQUFzQkMsTUFBdEIsQ0FBNkIsVUFBQ0MsR0FBRCxFQUFNMUQsR0FBTixFQUFjO0FBQ2hELFFBQU13QyxPQUFPLEdBQUc5RCxZQUFZLENBQUNzQixHQUFELENBQTVCO0FBQ0EwRCxJQUFBQSxHQUFHLENBQUMxRCxHQUFELENBQUgsR0FBV3VDLGFBQWEsQ0FBQ0MsT0FBRCxFQUFVZ0IsUUFBUSxDQUFDeEQsR0FBRCxDQUFsQixDQUF4QjtBQUVBLFdBQU8wRCxHQUFQO0FBQ0QsR0FMTSxFQUtKLEVBTEksQ0FBUDtBQU1EOztBQUVELGVBQWUsU0FBU1osTUFBVCxHQUF5QjtBQUN0QyxNQUFJLDhEQUFtQixRQUFuQixJQUErQix1REFBWSxJQUEvQyxFQUFxRDtBQUNuRCxXQUFPUyxTQUFTLGtEQUFoQjtBQUNEOztBQUVELFNBQU9oQixhQUFhLE1BQWIsbUJBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwcm9wZXJ0eSBmcm9tIFwiLi9wcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IHJlbmRlciBmcm9tIFwiLi9yZW5kZXIuanNcIjtcblxuaW1wb3J0ICogYXMgY2FjaGUgZnJvbSBcIi4vY2FjaGUuanNcIjtcbmltcG9ydCB7IHBhc2NhbFRvRGFzaCwgZGVmZXJyZWQgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xudHJ5IHsgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfSBjYXRjaChlKSB7IHZhciBwcm9jZXNzID0geyBlbnY6IHsgTk9ERV9FTlY6ICdwcm9kdWN0aW9uJyB9IH07IH0gLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG5jb25zdCBkZWZhdWx0TWV0aG9kID0gKGhvc3QsIHZhbHVlKSA9PiB2YWx1ZTtcblxuY29uc3QgY2FsbGJhY2tzTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHByb3BzTWFwID0gbmV3IFdlYWtNYXAoKTtcblxuZnVuY3Rpb24gY29tcGlsZShIeWJyaWQsIGRlc2NyaXB0b3JzKSB7XG4gIEh5YnJpZC5oeWJyaWRzID0gZGVzY3JpcHRvcnM7XG5cbiAgY29uc3QgY2FsbGJhY2tzID0gW107XG4gIGNvbnN0IHByb3BzID0gT2JqZWN0LmtleXMoZGVzY3JpcHRvcnMpO1xuXG4gIGNhbGxiYWNrc01hcC5zZXQoSHlicmlkLCBjYWxsYmFja3MpO1xuICBwcm9wc01hcC5zZXQoSHlicmlkLCBwcm9wcyk7XG5cbiAgcHJvcHMuZm9yRWFjaChrZXkgPT4ge1xuICAgIGNvbnN0IGRlc2MgPSBkZXNjcmlwdG9yc1trZXldO1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgZGVzYztcblxuICAgIGxldCBjb25maWc7XG5cbiAgICBpZiAodHlwZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjb25maWcgPSBrZXkgPT09IFwicmVuZGVyXCIgPyByZW5kZXIoZGVzYykgOiB7IGdldDogZGVzYyB9O1xuICAgIH0gZWxzZSBpZiAodHlwZSAhPT0gXCJvYmplY3RcIiB8fCBkZXNjID09PSBudWxsIHx8IEFycmF5LmlzQXJyYXkoZGVzYykpIHtcbiAgICAgIGNvbmZpZyA9IHByb3BlcnR5KGRlc2MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25maWcgPSB7XG4gICAgICAgIGdldDogZGVzYy5nZXQgfHwgZGVmYXVsdE1ldGhvZCxcbiAgICAgICAgc2V0OiBkZXNjLnNldCB8fCAoIWRlc2MuZ2V0ICYmIGRlZmF1bHRNZXRob2QpIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgY29ubmVjdDogZGVzYy5jb25uZWN0LFxuICAgICAgICBvYnNlcnZlOiBkZXNjLm9ic2VydmUsXG4gICAgICB9O1xuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIeWJyaWQucHJvdG90eXBlLCBrZXksIHtcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KHRoaXMsIGtleSwgY29uZmlnLmdldCk7XG4gICAgICB9LFxuICAgICAgc2V0OlxuICAgICAgICBjb25maWcuc2V0ICYmXG4gICAgICAgIGZ1bmN0aW9uIHNldChuZXdWYWx1ZSkge1xuICAgICAgICAgIGNhY2hlLnNldCh0aGlzLCBrZXksIGNvbmZpZy5zZXQsIG5ld1ZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIixcbiAgICB9KTtcblxuICAgIGlmIChjb25maWcub2JzZXJ2ZSkge1xuICAgICAgY2FsbGJhY2tzLnVuc2hpZnQoaG9zdCA9PlxuICAgICAgICBjYWNoZS5vYnNlcnZlKGhvc3QsIGtleSwgY29uZmlnLmdldCwgY29uZmlnLm9ic2VydmUpLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmNvbm5lY3QpIHtcbiAgICAgIGNhbGxiYWNrcy5wdXNoKGhvc3QgPT5cbiAgICAgICAgY29uZmlnLmNvbm5lY3QoaG9zdCwga2V5LCAoKSA9PiB7XG4gICAgICAgICAgY2FjaGUuaW52YWxpZGF0ZShob3N0LCBrZXkpO1xuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn1cblxubGV0IHVwZGF0ZTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gIGNvbnN0IHdhbGtJblNoYWRvdyA9IChub2RlLCBmbikgPT4ge1xuICAgIGZuKG5vZGUpO1xuXG4gICAgQXJyYXkuZnJvbShub2RlLmNoaWxkcmVuKS5mb3JFYWNoKGVsID0+IHdhbGtJblNoYWRvdyhlbCwgZm4pKTtcblxuICAgIGlmIChub2RlLnNoYWRvd1Jvb3QpIHtcbiAgICAgIEFycmF5LmZyb20obm9kZS5zaGFkb3dSb290LmNoaWxkcmVuKS5mb3JFYWNoKGVsID0+IHdhbGtJblNoYWRvdyhlbCwgZm4pKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlUXVldWUgPSBuZXcgTWFwKCk7XG4gIHVwZGF0ZSA9IChIeWJyaWQsIGxhc3RIeWJyaWRzKSA9PiB7XG4gICAgaWYgKCF1cGRhdGVRdWV1ZS5zaXplKSB7XG4gICAgICBkZWZlcnJlZC50aGVuKCgpID0+IHtcbiAgICAgICAgd2Fsa0luU2hhZG93KGRvY3VtZW50LmJvZHksIG5vZGUgPT4ge1xuICAgICAgICAgIGlmICh1cGRhdGVRdWV1ZS5oYXMobm9kZS5jb25zdHJ1Y3RvcikpIHtcbiAgICAgICAgICAgIGNvbnN0IGh5YnJpZHMgPSB1cGRhdGVRdWV1ZS5nZXQobm9kZS5jb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgICBub2RlLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKG5vZGUuY29uc3RydWN0b3IuaHlicmlkcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICBjYWNoZS5pbnZhbGlkYXRlKFxuICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIG5vZGUuY29uc3RydWN0b3IuaHlicmlkc1trZXldICE9PSBoeWJyaWRzW2tleV0sXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbm9kZS5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHVwZGF0ZVF1ZXVlLmNsZWFyKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlUXVldWUuc2V0KEh5YnJpZCwgbGFzdEh5YnJpZHMpO1xuICB9O1xufVxuXG5jb25zdCBkaXNjb25uZWN0cyA9IG5ldyBXZWFrTWFwKCk7XG5cbmZ1bmN0aW9uIGRlZmluZUVsZW1lbnQodGFnTmFtZSwgaHlicmlkc09yQ29uc3RydWN0b3IpIHtcbiAgY29uc3QgdHlwZSA9IHR5cGVvZiBoeWJyaWRzT3JDb25zdHJ1Y3RvcjtcbiAgaWYgKHR5cGUgIT09IFwib2JqZWN0XCIgJiYgdHlwZSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKGBTZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbjogJHt0eXBlfWApO1xuICB9XG5cbiAgaWYgKHRhZ05hbWUgIT09IG51bGwpIHtcbiAgICBjb25zdCBDdXN0b21FbGVtZW50ID0gd2luZG93LmN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKTtcblxuICAgIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGlmIChDdXN0b21FbGVtZW50ICE9PSBoeWJyaWRzT3JDb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBoeWJyaWRzT3JDb25zdHJ1Y3Rvcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gQ3VzdG9tRWxlbWVudDtcbiAgICB9XG5cbiAgICBpZiAoQ3VzdG9tRWxlbWVudCkge1xuICAgICAgaWYgKEN1c3RvbUVsZW1lbnQuaHlicmlkcyA9PT0gaHlicmlkc09yQ29uc3RydWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIEN1c3RvbUVsZW1lbnQ7XG4gICAgICB9XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmIEN1c3RvbUVsZW1lbnQuaHlicmlkcykge1xuICAgICAgICBPYmplY3Qua2V5cyhDdXN0b21FbGVtZW50Lmh5YnJpZHMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBkZWxldGUgQ3VzdG9tRWxlbWVudC5wcm90b3R5cGVba2V5XTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbGFzdEh5YnJpZHMgPSBDdXN0b21FbGVtZW50Lmh5YnJpZHM7XG5cbiAgICAgICAgY29tcGlsZShDdXN0b21FbGVtZW50LCBoeWJyaWRzT3JDb25zdHJ1Y3Rvcik7XG4gICAgICAgIHVwZGF0ZShDdXN0b21FbGVtZW50LCBsYXN0SHlicmlkcyk7XG5cbiAgICAgICAgcmV0dXJuIEN1c3RvbUVsZW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIHRocm93IEVycm9yKGBFbGVtZW50ICcke3RhZ05hbWV9JyBhbHJlYWR5IGRlZmluZWRgKTtcbiAgICB9XG4gIH1cblxuICBjbGFzcyBIeWJyaWQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuXG4gICAgICBjb25zdCBwcm9wcyA9IHByb3BzTWFwLmdldChIeWJyaWQpO1xuXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcHJvcHMubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLCBrZXkpKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzW2tleV07XG4gICAgICAgICAgZGVsZXRlIHRoaXNba2V5XTtcbiAgICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgY29uc3QgY2FsbGJhY2tzID0gY2FsbGJhY2tzTWFwLmdldChIeWJyaWQpO1xuICAgICAgY29uc3QgbGlzdCA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY2FsbGJhY2tzLmxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgICBjb25zdCBjYiA9IGNhbGxiYWNrc1tpbmRleF0odGhpcyk7XG4gICAgICAgIGlmIChjYikgbGlzdC5wdXNoKGNiKTtcbiAgICAgIH1cblxuICAgICAgZGlzY29ubmVjdHMuc2V0KHRoaXMsIGxpc3QpO1xuICAgIH1cblxuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgY29uc3QgbGlzdCA9IGRpc2Nvbm5lY3RzLmdldCh0aGlzKTtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsaXN0Lmxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgICBsaXN0W2luZGV4XSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbXBpbGUoSHlicmlkLCBoeWJyaWRzT3JDb25zdHJ1Y3Rvcik7XG5cbiAgaWYgKHRhZ05hbWUgIT09IG51bGwpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSHlicmlkLCBcIm5hbWVcIiwge1xuICAgICAgZ2V0OiAoKSA9PiB0YWdOYW1lLFxuICAgIH0pO1xuICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBIeWJyaWQpO1xuICB9XG5cbiAgcmV0dXJuIEh5YnJpZDtcbn1cblxuZnVuY3Rpb24gZGVmaW5lTWFwKGVsZW1lbnRzKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhlbGVtZW50cykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgIGNvbnN0IHRhZ05hbWUgPSBwYXNjYWxUb0Rhc2goa2V5KTtcbiAgICBhY2Nba2V5XSA9IGRlZmluZUVsZW1lbnQodGFnTmFtZSwgZWxlbWVudHNba2V5XSk7XG5cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlZmluZSguLi5hcmdzKSB7XG4gIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJvYmplY3RcIiAmJiBhcmdzWzBdICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIGRlZmluZU1hcChhcmdzWzBdKTtcbiAgfVxuXG4gIHJldHVybiBkZWZpbmVFbGVtZW50KC4uLmFyZ3MpO1xufVxuIl19","var map = new WeakMap();\nexport var dataMap = {\n  get: function get(key, defaultValue) {\n    var value = map.get(key);\n    if (value) return value;\n\n    if (defaultValue) {\n      map.set(key, defaultValue);\n    }\n\n    return defaultValue;\n  },\n  set: function set(key, value) {\n    map.set(key, value);\n    return value;\n  }\n};\nexport function getTemplateEnd(node) {\n  var data; // eslint-disable-next-line no-cond-assign\n\n  while (node && (data = dataMap.get(node)) && data.endNode) {\n    node = data.endNode;\n  }\n\n  return node;\n}\nexport function removeTemplate(target) {\n  if (target.nodeType !== Node.TEXT_NODE) {\n    var child = target.childNodes[0];\n\n    while (child) {\n      target.removeChild(child);\n      child = target.childNodes[0];\n    }\n  } else {\n    var data = dataMap.get(target);\n\n    if (data.startNode) {\n      var endNode = getTemplateEnd(data.endNode);\n      var node = data.startNode;\n      var lastNextSibling = endNode.nextSibling;\n\n      while (node) {\n        var nextSibling = node.nextSibling;\n        node.parentNode.removeChild(node);\n        node = nextSibling !== lastNextSibling && nextSibling;\n      }\n    }\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZW1wbGF0ZS91dGlscy5qcyJdLCJuYW1lcyI6WyJtYXAiLCJXZWFrTWFwIiwiZGF0YU1hcCIsImdldCIsImtleSIsImRlZmF1bHRWYWx1ZSIsInZhbHVlIiwic2V0IiwiZ2V0VGVtcGxhdGVFbmQiLCJub2RlIiwiZGF0YSIsImVuZE5vZGUiLCJyZW1vdmVUZW1wbGF0ZSIsInRhcmdldCIsIm5vZGVUeXBlIiwiTm9kZSIsIlRFWFRfTk9ERSIsImNoaWxkIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwic3RhcnROb2RlIiwibGFzdE5leHRTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJwYXJlbnROb2RlIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxHQUFHLEdBQUcsSUFBSUMsT0FBSixFQUFaO0FBQ0EsT0FBTyxJQUFNQyxPQUFPLEdBQUc7QUFDckJDLEVBQUFBLEdBRHFCLGVBQ2pCQyxHQURpQixFQUNaQyxZQURZLEVBQ0U7QUFDckIsUUFBTUMsS0FBSyxHQUFHTixHQUFHLENBQUNHLEdBQUosQ0FBUUMsR0FBUixDQUFkO0FBQ0EsUUFBSUUsS0FBSixFQUFXLE9BQU9BLEtBQVA7O0FBRVgsUUFBSUQsWUFBSixFQUFrQjtBQUNoQkwsTUFBQUEsR0FBRyxDQUFDTyxHQUFKLENBQVFILEdBQVIsRUFBYUMsWUFBYjtBQUNEOztBQUVELFdBQU9BLFlBQVA7QUFDRCxHQVZvQjtBQVdyQkUsRUFBQUEsR0FYcUIsZUFXakJILEdBWGlCLEVBV1pFLEtBWFksRUFXTDtBQUNkTixJQUFBQSxHQUFHLENBQUNPLEdBQUosQ0FBUUgsR0FBUixFQUFhRSxLQUFiO0FBQ0EsV0FBT0EsS0FBUDtBQUNEO0FBZG9CLENBQWhCO0FBaUJQLE9BQU8sU0FBU0UsY0FBVCxDQUF3QkMsSUFBeEIsRUFBOEI7QUFDbkMsTUFBSUMsSUFBSixDQURtQyxDQUVuQzs7QUFDQSxTQUFPRCxJQUFJLEtBQUtDLElBQUksR0FBR1IsT0FBTyxDQUFDQyxHQUFSLENBQVlNLElBQVosQ0FBWixDQUFKLElBQXNDQyxJQUFJLENBQUNDLE9BQWxELEVBQTJEO0FBQ3pERixJQUFBQSxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsT0FBWjtBQUNEOztBQUVELFNBQU9GLElBQVA7QUFDRDtBQUVELE9BQU8sU0FBU0csY0FBVCxDQUF3QkMsTUFBeEIsRUFBZ0M7QUFDckMsTUFBSUEsTUFBTSxDQUFDQyxRQUFQLEtBQW9CQyxJQUFJLENBQUNDLFNBQTdCLEVBQXdDO0FBQ3RDLFFBQUlDLEtBQUssR0FBR0osTUFBTSxDQUFDSyxVQUFQLENBQWtCLENBQWxCLENBQVo7O0FBQ0EsV0FBT0QsS0FBUCxFQUFjO0FBQ1pKLE1BQUFBLE1BQU0sQ0FBQ00sV0FBUCxDQUFtQkYsS0FBbkI7QUFDQUEsTUFBQUEsS0FBSyxHQUFHSixNQUFNLENBQUNLLFVBQVAsQ0FBa0IsQ0FBbEIsQ0FBUjtBQUNEO0FBQ0YsR0FORCxNQU1PO0FBQ0wsUUFBTVIsSUFBSSxHQUFHUixPQUFPLENBQUNDLEdBQVIsQ0FBWVUsTUFBWixDQUFiOztBQUVBLFFBQUlILElBQUksQ0FBQ1UsU0FBVCxFQUFvQjtBQUNsQixVQUFNVCxPQUFPLEdBQUdILGNBQWMsQ0FBQ0UsSUFBSSxDQUFDQyxPQUFOLENBQTlCO0FBRUEsVUFBSUYsSUFBSSxHQUFHQyxJQUFJLENBQUNVLFNBQWhCO0FBQ0EsVUFBTUMsZUFBZSxHQUFHVixPQUFPLENBQUNXLFdBQWhDOztBQUVBLGFBQU9iLElBQVAsRUFBYTtBQUNYLFlBQU1hLFdBQVcsR0FBR2IsSUFBSSxDQUFDYSxXQUF6QjtBQUNBYixRQUFBQSxJQUFJLENBQUNjLFVBQUwsQ0FBZ0JKLFdBQWhCLENBQTRCVixJQUE1QjtBQUNBQSxRQUFBQSxJQUFJLEdBQUdhLFdBQVcsS0FBS0QsZUFBaEIsSUFBbUNDLFdBQTFDO0FBQ0Q7QUFDRjtBQUNGO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtYXAgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGNvbnN0IGRhdGFNYXAgPSB7XG4gIGdldChrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgIGNvbnN0IHZhbHVlID0gbWFwLmdldChrZXkpO1xuICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlO1xuXG4gICAgaWYgKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgbWFwLnNldChrZXksIGRlZmF1bHRWYWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfSxcbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICBtYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZW1wbGF0ZUVuZChub2RlKSB7XG4gIGxldCBkYXRhO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZC1hc3NpZ25cbiAgd2hpbGUgKG5vZGUgJiYgKGRhdGEgPSBkYXRhTWFwLmdldChub2RlKSkgJiYgZGF0YS5lbmROb2RlKSB7XG4gICAgbm9kZSA9IGRhdGEuZW5kTm9kZTtcbiAgfVxuXG4gIHJldHVybiBub2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVGVtcGxhdGUodGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQubm9kZVR5cGUgIT09IE5vZGUuVEVYVF9OT0RFKSB7XG4gICAgbGV0IGNoaWxkID0gdGFyZ2V0LmNoaWxkTm9kZXNbMF07XG4gICAgd2hpbGUgKGNoaWxkKSB7XG4gICAgICB0YXJnZXQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgICAgY2hpbGQgPSB0YXJnZXQuY2hpbGROb2Rlc1swXTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZGF0YSA9IGRhdGFNYXAuZ2V0KHRhcmdldCk7XG5cbiAgICBpZiAoZGF0YS5zdGFydE5vZGUpIHtcbiAgICAgIGNvbnN0IGVuZE5vZGUgPSBnZXRUZW1wbGF0ZUVuZChkYXRhLmVuZE5vZGUpO1xuXG4gICAgICBsZXQgbm9kZSA9IGRhdGEuc3RhcnROb2RlO1xuICAgICAgY29uc3QgbGFzdE5leHRTaWJsaW5nID0gZW5kTm9kZS5uZXh0U2libGluZztcblxuICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICAgIG5vZGUgPSBuZXh0U2libGluZyAhPT0gbGFzdE5leHRTaWJsaW5nICYmIG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19","import { dataMap, removeTemplate, getTemplateEnd } from \"../utils.js\";\nexport var arrayMap = new WeakMap();\n\nfunction movePlaceholder(target, previousSibling) {\n  var data = dataMap.get(target);\n  var startNode = data.startNode;\n  var endNode = getTemplateEnd(data.endNode);\n  previousSibling.parentNode.insertBefore(target, previousSibling.nextSibling);\n  var prevNode = target;\n  var node = startNode;\n\n  while (node) {\n    var nextNode = node.nextSibling;\n    prevNode.parentNode.insertBefore(node, prevNode.nextSibling);\n    prevNode = node;\n    node = nextNode !== endNode.nextSibling && nextNode;\n  }\n}\n\nexport default function resolveArray(host, target, value, resolveValue) {\n  var lastEntries = arrayMap.get(target);\n  var entries = value.map(function (item, index) {\n    return {\n      id: Object.prototype.hasOwnProperty.call(item, \"id\") ? item.id : index,\n      value: item,\n      placeholder: null,\n      available: true\n    };\n  });\n  arrayMap.set(target, entries);\n\n  if (lastEntries) {\n    var ids = new Set();\n    entries.forEach(function (entry) {\n      return ids.add(entry.id);\n    });\n    lastEntries = lastEntries.filter(function (entry) {\n      if (!ids.has(entry.id)) {\n        removeTemplate(entry.placeholder);\n        entry.placeholder.parentNode.removeChild(entry.placeholder);\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  var previousSibling = target;\n  var lastIndex = value.length - 1;\n  var data = dataMap.get(target);\n\n  for (var index = 0; index < entries.length; index += 1) {\n    var entry = entries[index];\n    var matchedEntry = void 0;\n\n    if (lastEntries) {\n      for (var i = 0; i < lastEntries.length; i += 1) {\n        if (lastEntries[i].available && lastEntries[i].id === entry.id) {\n          matchedEntry = lastEntries[i];\n          break;\n        }\n      }\n    }\n\n    if (matchedEntry) {\n      matchedEntry.available = false;\n      entry.placeholder = matchedEntry.placeholder;\n\n      if (entry.placeholder.previousSibling !== previousSibling) {\n        movePlaceholder(entry.placeholder, previousSibling);\n      }\n\n      if (matchedEntry.value !== entry.value) {\n        resolveValue(host, entry.placeholder, entry.value);\n      }\n    } else {\n      entry.placeholder = document.createTextNode(\"\");\n      previousSibling.parentNode.insertBefore(entry.placeholder, previousSibling.nextSibling);\n      resolveValue(host, entry.placeholder, entry.value);\n    }\n\n    previousSibling = getTemplateEnd(dataMap.get(entry.placeholder).endNode || entry.placeholder);\n    if (index === 0) data.startNode = entry.placeholder;\n    if (index === lastIndex) data.endNode = previousSibling;\n  }\n\n  if (lastEntries) {\n    lastEntries.forEach(function (entry) {\n      if (entry.available) {\n        removeTemplate(entry.placeholder);\n        entry.placeholder.parentNode.removeChild(entry.placeholder);\n      }\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZW1wbGF0ZS9yZXNvbHZlcnMvYXJyYXkuanMiXSwibmFtZXMiOlsiZGF0YU1hcCIsInJlbW92ZVRlbXBsYXRlIiwiZ2V0VGVtcGxhdGVFbmQiLCJhcnJheU1hcCIsIldlYWtNYXAiLCJtb3ZlUGxhY2Vob2xkZXIiLCJ0YXJnZXQiLCJwcmV2aW91c1NpYmxpbmciLCJkYXRhIiwiZ2V0Iiwic3RhcnROb2RlIiwiZW5kTm9kZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsInByZXZOb2RlIiwibm9kZSIsIm5leHROb2RlIiwicmVzb2x2ZUFycmF5IiwiaG9zdCIsInZhbHVlIiwicmVzb2x2ZVZhbHVlIiwibGFzdEVudHJpZXMiLCJlbnRyaWVzIiwibWFwIiwiaXRlbSIsImluZGV4IiwiaWQiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwbGFjZWhvbGRlciIsImF2YWlsYWJsZSIsInNldCIsImlkcyIsIlNldCIsImZvckVhY2giLCJlbnRyeSIsImFkZCIsImZpbHRlciIsImhhcyIsInJlbW92ZUNoaWxkIiwibGFzdEluZGV4IiwibGVuZ3RoIiwibWF0Y2hlZEVudHJ5IiwiaSIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLE9BQVQsRUFBa0JDLGNBQWxCLEVBQWtDQyxjQUFsQyxRQUF3RCxhQUF4RDtBQUVBLE9BQU8sSUFBTUMsUUFBUSxHQUFHLElBQUlDLE9BQUosRUFBakI7O0FBRVAsU0FBU0MsZUFBVCxDQUF5QkMsTUFBekIsRUFBaUNDLGVBQWpDLEVBQWtEO0FBQ2hELE1BQU1DLElBQUksR0FBR1IsT0FBTyxDQUFDUyxHQUFSLENBQVlILE1BQVosQ0FBYjtBQUNBLE1BQU1JLFNBQVMsR0FBR0YsSUFBSSxDQUFDRSxTQUF2QjtBQUNBLE1BQU1DLE9BQU8sR0FBR1QsY0FBYyxDQUFDTSxJQUFJLENBQUNHLE9BQU4s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QUNOLFdBQWxCLEVBQStCckIsT0FBL0IsSUFBMEMyQixLQUFLLENBQUNOLFdBRGxCLENBQWhDO0FBSUEsUUFBSU4sS0FBSyxLQUFLLENBQWQsRUFBaUJsQixJQUFJLENBQUNFLFNBQUwsR0FBaUI0QixLQUFLLENBQUNOLFdBQXZCO0FBQ2pCLFFBQUlOLEtBQUssS0FBS2lCLFNBQWQsRUFBeUJuQyxJQUFJLENBQUNHLE9BQUwsR0FBZUosZUFBZjtBQUMxQjs7QUFFRCxNQUFJZSxXQUFKLEVBQWlCO0FBQ2ZBLElBQUFBLFdBQVcsQ0FBQ2UsT0FBWixDQUFvQixVQUFBQyxLQUFLLEVBQUk7QUFDM0IsVUFBSUEsS0FBSyxDQUFDTCxTQUFWLEVBQXFCO0FBQ25CaEMsUUFBQUEsY0FBYyxDQUFDcUMsS0FBSyxDQUFDTixXQUFQLENBQWQ7QUFDQU0sUUFBQUEsS0FBSyxDQUFDTixXQUFOLENBQWtCcEIsVUFBbEIsQ0FBNkI4QixXQUE3QixDQUF5Q0osS0FBSyxDQUFDTixXQUEvQztBQUNEO0FBQ0YsS0FMRDtBQU1EO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYXRhTWFwLCByZW1vdmVUZW1wbGF0ZSwgZ2V0VGVtcGxhdGVFbmQgfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcblxuZXhwb3J0IGNvbnN0IGFycmF5TWFwID0gbmV3IFdlYWtNYXAoKTtcblxuZnVuY3Rpb24gbW92ZVBsYWNlaG9sZGVyKHRhcmdldCwgcHJldmlvdXNTaWJsaW5nKSB7XG4gIGNvbnN0IGRhdGEgPSBkYXRhTWFwLmdldCh0YXJnZXQpO1xuICBjb25zdCBzdGFydE5vZGUgPSBkYXRhLnN0YXJ0Tm9kZTtcbiAgY29uc3QgZW5kTm9kZSA9IGdldFRlbXBsYXRlRW5kKGRhdGEuZW5kTm9kZSk7XG5cbiAgcHJldmlvdXNTaWJsaW5nLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhcmdldCwgcHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nKTtcblxuICBsZXQgcHJldk5vZGUgPSB0YXJnZXQ7XG4gIGxldCBub2RlID0gc3RhcnROb2RlO1xuICB3aGlsZSAobm9kZSkge1xuICAgIGNvbnN0IG5leHROb2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICBwcmV2Tm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBwcmV2Tm9kZS5uZXh0U2libGluZyk7XG4gICAgcHJldk5vZGUgPSBub2RlO1xuICAgIG5vZGUgPSBuZXh0Tm9kZSAhPT0gZW5kTm9kZS5uZXh0U2libGluZyAmJiBuZXh0Tm9kZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXNvbHZlQXJyYXkoaG9zdCwgdGFyZ2V0LCB2YWx1ZSwgcmVzb2x2ZVZhbHVlKSB7XG4gIGxldCBsYXN0RW50cmllcyA9IGFycmF5TWFwLmdldCh0YXJnZXQpO1xuICBjb25zdCBlbnRyaWVzID0gdmFsdWUubWFwKChpdGVtLCBpbmRleCkgPT4gKHtcbiAgICBpZDogT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGl0ZW0sIFwiaWRcIikgPyBpdGVtLmlkIDogaW5kZXgsXG4gICAgdmFsdWU6IGl0ZW0sXG4gICAgcGxhY2Vob2xkZXI6IG51bGwsXG4gICAgYXZhaWxhYmxlOiB0cnVlLFxuICB9KSk7XG5cbiAgYXJyYXlNYXAuc2V0KHRhcmdldCwgZW50cmllcyk7XG5cbiAgaWYgKGxhc3RFbnRyaWVzKSB7XG4gICAgY29uc3QgaWRzID0gbmV3IFNldCgpO1xuICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiBpZHMuYWRkKGVudHJ5LmlkKSk7XG5cbiAgICBsYXN0RW50cmllcyA9IGxhc3RFbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XG4gICAgICBpZiAoIWlkcy5oYXMoZW50cnkuaWQpKSB7XG4gICAgICAgIHJlbW92ZVRlbXBsYXRlKGVudHJ5LnBsYWNlaG9sZGVyKTtcbiAgICAgICAgZW50cnkucGxhY2Vob2xkZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbnRyeS5wbGFjZWhvbGRlcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gIH1cblxuICBsZXQgcHJldmlvdXNTaWJsaW5nID0gdGFyZ2V0O1xuICBjb25zdCBsYXN0SW5kZXggPSB2YWx1ZS5sZW5ndGggLSAxO1xuICBjb25zdCBkYXRhID0gZGF0YU1hcC5nZXQodGFyZ2V0KTtcblxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZW50cmllcy5sZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBjb25zdCBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIGxldCBtYXRjaGVkRW50cnk7XG4gICAgaWYgKGxhc3RFbnRyaWVzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhc3RFbnRyaWVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChsYXN0RW50cmllc1tpXS5hdmFpbGFibGUgJiYgbGFzdEVudHJpZXNbaV0uaWQgPT09IGVudHJ5LmlkKSB7XG4gICAgICAgICAgbWF0Y2hlZEVudHJ5ID0gbGFzdEVudHJpZXNbaV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF0Y2hlZEVudHJ5KSB7XG4gICAgICBtYXRjaGVkRW50cnkuYXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICBlbnRyeS5wbGFjZWhvbGRlciA9IG1hdGNoZWRFbnRyeS5wbGFjZWhvbGRlcjtcblxuICAgICAgaWYgKGVudHJ5LnBsYWNlaG9sZGVyLnByZXZpb3VzU2libGluZyAhPT0gcHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIG1vdmVQbGFjZWhvbGRlcihlbnRyeS5wbGFjZWhvbGRlciwgcHJldmlvdXNTaWJsaW5nKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXRjaGVkRW50cnkudmFsdWUgIT09IGVudHJ5LnZhbHVlKSB7XG4gICAgICAgIHJlc29sdmVWYWx1ZShob3N0LCBlbnRyeS5wbGFjZWhvbGRlciwgZW50cnkudmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlbnRyeS5wbGFjZWhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO1xuICAgICAgcHJldmlvdXNTaWJsaW5nLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKFxuICAgICAgICBlbnRyeS5wbGFjZWhvbGRlcixcbiAgICAgICAgcHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nLFxuICAgICAgKTtcbiAgICAgIHJlc29sdmVWYWx1ZShob3N0LCBlbnRyeS5wbGFjZWhvbGRlciwgZW50cnkudmFsdWUpO1xuICAgIH1cblxuICAgIHByZXZpb3VzU2libGluZyA9IGdldFRlbXBsYXRlRW5kKFxuICAgICAgZGF0YU1hcC5nZXQoZW50cnkucGxhY2Vob2xkZXIpLmVuZE5vZGUgfHwgZW50cnkucGxhY2Vob2xkZXIsXG4gICAgKTtcblxuICAgIGlmIChpbmRleCA9PT0gMCkgZGF0YS5zdGFydE5vZGUgPSBlbnRyeS5wbGFjZWhvbGRlcjtcbiAgICBpZiAoaW5kZXggPT09IGxhc3RJbmRleCkgZGF0YS5lbmROb2RlID0gcHJldmlvdXNTaWJsaW5nO1xuICB9XG5cbiAgaWYgKGxhc3RFbnRyaWVzKSB7XG4gICAgbGFzdEVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICBpZiAoZW50cnkuYXZhaWxhYmxlKSB7XG4gICAgICAgIHJlbW92ZVRlbXBsYXRlKGVudHJ5LnBsYWNlaG9sZGVyKTtcbiAgICAgICAgZW50cnkucGxhY2Vob2xkZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbnRyeS5wbGFjZWhvbGRlcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { dataMap, removeTemplate } from \"../utils.js\";\nimport resolveArray, { arrayMap } from \"./array.js\";\nexport default function resolveValue(host, target, value) {\n  var type = Array.isArray(value) ? \"array\" : _typeof(value);\n  var data = dataMap.get(target, {});\n\n  if (data.type !== type) {\n    removeTemplate(target);\n    if (type === \"array\") arrayMap.delete(target);\n    data = dataMap.set(target, {\n      type: type\n    });\n\n    if (target.textContent !== \"\") {\n      target.textContent = \"\";\n    }\n  }\n\n  switch (type) {\n    case \"function\":\n      value(host, target);\n      break;\n\n    case \"array\":\n      resolveArray(host, target, value, resolveValue);\n      break;\n\n    default:\n      target.textContent = type === \"number\" || value ? value : \"\";\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZW1wbGF0ZS9yZXNvbHZlcnMvdmFsdWUuanMiXSwibmFtZXMiOlsiZGF0YU1hcCIsInJlbW92ZVRlbXBsYXRlIiwicmVzb2x2ZUFycmF5IiwiYXJyYXlNYXAiLCJyZXNvbHZlVmFsdWUiLCJob3N0IiwidGFyZ2V0IiwidmFsdWUiLCJ0eXBlIiwiQXJyYXkiLCJpc0FycmF5IiwiZGF0YSIsImdldCIsImRlbGV0ZSIsInNldCIsInRleHRDb250ZW50Il0sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVNBLE9BQVQsRUFBa0JDLGNBQWxCLFFBQXdDLGFBQXhDO0FBQ0EsT0FBT0MsWUFBUCxJQUF1QkMsUUFBdkIsUUFBdUMsWUFBdkM7QUFFQSxlQUFlLFNBQVNDLFlBQVQsQ0FBc0JDLElBQXRCLEVBQTRCQyxNQUE1QixFQUFvQ0MsS0FBcEMsRUFBMkM7QUFDeEQsTUFBTUMsSUFBSSxHQUFHQyxLQUFLLENBQUNDLE9BQU4sQ0FBY0gsS0FBZCxJQUF1QixPQUF2QixXQUF3Q0EsS0FBeEMsQ0FBYjtBQUNBLE1BQUlJLElBQUksR0FBR1gsT0FBTyxDQUFDWSxHQUFSLENBQVlOLE1BQVosRUFBb0IsRUFBcEIsQ0FBWDs7QUFFQSxNQUFJSyxJQUFJLENBQUNILElBQUwsS0FBY0EsSUFBbEIsRUFBd0I7QUFDdEJQLElBQUFBLGNBQWMsQ0FBQ0ssTUFBRCxDQUFkO0FBQ0EsUUFBSUUsSUFBSSxLQUFLLE9BQWIsRUFBc0JMLFFBQVEsQ0FBQ1UsTUFBVCxDQUFnQlAsTUFBaEI7QUFFdEJLLElBQUFBLElBQUksR0FBR1gsT0FBTyxDQUFDYyxHQUFSLENBQVlSLE1BQVosRUFBb0I7QUFBRUUsTUFBQUEsSUFBSSxFQUFKQTtBQUFGLEtBQXBCLENBQVA7O0FBRUEsUUFBSUYsTUFBTSxDQUFDUyxXQUFQLEtBQXVCLEVBQTNCLEVBQStCO0FBQzdCVCxNQUFBQSxNQUFNLENBQUNTLFdBQVAsR0FBcUIsRUFBckI7QUFDRDtBQUNGOztBQUVELFVBQVFQLElBQVI7QUFDRSxTQUFLLFVBQUw7QUFDRUQsTUFBQUEsS0FBSyxDQUFDRixJQUFELEVBQU9DLE1BQVAsQ0FBTDtBQUNBOztBQUNGLFNBQUssT0FBTDtBQUNFSixNQUFBQSxZQUFZLENBQUNHLElBQUQsRUFBT0MsTUFBUCxFQUFlQyxLQUFmLEVBQXNCSCxZQUF0QixDQUFaO0FBQ0E7O0FBQ0Y7QUFDRUUsTUFBQUEsTUFBTSxDQUFDUyxXQUFQLEdBQXFCUCxJQUFJLEtBQUssUUFBVCxJQUFxQkQsS0FBckIsR0FBNkJBLEtBQTdCLEdBQXFDLEVBQTFEO0FBUko7QUFVRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRhdGFNYXAsIHJlbW92ZVRlbXBsYXRlIH0gZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5pbXBvcnQgcmVzb2x2ZUFycmF5LCB7IGFycmF5TWFwIH0gZnJvbSBcIi4vYXJyYXkuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVzb2x2ZVZhbHVlKGhvc3QsIHRhcmdldCwgdmFsdWUpIHtcbiAgY29uc3QgdHlwZSA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gXCJhcnJheVwiIDogdHlwZW9mIHZhbHVlO1xuICBsZXQgZGF0YSA9IGRhdGFNYXAuZ2V0KHRhcmdldCwge30pO1xuXG4gIGlmIChkYXRhLnR5cGUgIT09IHR5cGUpIHtcbiAgICByZW1vdmVUZW1wbGF0ZSh0YXJnZXQpO1xuICAgIGlmICh0eXBlID09PSBcImFycmF5XCIpIGFycmF5TWFwLmRlbGV0ZSh0YXJnZXQpO1xuXG4gICAgZGF0YSA9IGRhdGFNYXAuc2V0KHRhcmdldCwgeyB0eXBlIH0pO1xuXG4gICAgaWYgKHRhcmdldC50ZXh0Q29udGVudCAhPT0gXCJcIikge1xuICAgICAgdGFyZ2V0LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9XG4gIH1cblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgIHZhbHVlKGhvc3QsIHRhcmdldCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiYXJyYXlcIjpcbiAgICAgIHJlc29sdmVBcnJheShob3N0LCB0YXJnZXQsIHZhbHVlLCByZXNvbHZlVmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRhcmdldC50ZXh0Q29udGVudCA9IHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdmFsdWUgPyB2YWx1ZSA6IFwiXCI7XG4gIH1cbn1cbiJdfQ==","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar targets = new WeakMap();\nexport default function resolveEventListener(eventType) {\n  return function (host, target, value, lastValue) {\n    if (lastValue) {\n      var eventMap = targets.get(target);\n\n      if (eventMap) {\n        target.removeEventListener(eventType, eventMap.get(lastValue), lastValue.options !== undefined ? lastValue.options : false);\n      }\n    }\n\n    if (value) {\n      if (typeof value !== \"function\") {\n        throw Error(\"Event listener must be a function: \".concat(_typeof(value)));\n      }\n\n      var _eventMap = targets.get(target);\n\n      if (!_eventMap) {\n        _eventMap = new WeakMap();\n        targets.set(target, _eventMap);\n      }\n\n      var callback = value.bind(null, host);\n\n      _eventMap.set(value, callback);\n\n      target.addEventListener(eventType, callback, value.options !== undefined ? value.options : false);\n    }\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZW1wbGF0ZS9yZXNvbHZlcnMvZXZlbnQuanMiXSwibmFtZXMiOlsidGFyZ2V0cyIsIldlYWtNYXAiLCJyZXNvbHZlRXZlbnRMaXN0ZW5lciIsImV2ZW50VHlwZSIsImhvc3QiLCJ0YXJnZXQiLCJ2YWx1ZSIsImxhc3RWYWx1ZSIsImV2ZW50TWFwIiwiZ2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9wdGlvbnMiLCJ1bmRlZmluZWQiLCJFcnJvciIsInNldCIsImNhbGxiYWNrIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsT0FBTyxHQUFHLElBQUlDLE9BQUosRUFBaEI7QUFFQSxlQUFlLFNBQVNDLG9CQUFULENBQThCQyxTQUE5QixFQUF5QztBQUN0RCxTQUFPLFVBQUNDLElBQUQsRUFBT0MsTUFBUCxFQUFlQyxLQUFmLEVBQXNCQyxTQUF0QixFQUFvQztBQUN6QyxRQUFJQSxTQUFKLEVBQWU7QUFDYixVQUFNQyxRQUFRLEdBQUdSLE9BQU8sQ0FBQ1MsR0FBUixDQUFZSixNQUFaLENBQWpCOztBQUNBLFVBQUlHLFFBQUosRUFBYztBQUNaSCxRQUFBQSxNQUFNLENBQUNLLG1CQUFQLENBQ0VQLFNBREYsRUFFRUssUUFBUSxDQUFDQyxHQUFULENBQWFGLFNBQWIsQ0FGRixFQUdFQSxTQUFTLENBQUNJLE9BQVYsS0FBc0JDLFNBQXRCLEdBQWtDTCxTQUFTLENBQUNJLE9BQTVDLEdBQXNELEtBSHhEO0FBS0Q7QUFDRjs7QUFFRCxRQUFJTCxLQUFKLEVBQVc7QUFDVCxVQUFJLE9BQU9BLEtBQVAsS0FBaUIsVUFBckIsRUFBaUM7QUFDL0IsY0FBTU8sS0FBSyxzREFBOENQLEtBQTlDLEdBQVg7QUFDRDs7QUFFRCxVQUFJRSxTQUFRLEdBQUdSLE9BQU8sQ0FBQ1MsR0FBUixDQUFZSixNQUFaLENBQWY7O0FBQ0EsVUFBSSxDQUFDRyxTQUFMLEVBQWU7QUFDYkEsUUFBQUEsU0FBUSxHQUFHLElBQUlQLE9BQUosRUFBWDtBQUNBRCxRQUFBQSxPQUFPLENBQUNjLEdBQVIsQ0FBWVQsTUFBWixFQUFvQkcsU0FBcEI7QUFDRDs7QUFFRCxVQUFNTyxRQUFRLEdBQUdULEtBQUssQ0FBQ1UsSUFBTixDQUFXLElBQVgsRUFBaUJaLElBQWpCLENBQWpCOztBQUNBSSxNQUFBQSxTQUFRLENBQUNNLEdBQVQsQ0FBYVIsS0FBYixFQUFvQlMsUUFBcEI7O0FBRUFWLE1BQUFBLE1BQU0sQ0FBQ1ksZ0JBQVAsQ0FDRWQsU0FERixFQUVFWSxRQUZGLEVBR0VULEtBQUssQ0FBQ0ssT0FBTixLQUFrQkMsU0FBbEIsR0FBOEJOLEtBQUssQ0FBQ0ssT0FBcEMsR0FBOEMsS0FIaEQ7QUFLRDtBQUNGLEdBaENEO0FBaUNEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdGFyZ2V0cyA9IG5ldyBXZWFrTWFwKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlc29sdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSkge1xuICByZXR1cm4gKGhvc3QsIHRhcmdldCwgdmFsdWUsIGxhc3RWYWx1ZSkgPT4ge1xuICAgIGlmIChsYXN0VmFsdWUpIHtcbiAgICAgIGNvbnN0IGV2ZW50TWFwID0gdGFyZ2V0cy5nZXQodGFyZ2V0KTtcbiAgICAgIGlmIChldmVudE1hcCkge1xuICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBldmVudFR5cGUsXG4gICAgICAgICAgZXZlbnRNYXAuZ2V0KGxhc3RWYWx1ZSksXG4gICAgICAgICAgbGFzdFZhbHVlLm9wdGlvbnMgIT09IHVuZGVmaW5lZCA/IGxhc3RWYWx1ZS5vcHRpb25zIDogZmFsc2UsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYEV2ZW50IGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbjogJHt0eXBlb2YgdmFsdWV9YCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBldmVudE1hcCA9IHRhcmdldHMuZ2V0KHRhcmdldCk7XG4gICAgICBpZiAoIWV2ZW50TWFwKSB7XG4gICAgICAgIGV2ZW50TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGFyZ2V0cy5zZXQodGFyZ2V0LCBldmVudE1hcCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gdmFsdWUuYmluZChudWxsLCBob3N0KTtcbiAgICAgIGV2ZW50TWFwLnNldCh2YWx1ZSwgY2FsbGJhY2spO1xuXG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgZXZlbnRUeXBlLFxuICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgdmFsdWUub3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gdmFsdWUub3B0aW9ucyA6IGZhbHNlLFxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG4iXX0=","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction normalizeValue(value) {\n  var set = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();\n\n  if (Array.isArray(value)) {\n    value.forEach(function (className) {\n      return set.add(className);\n    });\n  } else if (value !== null && _typeof(value) === \"object\") {\n    Object.keys(value).forEach(function (key) {\n      return value[key] && set.add(key);\n    });\n  } else {\n    set.add(value);\n  }\n\n  return set;\n}\n\nvar classMap = new WeakMap();\nexport default function resolveClassList(host, target, value) {\n  var previousList = classMap.get(target) || new Set();\n  var list = normalizeValue(value);\n  classMap.set(target, list);\n  list.forEach(function (className) {\n    target.classList.add(className);\n    previousList.delete(className);\n  });\n  previousList.forEach(function (className) {\n    target.classList.remove(className);\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZW1wbGF0ZS9yZXNvbHZlcnMvY2xhc3MuanMiXSwibmFtZXMiOlsibm9ybWFsaXplVmFsdWUiLCJ2YWx1ZSIsInNldCIsIlNldCIsIkFycmF5IiwiaXNBcnJheSIsImZvckVhY2giLCJjbGFzc05hbWUiLCJhZGQiLCJPYmplY3QiLCJrZXlzIiwia2V5IiwiY2xhc3NNYXAiLCJXZWFrTWFwIiwicmVzb2x2ZUNsYXNzTGlzdCIsImhvc3QiLCJ0YXJnZXQiLCJwcmV2aW91c0xpc3QiLCJnZXQiLCJsaXN0IiwiY2xhc3NMaXN0IiwiZGVsZXRlIiwicmVtb3ZlIl0sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVNBLGNBQVQsQ0FBd0JDLEtBQXhCLEVBQWdEO0FBQUEsTUFBakJDLEdBQWlCLHVFQUFYLElBQUlDLEdBQUosRUFBVzs7QUFDOUMsTUFBSUMsS0FBSyxDQUFDQyxPQUFOLENBQWNKLEtBQWQsQ0FBSixFQUEwQjtBQUN4QkEsSUFBQUEsS0FBSyxDQUFDSyxPQUFOLENBQWMsVUFBQUMsU0FBUztBQUFBLGFBQUlMLEdBQUcsQ0FBQ00sR0FBSixDQUFRRCxTQUFSLENBQUo7QUFBQSxLQUF2QjtBQUNELEdBRkQsTUFFTyxJQUFJTixLQUFLLEtBQUssSUFBVixJQUFrQixRQUFPQSxLQUFQLE1BQWlCLFFBQXZDLEVBQWlEO0FBQ3REUSxJQUFBQSxNQUFNLENBQUNDLElBQVAsQ0FBWVQsS0FBWixFQUFtQkssT0FBbkIsQ0FBMkIsVUFBQUssR0FBRztBQUFBLGFBQUlWLEtBQUssQ0FBQ1UsR0FBRCxDQUFMLElBQWNULEdBQUcsQ0FBQ00sR0FBSixDQUFRRyxHQUFSLENBQWxCO0FBQUEsS0FBOUI7QUFDRCxHQUZNLE1BRUE7QUFDTFQsSUFBQUEsR0FBRyxDQUFDTSxHQUFKLENBQVFQLEtBQVI7QUFDRDs7QUFFRCxTQUFPQyxHQUFQO0FBQ0Q7O0FBRUQsSUFBTVUsUUFBUSxHQUFHLElBQUlDLE9BQUosRUFBakI7QUFFQSxlQUFlLFNBQVNDLGdCQUFULENBQTBCQyxJQUExQixFQUFnQ0MsTUFBaEMsRUFBd0NmLEtBQXhDLEVBQStDO0FBQzVELE1BQU1nQixZQUFZLEdBQUdMLFFBQVEsQ0FBQ00sR0FBVCxDQUFhRixNQUFiLEtBQXdCLElBQUliLEdBQUosRUFBN0M7QUFDQSxNQUFNZ0IsSUFBSSxHQUFHbkIsY0FBYyxDQUFDQyxLQUFELENBQTNCO0FBRUFXLEVBQUFBLFFBQVEsQ0FBQ1YsR0FBVCxDQUFhYyxNQUFiLEVBQXFCRyxJQUFyQjtBQUVBQSxFQUFBQSxJQUFJLENBQUNiLE9BQUwsQ0FBYSxVQUFBQyxTQUFTLEVBQUk7QUFDeEJTLElBQUFBLE1BQU0sQ0FBQ0ksU0FBUCxDQUFpQlosR0FBakIsQ0FBcUJELFNBQXJCO0FBQ0FVLElBQUFBLFlBQVksQ0FBQ0ksTUFBYixDQUFvQmQsU0FBcEI7QUFDRCxHQUhEO0FBS0FVLEVBQUFBLFlBQVksQ0FBQ1gsT0FBYixDQUFxQixVQUFBQyxTQUFTLEVBQUk7QUFDaENTLElBQUFBLE1BQU0sQ0FBQ0ksU0FBUCxDQUFpQkUsTUFBakIsQ0FBd0JmLFNBQXhCO0FBQ0QsR0FGRDtBQUdEIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUsIHNldCA9IG5ldyBTZXQoKSkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB2YWx1ZS5mb3JFYWNoKGNsYXNzTmFtZSA9PiBzZXQuYWRkKGNsYXNzTmFtZSkpO1xuICB9IGVsc2UgaWYgKHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKGtleSA9PiB2YWx1ZVtrZXldICYmIHNldC5hZGQoa2V5KSk7XG4gIH0gZWxzZSB7XG4gICAgc2V0LmFkZCh2YWx1ZSk7XG4gIH1cblxuICByZXR1cm4gc2V0O1xufVxuXG5jb25zdCBjbGFzc01hcCA9IG5ldyBXZWFrTWFwKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlc29sdmVDbGFzc0xpc3QoaG9zdCwgdGFyZ2V0LCB2YWx1ZSkge1xuICBjb25zdCBwcmV2aW91c0xpc3QgPSBjbGFzc01hcC5nZXQodGFyZ2V0KSB8fCBuZXcgU2V0KCk7XG4gIGNvbnN0IGxpc3QgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSk7XG5cbiAgY2xhc3NNYXAuc2V0KHRhcmdldCwgbGlzdCk7XG5cbiAgbGlzdC5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICBwcmV2aW91c0xpc3QuZGVsZXRlKGNsYXNzTmFtZSk7XG4gIH0pO1xuXG4gIHByZXZpb3VzTGlzdC5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgfSk7XG59XG4iXX0=","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { camelToDash, stringifyElement } from \"../../utils.js\";\nvar styleMap = new WeakMap();\nexport default function resolveStyle(host, target, value) {\n  if (value === null || _typeof(value) !== \"object\") {\n    throw TypeError(\"Style value must be an object in \".concat(stringifyElement(target), \":\"), value);\n  }\n\n  var previousMap = styleMap.get(target) || new Map();\n  var nextMap = Object.keys(value).reduce(function (map, key) {\n    var dashKey = camelToDash(key);\n    var styleValue = value[key];\n\n    if (!styleValue && styleValue !== 0) {\n      target.style.removeProperty(dashKey);\n    } else {\n      target.style.setProperty(dashKey, styleValue);\n    }\n\n    map.set(dashKey, styleValue);\n    previousMap.delete(dashKey);\n    return map;\n  }, new Map());\n  previousMap.forEach(function (styleValue, key) {\n    target.style[key] = \"\";\n  });\n  styleMap.set(target, nextMap);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZW1wbGF0ZS9yZXNvbHZlcnMvc3R5bGUuanMiXSwibmFtZXMiOlsiY2FtZWxUb0Rhc2giLCJzdHJpbmdpZnlFbGVtZW50Iiwic3R5bGVNYXAiLCJXZWFrTWFwIiwicmVzb2x2ZVN0eWxlIiwiaG9zdCIsInRhcmdldCIsInZhbHVlIiwiVHlwZUVycm9yIiwicHJldmlvdXNNYXAiLCJnZXQiLCJNYXAiLCJuZXh0TWFwIiwiT2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsIm1hcCIsImtleSIsImRhc2hLZXkiLCJzdHlsZVZhbHVlIiwic3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsInNldFByb3BlcnR5Iiwic2V0IiwiZGVsZXRlIiwiZm9yRWFjaCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxTQUFTQSxXQUFULEVBQXNCQyxnQkFBdEIsUUFBOEMsZ0JBQTlDO0FBRUEsSUFBTUMsUUFBUSxHQUFHLElBQUlDLE9BQUosRUFBakI7QUFFQSxlQUFlLFNBQVNDLFlBQVQsQ0FBc0JDLElBQXRCLEVBQTRCQyxNQUE1QixFQUFvQ0MsS0FBcEMsRUFBMkM7QUFDeEQsTUFBSUEsS0FBSyxLQUFLLElBQVYsSUFBa0IsUUFBT0EsS0FBUCxNQUFpQixRQUF2QyxFQUFpRDtBQUMvQyxVQUFNQyxTQUFTLDRDQUN1QlAsZ0JBQWdCLENBQUNLLE1BQUQsQ0FEdkMsUUFFYkMsS0FGYSxDQUFmO0FBSUQ7O0FBRUQsTUFBTUUsV0FBVyxHQUFHUCxRQUFRLENBQUNRLEdBQVQsQ0FBYUosTUFBYixLQUF3QixJQUFJSyxHQUFKLEVBQTVDO0FBRUEsTUFBTUMsT0FBTyxHQUFHQyxNQUFNLENBQUNDLElBQVAsQ0FBWVAsS0FBWixFQUFtQlEsTUFBbkIsQ0FBMEIsVUFBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFDdEQsUUFBTUMsT0FBTyxHQUFHbEIsV0FBVyxDQUFDaUIsR0FBRCxDQUEzQjtBQUNBLFFBQU1FLFVBQVUsR0FBR1osS0FBSyxDQUFDVSxHQUFELENBQXhCOztBQUVBLFFBQUksQ0FBQ0UsVUFBRCxJQUFlQSxVQUFVLEtBQUssQ0FBbEMsRUFBcUM7QUFDbkNiLE1BQUFBLE1BQU0sQ0FBQ2MsS0FBUCxDQUFhQyxjQUFiLENBQTRCSCxPQUE1QjtBQUNELEtBRkQsTUFFTztBQUNMWixNQUFBQSxNQUFNLENBQUNjLEtBQVAsQ0FBYUUsV0FBYixDQUF5QkosT0FBekIsRUFBa0NDLFVBQWxDO0FBQ0Q7O0FBRURILElBQUFBLEdBQUcsQ0FBQ08sR0FBSixDQUFRTCxPQUFSLEVBQWlCQyxVQUFqQjtBQUNBVixJQUFBQSxXQUFXLENBQUNlLE1BQVosQ0FBbUJOLE9BQW5CO0FBRUEsV0FBT0YsR0FBUDtBQUNELEdBZGUsRUFjYixJQUFJTCxHQUFKLEVBZGEsQ0FBaEI7QUFnQkFGLEVBQUFBLFdBQVcsQ0FBQ2dCLE9BQVosQ0FBb0IsVUFBQ04sVUFBRCxFQUFhRixHQUFiLEVBQXFCO0FBQ3ZDWCxJQUFBQSxNQUFNLENBQUNjLEtBQVAsQ0FBYUgsR0FBYixJQUFvQixFQUFwQjtBQUNELEdBRkQ7QUFJQWYsRUFBQUEsUUFBUSxDQUFDcUIsR0FBVCxDQUFhakIsTUFBYixFQUFxQk0sT0FBckI7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNhbWVsVG9EYXNoLCBzdHJpbmdpZnlFbGVtZW50IH0gZnJvbSBcIi4uLy4uL3V0aWxzLmpzXCI7XG5cbmNvbnN0IHN0eWxlTWFwID0gbmV3IFdlYWtNYXAoKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVzb2x2ZVN0eWxlKGhvc3QsIHRhcmdldCwgdmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIikge1xuICAgIHRocm93IFR5cGVFcnJvcihcbiAgICAgIGBTdHlsZSB2YWx1ZSBtdXN0IGJlIGFuIG9iamVjdCBpbiAke3N0cmluZ2lmeUVsZW1lbnQodGFyZ2V0KX06YCxcbiAgICAgIHZhbHVlLFxuICAgICk7XG4gIH1cblxuICBjb25zdCBwcmV2aW91c01hcCA9IHN0eWxlTWFwLmdldCh0YXJnZXQpIHx8IG5ldyBNYXAoKTtcblxuICBjb25zdCBuZXh0TWFwID0gT2JqZWN0LmtleXModmFsdWUpLnJlZHVjZSgobWFwLCBrZXkpID0+IHtcbiAgICBjb25zdCBkYXNoS2V5ID0gY2FtZWxUb0Rhc2goa2V5KTtcbiAgICBjb25zdCBzdHlsZVZhbHVlID0gdmFsdWVba2V5XTtcblxuICAgIGlmICghc3R5bGVWYWx1ZSAmJiBzdHlsZVZhbHVlICE9PSAwKSB7XG4gICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoZGFzaEtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5zdHlsZS5zZXRQcm9wZXJ0eShkYXNoS2V5LCBzdHlsZVZhbHVlKTtcbiAgICB9XG5cbiAgICBtYXAuc2V0KGRhc2hLZXksIHN0eWxlVmFsdWUpO1xuICAgIHByZXZpb3VzTWFwLmRlbGV0ZShkYXNoS2V5KTtcblxuICAgIHJldHVybiBtYXA7XG4gIH0sIG5ldyBNYXAoKSk7XG5cbiAgcHJldmlvdXNNYXAuZm9yRWFjaCgoc3R5bGVWYWx1ZSwga2V5KSA9PiB7XG4gICAgdGFyZ2V0LnN0eWxlW2tleV0gPSBcIlwiO1xuICB9KTtcblxuICBzdHlsZU1hcC5zZXQodGFyZ2V0LCBuZXh0TWFwKTtcbn1cbiJdfQ==","import resolveEventListener from \"./event.js\";\nimport resolveClassList from \"./class.js\";\nimport resolveStyleList from \"./style.js\";\nexport default function resolveProperty(attrName, propertyName, isSVG) {\n  if (propertyName.substr(0, 2) === \"on\") {\n    var eventType = propertyName.substr(2);\n    return resolveEventListener(eventType);\n  }\n\n  switch (attrName) {\n    case \"class\":\n      return resolveClassList;\n\n    case \"style\":\n      return resolveStyleList;\n\n    default:\n      return function (host, target, value) {\n        if (!isSVG && !(target instanceof SVGElement) && propertyName in target) {\n          if (target[propertyName] !== value) {\n            target[propertyName] = value;\n          }\n        } else if (value === false || value === undefined || value === null) {\n          target.removeAttribute(attrName);\n        } else {\n          var attrValue = value === true ? \"\" : String(value);\n          target.setAttribute(attrName, attrValue);\n        }\n      };\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZW1wbGF0ZS9yZXNvbHZlcnMvcHJvcGVydHkuanMiXSwibmFtZXMiOlsicmVzb2x2ZUV2ZW50TGlzdGVuZXIiLCJyZXNvbHZlQ2xhc3NMaXN0IiwicmVzb2x2ZVN0eWxlTGlzdCIsInJlc29sdmVQcm9wZXJ0eSIsImF0dHJOYW1lIiwicHJvcGVydHlOYW1lIiwiaXNTVkciLCJzdWJzdHIiLCJldmVudFR5cGUiLCJob3N0IiwidGFyZ2V0IiwidmFsdWUiLCJTVkdFbGVtZW50IiwidW5kZWZpbmVkIiwicmVtb3ZlQXR0cmlidXRlIiwiYXR0clZhbHVlIiwiU3RyaW5nIiwic2V0QXR0cmlidXRlIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxvQkFBUCxNQUFpQyxZQUFqQztBQUNBLE9BQU9DLGdCQUFQLE1BQTZCLFlBQTdCO0FBQ0EsT0FBT0MsZ0JBQVAsTUFBNkIsWUFBN0I7QUFFQSxlQUFlLFNBQVNDLGVBQVQsQ0FBeUJDLFFBQXpCLEVBQW1DQyxZQUFuQyxFQUFpREMsS0FBakQsRUFBd0Q7QUFDckUsTUFBSUQsWUFBWSxDQUFDRSxNQUFiLENBQW9CLENBQXBCLEVBQXVCLENBQXZCLE1BQThCLElBQWxDLEVBQXdDO0FBQ3RDLFFBQU1DLFNBQVMsR0FBR0gsWUFBWSxDQUFDRSxNQUFiLENBQW9CLENBQXBCLENBQWxCO0FBQ0EsV0FBT1Asb0JBQW9CLENBQUNRLFNBQUQsQ0FBM0I7QUFDRDs7QUFFRCxVQUFRSixRQUFSO0FBQ0UsU0FBSyxPQUFMO0FBQ0UsYUFBT0gsZ0JBQVA7O0FBQ0YsU0FBSyxPQUFMO0FBQ0UsYUFBT0MsZ0JBQVA7O0FBQ0Y7QUFDRSxhQUFPLFVBQUNPLElBQUQsRUFBT0MsTUFBUCxFQUFlQyxLQUFmLEVBQXlCO0FBQzlCLFlBQ0UsQ0FBQ0wsS0FBRCxJQUNBLEVBQUVJLE1BQU0sWUFBWUUsVUFBcEIsQ0FEQSxJQUVBUCxZQUFZLElBQUlLLE1BSGxCLEVBSUU7QUFDQSxjQUFJQSxNQUFNLENBQUNMLFlBQUQsQ0FBTixLQUF5Qk0sS0FBN0IsRUFBb0M7QUFDbENELFlBQUFBLE1BQU0sQ0FBQ0wsWUFBRCxDQUFOLEdBQXVCTSxLQUF2QjtBQUNEO0FBQ0YsU0FSRCxNQVFPLElBQUlBLEtBQUssS0FBSyxLQUFWLElBQW1CQSxLQUFLLEtBQUtFLFNBQTdCLElBQTBDRixLQUFLLEtBQUssSUFBeEQsRUFBOEQ7QUFDbkVELFVBQUFBLE1BQU0sQ0FBQ0ksZUFBUCxDQUF1QlYsUUFBdkI7QUFDRCxTQUZNLE1BRUE7QUFDTCxjQUFNVyxTQUFTLEdBQUdKLEtBQUssS0FBSyxJQUFWLEdBQWlCLEVBQWpCLEdBQXNCSyxNQUFNLENBQUNMLEtBQUQsQ0FBOUM7QUFDQUQsVUFBQUEsTUFBTSxDQUFDTyxZQUFQLENBQW9CYixRQUFwQixFQUE4QlcsU0FBOUI7QUFDRDtBQUNGLE9BZkQ7QUFOSjtBQXVCRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByZXNvbHZlRXZlbnRMaXN0ZW5lciBmcm9tIFwiLi9ldmVudC5qc1wiO1xuaW1wb3J0IHJlc29sdmVDbGFzc0xpc3QgZnJvbSBcIi4vY2xhc3MuanNcIjtcbmltcG9ydCByZXNvbHZlU3R5bGVMaXN0IGZyb20gXCIuL3N0eWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlc29sdmVQcm9wZXJ0eShhdHRyTmFtZSwgcHJvcGVydHlOYW1lLCBpc1NWRykge1xuICBpZiAocHJvcGVydHlOYW1lLnN1YnN0cigwLCAyKSA9PT0gXCJvblwiKSB7XG4gICAgY29uc3QgZXZlbnRUeXBlID0gcHJvcGVydHlOYW1lLnN1YnN0cigyKTtcbiAgICByZXR1cm4gcmVzb2x2ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlKTtcbiAgfVxuXG4gIHN3aXRjaCAoYXR0ck5hbWUpIHtcbiAgICBjYXNlIFwiY2xhc3NcIjpcbiAgICAgIHJldHVybiByZXNvbHZlQ2xhc3NMaXN0O1xuICAgIGNhc2UgXCJzdHlsZVwiOlxuICAgICAgcmV0dXJuIHJlc29sdmVTdHlsZUxpc3Q7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAoaG9zdCwgdGFyZ2V0LCB2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIWlzU1ZHICYmXG4gICAgICAgICAgISh0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSAmJlxuICAgICAgICAgIHByb3BlcnR5TmFtZSBpbiB0YXJnZXRcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHRhcmdldFtwcm9wZXJ0eU5hbWVdICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGFyZ2V0W3Byb3BlcnR5TmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKGF0dHJOYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSB2YWx1ZSA9PT0gdHJ1ZSA/IFwiXCIgOiBTdHJpbmcodmFsdWUpO1xuICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIGF0dHJWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gIH1cbn1cbiJdfQ==","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { stringifyElement, shadyCSS, IS_IE } from \"../utils.js\";\nimport { dataMap, removeTemplate } from \"./utils.js\";\nimport resolveValue from \"./resolvers/value.js\";\nimport resolveProperty from \"./resolvers/property.js\";\n/* istanbul ignore next */\n\ntry {\n  process.env.NODE_ENV;\n} catch (e) {\n  var process = {\n    env: {\n      NODE_ENV: 'production'\n    }\n  };\n} // eslint-disable-line\n\n\nvar TIMESTAMP = Date.now();\nexport var getPlaceholder = function getPlaceholder() {\n  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return \"{{h-\".concat(TIMESTAMP, \"-\").concat(id, \"}}\");\n};\nvar PLACEHOLDER_REGEXP_TEXT = getPlaceholder(\"(\\\\d+)\");\nvar PLACEHOLDER_REGEXP_EQUAL = new RegExp(\"^\".concat(PLACEHOLDER_REGEXP_TEXT, \"$\"));\nvar PLACEHOLDER_REGEXP_ALL = new RegExp(PLACEHOLDER_REGEXP_TEXT, \"g\");\nvar ATTR_PREFIX = \"--\".concat(TIMESTAMP, \"--\");\nvar ATTR_REGEXP = new RegExp(ATTR_PREFIX, \"g\");\nvar preparedTemplates = new WeakMap();\n/* istanbul ignore next */\n\nfunction applyShadyCSS(template, tagName) {\n  if (!tagName) return template;\n  return shadyCSS(function (shady) {\n    var map = preparedTemplates.get(template);\n\n    if (!map) {\n      map = new Map();\n      preparedTemplates.set(template, map);\n    }\n\n    var clone = map.get(tagName);\n\n    if (!clone) {\n      clone = document.createElement(\"template\");\n      clone.content.appendChild(template.content.cloneNode(true));\n      map.set(tagName, clone);\n      var styles = clone.content.querySelectorAll(\"style\");\n      Array.from(styles).forEach(function (style) {\n        var count = style.childNodes.length + 1;\n\n        for (var i = 0; i < count; i += 1) {\n          style.parentNode.insertBefore(document.createTextNode(getPlaceholder()), style);\n        }\n      });\n      shady.prepareTemplate(clone, tagName.toLowerCase());\n    }\n\n    return clone;\n  }, template);\n}\n\nfunction createSignature(parts, styles) {\n  var signature = parts.reduce(function (acc, part, index) {\n    if (index === 0) {\n      return part;\n    }\n\n    if (parts.slice(index).join(\"\").match(/^\\s*<\\/\\s*(table|tr|thead|tbody|tfoot|colgroup)>/)) {\n      return \"\".concat(acc, \"<!--\").concat(getPlaceholder(index - 1), \"-->\").concat(part);\n    }\n\n    return acc + getPlaceholder(index - 1) + part;\n  }, \"\");\n\n  if (styles) {\n    signature += \"<style>\\n\".concat(styles.join(\"\\n/*------*/\\n\"), \"\\n</style>\");\n  }\n  /* istanbul ignore if */\n\n\n  if (IS_IE) {\n    return signature.replace(/style\\s*=\\s*([\"][^\"]+[\"]|['][^']+[']|[^\\s\"'<>/]+)/g, function (match) {\n      return \"\".concat(ATTR_PREFIX).concat(match);\n    });\n  }\n\n  return signature;\n}\n\nfunction getPropertyName(string) {\n  return string.replace(/\\s*=\\s*['\"]*$/g, \"\").split(/\\s+/).pop();\n}\n\nfunction replaceComments(fragment) {\n  var iterator = document.createNodeIterator(fragment, NodeFilter.SHOW_COMMENT, null, false);\n  var node; // eslint-disable-next-line no-cond-assign\n\n  while (node = iterator.nextNode()) {\n    if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n      node.parentNode.insertBefore(document.createTextNode(node.textContent), node);\n      node.parentNode.removeChild(node);\n    }\n  }\n}\n\nexport function createInternalWalker(context) {\n  var node;\n  return {\n    get currentNode() {\n      return node;\n    },\n\n    nextNode: function nextNode() {\n      if (node === undefined) {\n        node = context.childNodes[0];\n      } else if (node.childNodes.length) {\n        node = node.childNodes[0];\n      } else if (node.nextSibling) {\n        node = node.nextSibling;\n      } else {\n        var parentNode = node.parentNode;\n        node = parentNode.nextSibling;\n\n        while (!node && parentNode !== context) {\n          parentNode = parentNode.parentNode;\n          node = parentNode.nextSibling;\n        }\n      }\n\n      return !!node;\n    }\n  };\n}\n\nfunction createExternalWalker(context) {\n  return document.createTreeWalker(context, // eslint-disable-next-line no-bitwise\n  NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT, null, false);\n}\n/* istanbul ignore next */\n\n\nvar createWalker = _typeof(window.ShadyDOM) === \"object\" && window.ShadyDOM.inUse ? createInternalWalker : createExternalWalker;\nvar container = document.createElement(\"div\");\nvar styleSheetsMap = new Map();\n\nfunction normalizeWhitespace(input) {\n  var startIndent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  input = input.replace(/(^[\\n\\s\\t ]+)|([\\n\\s\\t ]+$)+/g, \"\");\n  var i = input.indexOf(\"\\n\");\n\n  if (i > -1) {\n    var indent = 0 - startIndent - 2;\n\n    for (i += 1; input[i] === \" \" && i < input.length; i += 1) {\n      indent += 1;\n    }\n\n    return input.replace(/\\n +/g, function (t) {\n      return t.substr(0, Math.max(t.length - indent, 1));\n    });\n  }\n\n  return input;\n}\n\nfunction beautifyTemplateLog(input, index) {\n  var placeholder = getPlaceholder(index);\n  var output = normalizeWhitespace(input).split(\"\\n\").filter(function (i) {\n    return i;\n  }).map(function (line) {\n    var startIndex = line.indexOf(placeholder);\n\n    if (startIndex > -1) {\n      return \"| \".concat(line, \"\\n--\").concat(\"-\".repeat(startIndex)).concat(\"^\".repeat(6));\n    }\n\n    return \"| \".concat(line);\n  }).join(\"\\n\") // eslint-disable-next-line no-template-curly-in-string\n  .replace(PLACEHOLDER_REGEXP_ALL, \"${...}\");\n  return \"\".concat(output);\n}\n\nexport function compileTemplate(rawParts, isSVG, styles) {\n  var template = document.createElement(\"template\");\n  var parts = [];\n  var signature = createSignature(rawParts, styles);\n  if (isSVG) signature = \"<svg>\".concat(signature, \"</svg>\");\n  /* istanbul ignore if */\n\n  if (IS_IE) {\n    template.innerHTML = signature;\n  } else {\n    container.innerHTML = \"<template>\".concat(signature, \"</template>\");\n    template.content.appendChild(container.children[0].content);\n  }\n\n  if (isSVG) {\n    var svgRoot = template.content.firstChild;\n    template.content.removeChild(svgRoot);\n    Array.from(svgRoot.childNodes).forEach(function (node) {\n      return template.content.appendChild(node);\n    });\n  }\n\n  replaceComments(template.content);\n  var compileWalker = createWalker(template.content);\n  var compileIndex = 0;\n\n  var _loop = function _loop() {\n    var node = compileWalker.currentNode;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n      var text = node.textContent;\n\n      if (!text.match(PLACEHOLDER_REGEXP_EQUAL)) {\n        var results = text.match(PLACEHOLDER_REGEXP_ALL);\n\n        if (results) {\n          var currentNode = node;\n          results.reduce(function (acc, placeholder) {\n            var _acc$pop$split = acc.pop().split(placeholder),\n                _acc$pop$split2 = _slicedToArray(_acc$pop$split, 2),\n                before = _acc$pop$split2[0],\n                next = _acc$pop$split2[1];\n\n            if (before) acc.push(before);\n            acc.push(placeholder);\n            if (next) acc.push(next);\n            return acc;\n          }, [text]).forEach(function (part, index) {\n            if (index === 0) {\n              currentNode.textContent = part;\n            } else {\n              currentNode = currentNode.parentNode.insertBefore(document.createTextNode(part), currentNode.nextSibling);\n            }\n          });\n        }\n      }\n\n      var equal = node.textContent.match(PLACEHOLDER_REGEXP_EQUAL);\n\n      if (equal) {\n        /* istanbul ignore else */\n        if (!IS_IE) node.textContent = \"\";\n        parts[equal[1]] = [compileIndex, resolveValue];\n      }\n    } else {\n      /* istanbul ignore else */\n      // eslint-disable-next-line no-lonely-if\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        Array.from(node.attributes).forEach(function (attr) {\n          var value = attr.value.trim();\n          /* istanbul ignore next */\n\n          var name = IS_IE ? attr.name.replace(ATTR_PREFIX, \"\") : attr.name;\n          var equal = value.match(PLACEHOLDER_REGEXP_EQUAL);\n\n          if (equal) {\n            var propertyName = getPropertyName(rawParts[equal[1]]);\n            parts[equal[1]] = [compileIndex, resolveProperty(name, propertyName, isSVG)];\n            node.removeAttribute(attr.name);\n          } else {\n            var _results = value.match(PLACEHOLDER_REGEXP_ALL);\n\n            if (_results) {\n              var partialName = \"attr__\".concat(name);\n\n              _results.forEach(function (placeholder, index) {\n                var _placeholder$match = placeholder.match(PLACEHOLDER_REGEXP_EQUAL),\n                    _placeholder$match2 = _slicedToArray(_placeholder$match, 2),\n                    id = _placeholder$match2[1];\n\n                parts[id] = [compileIndex, function (host, target, attrValue) {\n                  var data = dataMap.get(target, {});\n                  data[partialName] = (data[partialName] || value).replace(placeholder, attrValue == null ? \"\" : attrValue);\n\n                  if (_results.length === 1 || index + 1 === _results.length) {\n                    target.setAttribute(name, data[partialName]);\n                    data[partialName] = undefined;\n                  }\n                }];\n              });\n\n              attr.value = \"\";\n              /* istanbul ignore next */\n\n              if (IS_IE && name !== attr.name) {\n                node.removeAttribute(attr.name);\n                node.setAttribute(name, \"\");\n              }\n            }\n          }\n        });\n      }\n    }\n\n    compileIndex += 1;\n  };\n\n  while (compileWalker.nextNode()) {\n    _loop();\n  }\n\n  return function updateTemplateInstance(host, target, args, styleSheets) {\n    var data = dataMap.get(target, {\n      type: \"function\"\n    });\n\n    if (template !== data.template) {\n      if (data.template || target.nodeType === Node.ELEMENT_NODE) {\n        removeTemplate(target);\n      }\n\n      data.prevArgs = null;\n      var fragment = document.importNode(applyShadyCSS(template, host.tagName).content, true);\n      var renderWalker = createWalker(fragment);\n      var clonedParts = parts.slice(0);\n      var renderIndex = 0;\n      var currentPart = clonedParts.shift();\n      var markers = [];\n      data.template = template;\n      data.markers = markers;\n\n      while (renderWalker.nextNode()) {\n        var node = renderWalker.currentNode;\n\n        if (node.nodeType === Node.TEXT_NODE) {\n          /* istanbul ignore next */\n          if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n            node.textContent = \"\";\n          } else if (IS_IE) {\n            node.textContent = node.textContent.replace(ATTR_REGEXP, \"\");\n          }\n        } else if (process.env.NODE_ENV !== \"production\" && node.nodeType === Node.ELEMENT_NODE) {\n          if (node.tagName.indexOf(\"-\") > -1 && !customElements.get(node.tagName.toLowerCase())) {\n            throw Error(\"Missing \".concat(stringifyElement(node), \" element definition in \").concat(stringifyElement(host)));\n          }\n        }\n\n        while (currentPart && currentPart[0] === renderIndex) {\n          markers.push([node, currentPart[1]]);\n          currentPart = clonedParts.shift();\n        }\n\n        renderIndex += 1;\n      }\n\n      if (target.nodeType === Node.TEXT_NODE) {\n        data.startNode = fragment.childNodes[0];\n        data.endNode = fragment.childNodes[fragment.childNodes.length - 1];\n        var previousChild = target;\n        var child = fragment.childNodes[0];\n\n        while (child) {\n          target.parentNode.insertBefore(child, previousChild.nextSibling);\n          previousChild = child;\n          child = fragment.childNodes[0];\n        }\n      } else {\n        target.appendChild(fragment);\n      }\n    }\n\n    var adoptedStyleSheets = target.adoptedStyleSheets;\n\n    if (styleSheets) {\n      var isEqual = false;\n      styleSheets = styleSheets.map(function (style) {\n        if (style instanceof CSSStyleSheet) return style;\n        var styleSheet = styleSheetsMap.get(style);\n\n        if (!styleSheet) {\n          styleSheet = new CSSStyleSheet();\n          styleSheet.replaceSync(style);\n          styleSheetsMap.set(style, styleSheet);\n        }\n\n        return styleSheet;\n      });\n\n      if (styleSheets.length === adoptedStyleSheets.length) {\n        isEqual = true;\n\n        for (var i = 0; i < styleSheets.length; i += 1) {\n          if (styleSheets[i] !== adoptedStyleSheets[i]) {\n            isEqual = false;\n            break;\n          }\n        }\n      }\n\n      if (!isEqual) target.adoptedStyleSheets = styleSheets;\n    } else if (adoptedStyleSheets && adoptedStyleSheets.length) {\n      target.adoptedStyleSheets = [];\n    }\n\n    var prevArgs = data.prevArgs;\n    data.prevArgs = args;\n\n    for (var index = 0; index < data.markers.length; index += 1) {\n      var _data$markers$index = _slicedToArray(data.markers[index], 2),\n          _node = _data$markers$index[0],\n          marker = _data$markers$index[1];\n\n      if (!prevArgs || prevArgs[index] !== args[index]) {\n        try {\n          marker(host, _node, args[index], prevArgs ? prevArgs[index] : undefined);\n        } catch (error) {\n          if (process.env.NODE_ENV !== \"production\") {\n            // eslint-disable-next-line no-console\n            console.error(\"Following error was thrown when updating a template expression in \".concat(stringifyElement(host), \"\\n\").concat(beautifyTemplateLog(signature, index)));\n          }\n\n          throw error;\n        }\n      }\n    }\n\n    if (target.nodeType !== Node.TEXT_NODE) {\n      shadyCSS(function (shady) {\n        if (host.shadowRoot) {\n          if (prevArgs) {\n            shady.styleSubtree(host);\n          } else {\n            shady.styleElement(host);\n          }\n        }\n      });\n    }\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZW1wbGF0ZS9jb3JlLmpzIl0sIm5hbWVzIjpbInN0cmluZ2lmeUVsZW1lbnQiLCJzaGFkeUNTUyIsIklTX0lFIiwiZGF0YU1hcCIsInJlbW92ZVRlbXBsYXRlIiwicmVzb2x2ZVZhbHVlIiwicmVzb2x2ZVByb3BlcnR5IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiZSIsIlRJTUVTVEFNUCIsIkRhdGUiLCJub3ciLCJnZXRQbGFjZWhvbGRlciIsImlkIiwiUExBQ0VIT0xERVJfUkVHRVhQX1RFWFQiLCJQTEFDRUhPTERFUl9SRUdFWFBfRVFVQUwiLCJSZWdFeHAiLCJQTEFDRUhPTERFUl9SRUdFWFBfQUxMIiwiQVRUUl9QUkVGSVgiLCJBVFRSX1JFR0VYUCIsInByZXBhcmVkVGVtcGxhdGVzIiwiV2Vha01hcCIsImFwcGx5U2hhZHlDU1MiLCJ0ZW1wbGF0ZSIsInRhZ05hbWUiLCJzaGFkeSIsIm1hcCIsImdldCIsIk1hcCIsInNldCIsImNsb25lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY29udGVudCIsImFwcGVuZENoaWxkIiwiY2xvbmVOb2RlIiwic3R5bGVzIiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5IiwiZnJvbSIsImZvckVhY2giLCJzdHlsZSIsImNvdW50IiwiY2hpbGROb2RlcyIsImxlbmd0aCIsImkiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiY3JlYXRlVGV4dE5vZGUiLCJwcmVwYXJlVGVtcGxhdGUiLCJ0b0xvd2VyQ2FzZSIsImNyZWF0ZVNpZ25hdHVyZSIsInBhcnRzIiwic2lnbmF0dXJlIiwicmVkdWNlIiwiYWNjIiwicGFydCIsImluZGV4Iiwic2xpY2UiLCJqb2luIiwibWF0Y2giLCJyZXBsYWNlIiwiZ2V0UHJvcGVydHlOYW1lIiwic3RyaW5nIiwic3BsaXQiLCJwb3AiLCJyZXBsYWNlQ29tbWVudHMiLCJmcmFnbWVudCIsIml0ZXJhdG9yIiwiY3JlYXRlTm9kZUl0ZXJhdG9yIiwiTm9kZUZpbHRlciIsIlNIT1dfQ09NTUVOVCIsIm5vZGUiLCJuZXh0Tm9kZSIsInRlc3QiLCJ0ZXh0Q29udGVudCIsInJlbW92ZUNoaWxkIiwiY3JlYXRlSW50ZXJuYWxXYWxrZXIiLCJjb250ZXh0IiwiY3VycmVudE5vZGUiLCJ1bmRlZmluZWQiLCJuZXh0U2libGluZyIsImNyZWF0ZUV4dGVybmFsV2Fsa2VyIiwiY3JlYXRlVHJlZVdhbGtlciIsIlNIT1dfRUxFTUVOVCIsIlNIT1dfVEVYVCIsImNyZWF0ZVdhbGtlciIsIndpbmRvdyIsIlNoYWR5RE9NIiwiaW5Vc2UiLCJjb250YWluZXIiLCJzdHlsZVNoZWV0c01hcCIsIm5vcm1hbGl6ZVdoaXRlc3BhY2UiLCJpbnB1dCIsInN0YXJ0SW5kZW50IiwiaW5kZXhPZiIsImluZGVudCIsInQiLCJzdWJzdHIiLCJNYXRoIiwibWF4IiwiYmVhdXRpZnlUZW1wbGF0ZUxvZyIsInBsYWNlaG9sZGVyIiwib3V0cHV0IiwiZmlsdGVyIiwibGluZSIsInN0YXJ0SW5kZXgiLCJyZXBlYXQiLCJjb21waWxlVGVtcGxhdGUiLCJyYXdQYXJ0cyIsImlzU1ZHIiwiaW5uZXJIVE1MIiwiY2hpbGRyZW4iLCJzdmdSb290IiwiZmlyc3RDaGlsZCIsImNvbXBpbGVXYWxrZXIiLCJjb21waWxlSW5kZXgiLCJub2RlVHlwZSIsIk5vZGUiLCJURVhUX05PREUiLCJ0ZXh0IiwicmVzdWx0cyIsImJlZm9yZSIsIm5leHQiLCJwdXNoIiwiZXF1YWwiLCJFTEVNRU5UX05PREUiLCJhdHRyaWJ1dGVzIiwiYXR0ciIsInZhbHVlIiwidHJpbSIsIm5hbWUiLCJwcm9wZXJ0eU5hbWUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwYXJ0aWFsTmFtZSIsImhvc3QiLCJ0YXJnZXQiLCJhdHRyVmFsdWUiLCJkYXRhIiwic2V0QXR0cmlidXRlIiwidXBkYXRlVGVtcGxhdGVJbnN0YW5jZSIsImFyZ3MiLCJzdHlsZVNoZWV0cyIsInR5cGUiLCJwcmV2QXJncyIsImltcG9ydE5vZGUiLCJyZW5kZXJXYWxrZXIiLCJjbG9uZWRQYXJ0cyIsInJlbmRlckluZGV4IiwiY3VycmVudFBhcnQiLCJzaGlmdCIsIm1hcmtlcnMiLCJjdXN0b21FbGVtZW50cyIsIkVycm9yIiwic3RhcnROb2RlIiwiZW5kTm9kZSIsInByZXZpb3VzQ2hpbGQiLCJjaGlsZCIsImFkb3B0ZWRTdHlsZVNoZWV0cyIsImlzRXF1YWwiLCJDU1NTdHlsZVNoZWV0Iiwic3R5bGVTaGVldCIsInJlcGxhY2VTeW5jIiwibWFya2VyIiwiZXJyb3IiLCJjb25zb2xlIiwic2hhZG93Um9vdCIsInN0eWxlU3VidHJlZSIsInN0eWxlRWxlbWVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSxTQUFTQSxnQkFBVCxFQUEyQkMsUUFBM0IsRUFBcUNDLEtBQXJDLFFBQWtELGFBQWxEO0FBQ0EsU0FBU0MsT0FBVCxFQUFrQkMsY0FBbEIsUUFBd0MsWUFBeEM7QUFFQSxPQUFPQyxZQUFQLE1BQXlCLHNCQUF6QjtBQUNBLE9BQU9DLGVBQVAsTUFBNEIseUJBQTVCO0FBRUE7O0FBQ0EsSUFBSTtBQUFFQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBWjtBQUFzQixDQUE1QixDQUE2QixPQUFNQyxDQUFOLEVBQVM7QUFBRSxNQUFJSCxPQUFPLEdBQUc7QUFBRUMsSUFBQUEsR0FBRyxFQUFFO0FBQUVDLE1BQUFBLFFBQVEsRUFBRTtBQUFaO0FBQVAsR0FBZDtBQUFvRCxDLENBQUM7OztBQUU3RixJQUFNRSxTQUFTLEdBQUdDLElBQUksQ0FBQ0MsR0FBTCxFQUFsQjtBQUVBLE9BQU8sSUFBTUMsY0FBYyxHQUFHLFNBQWpCQSxjQUFpQjtBQUFBLE1BQUNDLEVBQUQsdUVBQU0sQ0FBTjtBQUFBLHVCQUFtQkosU0FBbkIsY0FBZ0NJLEVBQWhDO0FBQUEsQ0FBdkI7QUFFUCxJQUFNQyx1QkFBdUIsR0FBR0YsY0FBYyxDQUFDLFFBQUQsQ0FBOUM7QUFDQSxJQUFNRyx3QkFBd0IsR0FBRyxJQUFJQyxNQUFKLFlBQWVGLHVCQUFmLE9BQWpDO0FBQ0EsSUFBTUcsc0JBQXNCLEdBQUcsSUFBSUQsTUFBSixDQUFXRix1QkFBWCxFQUFvQyxHQUFwQyxDQUEvQjtBQUVBLElBQU1JLFdBQVcsZUFBUVQsU0FBUixPQUFqQjtBQUNBLElBQU1VLFdBQVcsR0FBRyxJQUFJSCxNQUFKLENBQVdFLFdBQVgsRUFBd0IsR0FBeEIsQ0FBcEI7QUFFQSxJQUFNRSxpQkFBaUIsR0FBRyxJQUFJQyxPQUFKLEVBQTFCO0FBRUE7O0FBQ0EsU0FBU0MsYUFBVCxDQUF1QkMsUUFBdkIsRUFBaUNDLE9BQWpDLEVBQTBDO0FBQ3hDLE1BQUksQ0FBQ0EsT0FBTCxFQUFjLE9BQU9ELFFBQVA7QUFFZCxTQUFPeEIsUUFBUSxDQUFDLFVBQUEwQixLQUFLLEVBQUk7QUFDdkIsUUFBSUMsR0FBRyxHQUFHTixpQkFBaUIsQ0FBQ08sR0FBbEIsQ0FBc0JKLFFBQXRCLENBQVY7O0FBQ0EsUUFBSSxDQUFDRyxHQUFMLEVBQVU7QUFDUkEsTUFBQUEsR0FBRyxHQUFHLElBQUlFLEdBQUosRUFBTjtBQUNBUixNQUFBQSxpQkFBaUIsQ0FBQ1MsR0FBbEIsQ0FBc0JOLFFBQXRCLEVBQWdDRyxHQUFoQztBQUNEOztBQUVELFFBQUlJLEtBQUssR0FBR0osR0FBRyxDQUFDQyxHQUFKLENBQVFILE9BQVIsQ0FBWjs7QUFFQSxRQUFJLENBQUNNLEtBQUwsRUFBWTtBQUNWQSxNQUFBQSxLQUFLLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixVQUF2QixDQUFSO0FBQ0FGLE1BQUFBLEtBQUssQ0FBQ0csT0FBTixDQUFjQyxXQUFkLENBQTBCWCxRQUFRLENBQUNVLE9BQVQsQ0FBaUJFLFNBQWpCLENBQTJCLElBQTNCLENBQTFCO0FBRUFULE1BQUFBLEdBQUcsQ0FBQ0csR0FBSixDQUFRTCxPQUFSLEVBQWlCTSxLQUFqQjtBQUVBLFVBQU1NLE1BQU0sR0FBR04sS0FBSyxDQUFDRyxPQUFOLENBQWNJLGdCQUFkLENBQStCLE9BQS9CLENBQWY7QUFFQUMsTUFBQUEsS0FBSyxDQUFDQyxJQUFOLENBQVdILE1BQVgsRUFBbUJJLE9BQW5CLENBQTJCLFVBQUFDLEtBQUssRUFBSTtBQUNsQyxZQUFNQyxLQUFLLEdBQUdELEtBQUssQ0FBQ0UsVUFBTixDQUFpQkMsTUFBakIsR0FBMEIsQ0FBeEM7O0FBQ0EsYUFBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSCxLQUFwQixFQUEyQkcsQ0FBQyxJQUFJLENBQWhDLEVBQW1DO0FBQ2pDSixVQUFBQSxLQUFLLENBQUNLLFVBQU4sQ0FBaUJDLFlBQWpCLENBQ0VoQixRQUFRLENBQUNpQixjQUFULENBQXdCcEMsY0FBYyxFQUF0QyxDQURGLEVBRUU2QixLQUZGO0FBSUQ7QUFDRixPQVJEO0FBVUFoQixNQUFBQSxLQUFLLENBQUN3QixlQUFOLENBQXNCbkIsS0FBdEIsRUFBNkJOLE9BQU8sQ0FBQzBCLFdBQVIsRUFBN0I7QUFDRDs7QUFDRCxXQUFPcEIsS0FBUDtBQUNELEdBOUJjLEVBOEJaUCxRQTlCWSxDQUFmO0FBK0JEOztBQUVELFNBQVM0QixlQUFULENBQXlCQyxLQUF6QixFQUFnQ2hCLE1BQWhDLEVBQXdDO0FBQ3RDLE1BQUlpQixTQUFTLEdBQUdELEtBQUssQ0FBQ0UsTUFBTixDQUFhLFVBQUNDLEdBQUQsRUFBTUMsSUFBTixFQUFZQyxLQUFaLEVBQXNCO0FBQ2pELFFBQUlBLEtBQUssS0FBSyxDQUFkLEVBQWlCO0FBQ2YsYUFBT0QsSUFBUDtBQUNEOztBQUVELFFBQ0VKLEtBQUssQ0FDRk0sS0FESCxDQUNTRCxLQURULEVBRUdFLElBRkgsQ0FFUSxFQUZSLEVBR0dDLEtBSEgsQ0FHUyxrREFIVCxDQURGLEVBS0U7QUFDQSx1QkFBVUwsR0FBVixpQkFBb0IzQyxjQUFjLENBQUM2QyxLQUFLLEdBQUcsQ0FBVCxDQUFsQyxnQkFBbURELElBQW5EO0FBQ0Q7O0FBQ0QsV0FBT0QsR0FBRyxHQUFHM0MsY0FBYyxDQUFDNkMsS0FBSyxHQUFHLENBQVQsQ0FBcEIsR0FBa0NELElBQXpDO0FBQ0QsR0FkZSxFQWNiLEVBZGEsQ0FBaEI7O0FBZ0JBLE1BQUlwQixNQUFKLEVBQVk7QUFDVmlCLElBQUFBLFNBQVMsdUJBQWdCakIsTUFBTSxDQUFDdUIsSUFBUCxDQUFZLGdCQUFaLENBQWhCLGVBQVQ7QUFDRDtBQUVEOzs7QUFDQSxNQUFJM0QsS0FBSixFQUFXO0FBQ1QsV0FBT3FELFNBQVMsQ0FBQ1EsT0FBVixDQUNMLG9EQURLLEVBRUwsVUFBQUQsS0FBSztBQUFBLHVCQUFPMUMsV0FBUCxTQUFxQjBDLEtBQXJCO0FBQUEsS0FGQSxDQUFQO0FBSUQ7O0FBRUQsU0FBT1AsU0FBUDtBQUNEOztBQUVELFNBQVNTLGVBQVQsQ0FBeUJDLE1BQXpCLEVBQWlDO0FBQy9CLFNBQU9BLE1BQU0sQ0FDVkYsT0FESSxDQUNJLGdCQURKLEVBQ3NCLEVBRHRCLEVBRUpHLEtBRkksQ0FFRSxLQUZGLEVBR0pDLEdBSEksRUFBUDtBQUlEOztBQUVELFNBQVNDLGVBQVQsQ0FBeUJDLFFBQXpCLEVBQW1DO0FBQ2pDLE1BQU1DLFFBQVEsR0FBR3JDLFFBQVEsQ0FBQ3NDLGtCQUFULENBQ2ZGLFFBRGUsRUFFZkcsVUFBVSxDQUFDQyxZQUZJLEVBR2YsSUFIZSxFQUlmLEtBSmUsQ0FBakI7QUFNQSxNQUFJQyxJQUFKLENBUGlDLENBUWpDOztBQUNBLFNBQVFBLElBQUksR0FBR0osUUFBUSxDQUFDSyxRQUFULEVBQWYsRUFBcUM7QUFDbkMsUUFBSTFELHdCQUF3QixDQUFDMkQsSUFBekIsQ0FBOEJGLElBQUksQ0FBQ0csV0FBbkMsQ0FBSixFQUFxRDtBQUNuREgsTUFBQUEsSUFBSSxDQUFDMUIsVUFBTCxDQUFnQkMsWUFBaEIsQ0FDRWhCLFFBQVEsQ0FBQ2lCLGNBQVQsQ0FBd0J3QixJQUFJLENBQUNHLFdBQTdCLENBREYsRUFFRUgsSUFGRjtBQUlBQSxNQUFBQSxJQUFJLENBQUMxQixVQUFMLENBQWdCOEIsV0FBaEIsQ0FBNEJKLElBQTVCO0FBQ0Q7QUFDRjtBQUNGOztBQUVELE9BQU8sU0FBU0ssb0JBQVQsQ0FBOEJDLE9BQTlCLEVBQXVDO0FBQzVDLE1BQUlOLElBQUo7QUFFQSxTQUFPO0FBQ0wsUUFBSU8sV0FBSixHQUFrQjtBQUNoQixhQUFPUCxJQUFQO0FBQ0QsS0FISTs7QUFJTEMsSUFBQUEsUUFKSyxzQkFJTTtBQUNULFVBQUlELElBQUksS0FBS1EsU0FBYixFQUF3QjtBQUN0QlIsUUFBQUEsSUFBSSxHQUFHTSxPQUFPLENBQUNuQyxVQUFSLENBQW1CLENBQW5CLENBQVA7QUFDRCxPQUZELE1BRU8sSUFBSTZCLElBQUksQ0FBQzdCLFVBQUwsQ0FBZ0JDLE1BQXBCLEVBQTRCO0FBQ2pDNEIsUUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUM3QixVQUFMLENBQWdCLENBQWhCLENBQVA7QUFDRCxPQUZNLE1BRUEsSUFBSTZCLElBQUksQ0FBQ1MsV0FBVCxFQUFzQjtBQUMzQlQsUUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNTLFdBQVo7QUFDRCxPQUZNLE1BRUE7QUFDTCxZQUFJbkMsVUFBVSxHQUFHMEIsSUFBSSxDQUFDMUIsVUFBdEI7QUFDQTBCLFFBQUFBLElBQUksR0FBRzFCLFVBQVUsQ0FBQ21DLFdBQWxCOztBQUVBLGVBQU8sQ0FBQ1QsSUFBRCxJQUFTMUIsVUFBVSxLQUFLZ0MsT0FBL0IsRUFBd0M7QUFDdENoQyxVQUFBQSxVQUFVLEdBQUdBLFVBQVUsQ0FBQ0EsVUFBeEI7QUFDQTBCLFVBQUFBLElBQUksR0FBRzFCLFVBQVUsQ0FBQ21DLFdBQWxCO0FBQ0Q7QUFDRjs7QUFFRCxhQUFPLENBQUMsQ0FBQ1QsSUFBVDtBQUNEO0FBdEJJLEdBQVA7QUF3QkQ7O0FBRUQsU0FBU1Usb0JBQVQsQ0FBOEJKLE9BQTlCLEVBQXVDO0FBQ3JDLFNBQU8vQyxRQUFRLENBQUNvRCxnQkFBVCxDQUNMTCxPQURLLEVBRUw7QUFDQVIsRUFBQUEsVUFBVSxDQUFDYyxZQUFYLEdBQTBCZCxVQUFVLENBQUNlLFNBSGhDLEVBSUwsSUFKSyxFQUtMLEtBTEssQ0FBUDtBQU9EO0FBRUQ7OztBQUNBLElBQU1DLFlBQVksR0FDaEIsUUFBT0MsTUFBTSxDQUFDQyxRQUFkLE1BQTJCLFFBQTNCLElBQXVDRCxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLEtBQXZELEdBQ0laLG9CQURKLEdBRUlLLG9CQUhOO0FBS0EsSUFBTVEsU0FBUyxHQUFHM0QsUUFBUSxDQUFDQyxhQUFULENBQXVCLEtBQXZCLENBQWxCO0FBQ0EsSUFBTTJELGNBQWMsR0FBRyxJQUFJL0QsR0FBSixFQUF2Qjs7QUFFQSxTQUFTZ0UsbUJBQVQsQ0FBNkJDLEtBQTdCLEVBQXFEO0FBQUEsTUFBakJDLFdBQWlCLHVFQUFILENBQUc7QUFDbkRELEVBQUFBLEtBQUssR0FBR0EsS0FBSyxDQUFDaEMsT0FBTixDQUFjLCtCQUFkLEVBQStDLEVBQS9DLENBQVI7QUFFQSxNQUFJaEIsQ0FBQyxHQUFHZ0QsS0FBSyxDQUFDRSxPQUFOLENBQWMsSUFBZCxDQUFSOztBQUNBLE1BQUlsRCxDQUFDLEdBQUcsQ0FBQyxDQUFULEVBQVk7QUFDVixRQUFJbUQsTUFBTSxHQUFHLElBQUlGLFdBQUosR0FBa0IsQ0FBL0I7O0FBQ0EsU0FBS2pELENBQUMsSUFBSSxDQUFWLEVBQWFnRCxLQUFLLENBQUNoRCxDQUFELENBQUwsS0FBYSxHQUFiLElBQW9CQSxDQUFDLEdBQUdnRCxLQUFLLENBQUNqRCxNQUEzQyxFQUFtREMsQ0FBQyxJQUFJLENBQXhELEVBQTJEO0FBQ3pEbUQsTUFBQUEsTUFBTSxJQUFJLENBQVY7QUFDRDs7QUFDRCxXQUFPSCxLQUFLLENBQUNoQyxPQUFOLENBQWMsT0FBZCxFQUF1QixVQUFBb0MsQ0FBQztBQUFBLGFBQzdCQSxDQUFDLENBQUNDLE1BQUYsQ0FBUyxDQUFULEVBQVlDLElBQUksQ0FBQ0MsR0FBTCxDQUFTSCxDQUFDLENBQUNyRCxNQUFGLEdBQVdvRCxNQUFwQixFQUE0QixDQUE1QixDQUFaLENBRDZCO0FBQUEsS0FBeEIsQ0FBUDtBQUdEOztBQUVELFNBQU9ILEtBQVA7QUFDRDs7QUFFRCxTQUFTUSxtQkFBVCxDQUE2QlIsS0FBN0IsRUFBb0NwQyxLQUFwQyxFQUEyQztBQUN6QyxNQUFNNkMsV0FBVyxHQUFHMUYsY0FBYyxDQUFDNkMsS0FBRCxDQUFsQztBQUVBLE1BQU04QyxNQUFNLEdBQUdYLG1CQUFtQixDQUFDQyxLQUFELENBQW5CLENBQ1o3QixLQURZLENBQ04sSUFETSxFQUVad0MsTUFGWSxDQUVMLFVBQUEzRCxDQUFDO0FBQUEsV0FBSUEsQ0FBSjtBQUFBLEdBRkksRUFHWm5CLEdBSFksQ0FHUixVQUFBK0UsSUFBSSxFQUFJO0FBQ1gsUUFBTUMsVUFBVSxHQUFHRCxJQUFJLENBQUNWLE9BQUwsQ0FBYU8sV0FBYixDQUFuQjs7QUFFQSxRQUFJSSxVQUFVLEdBQUcsQ0FBQyxDQUFsQixFQUFxQjtBQUNuQix5QkFBWUQsSUFBWixpQkFBdUIsSUFBSUUsTUFBSixDQUFXRCxVQUFYLENBQXZCLFNBQWdELElBQUlDLE1BQUosQ0FBVyxDQUFYLENBQWhEO0FBQ0Q7O0FBRUQsdUJBQVlGLElBQVo7QUFDRCxHQVhZLEVBWVo5QyxJQVpZLENBWVAsSUFaTyxFQWFiO0FBYmEsR0FjWkUsT0FkWSxDQWNKNUMsc0JBZEksRUFjb0IsUUFkcEIsQ0FBZjtBQWdCQSxtQkFBVXNGLE1BQVY7QUFDRDs7QUFFRCxPQUFPLFNBQVNLLGVBQVQsQ0FBeUJDLFFBQXpCLEVBQW1DQyxLQUFuQyxFQUEwQzFFLE1BQTFDLEVBQWtEO0FBQ3ZELE1BQU1iLFFBQVEsR0FBR1EsUUFBUSxDQUFDQyxhQUFULENBQXVCLFVBQXZCLENBQWpCO0FBQ0EsTUFBTW9CLEtBQUssR0FBRyxFQUFkO0FBRUEsTUFBSUMsU0FBUyxHQUFHRixlQUFlLENBQUMwRCxRQUFELEVBQVd6RSxNQUFYLENBQS9CO0FBQ0EsTUFBSTBFLEtBQUosRUFBV3pELFNBQVMsa0JBQVdBLFNBQVgsV0FBVDtBQUVYOztBQUNBLE1BQUlyRCxLQUFKLEVBQVc7QUFDVHVCLElBQUFBLFFBQVEsQ0FBQ3dGLFNBQVQsR0FBcUIxRCxTQUFyQjtBQUNELEdBRkQsTUFFTztBQUNMcUMsSUFBQUEsU0FBUyxDQUFDcUIsU0FBVix1QkFBbUMxRCxTQUFuQztBQUNBOUIsSUFBQUEsUUFBUSxDQUFDVSxPQUFULENBQWlCQyxXQUFqQixDQUE2QndELFNBQVMsQ0FBQ3NCLFFBQVYsQ0FBbUIsQ0FBbkIsRUFBc0IvRSxPQUFuRDtBQUNEOztBQUVELE1BQUk2RSxLQUFKLEVBQVc7QUFDVCxRQUFNRyxPQUFPLEdBQUcxRixRQUFRLENBQUNVLE9BQVQsQ0FBaUJpRixVQUFqQztBQUNBM0YsSUFBQUEsUUFBUSxDQUFDVSxPQUFULENBQWlCMkMsV0FBakIsQ0FBNkJxQyxPQUE3QjtBQUNBM0UsSUFBQUEsS0FBSyxDQUFDQyxJQUFOLENBQVcwRSxPQUFPLENBQUN0RSxVQUFuQixFQUErQkgsT0FBL0IsQ0FBdUMsVUFBQWdDLElBQUk7QUFBQSxhQUN6Q2pELFFBQVEsQ0FBQ1UsT0FBVCxDQUFpQkMsV0FBakIsQ0FBNkJzQyxJQUE3QixDQUR5QztBQUFBLEtBQTNDO0FBR0Q7O0FBRUROLEVBQUFBLGVBQWUsQ0FBQzNDLFFBQVEsQ0FBQ1UsT0FBVixDQUFmO0FBRUEsTUFBTWtGLGFBQWEsR0FBRzdCLFlBQVksQ0FBQy9ELFFBQVEsQ0FBQ1UsT0FBVixDQUFsQztBQUNBLE1BQUltRixZQUFZLEdBQUcsQ0FBbkI7O0FBMUJ1RDtBQTZCckQsUUFBTTVDLElBQUksR0FBRzJDLGFBQWEsQ0FBQ3BDLFdBQTNCOztBQUVBLFFBQUlQLElBQUksQ0FBQzZDLFFBQUwsS0FBa0JDLElBQUksQ0FBQ0MsU0FBM0IsRUFBc0M7QUFDcEMsVUFBTUMsSUFBSSxHQUFHaEQsSUFBSSxDQUFDRyxXQUFsQjs7QUFFQSxVQUFJLENBQUM2QyxJQUFJLENBQUM1RCxLQUFMLENBQVc3Qyx3QkFBWCxDQUFMLEVBQTJDO0FBQ3pDLFlBQU0wRyxPQUFPLEdBQUdELElBQUksQ0FBQzVELEtBQUwsQ0FBVzNDLHNCQUFYLENBQWhCOztBQUNBLFlBQUl3RyxPQUFKLEVBQWE7QUFDWCxjQUFJMUMsV0FBVyxHQUFHUCxJQUFsQjtBQUNBaUQsVUFBQUEsT0FBTyxDQUNKbkUsTUFESCxDQUVJLFVBQUNDLEdBQUQsRUFBTStDLFdBQU4sRUFBc0I7QUFBQSxpQ0FDRy9DLEdBQUcsQ0FBQ1UsR0FBSixHQUFVRCxLQUFWLENBQWdCc0MsV0FBaEIsQ0FESDtBQUFBO0FBQUEsZ0JBQ2JvQixNQURhO0FBQUEsZ0JBQ0xDLElBREs7O0FBRXBCLGdCQUFJRCxNQUFKLEVBQVluRSxHQUFHLENBQUNxRSxJQUFKLENBQVNGLE1BQVQ7QUFDWm5FLFlBQUFBLEdBQUcsQ0FBQ3FFLElBQUosQ0FBU3RCLFdBQVQ7QUFDQSxnQkFBSXFCLElBQUosRUFBVXBFLEdBQUcsQ0FBQ3FFLElBQUosQ0FBU0QsSUFBVDtBQUNWLG1CQUFPcEUsR0FBUDtBQUNELFdBUkwsRUFTSSxDQUFDaUUsSUFBRCxDQVRKLEVBV0doRixPQVhILENBV1csVUFBQ2dCLElBQUQsRUFBT0MsS0FBUCxFQUFpQjtBQUN4QixnQkFBSUEsS0FBSyxLQUFLLENBQWQsRUFBaUI7QUFDZnNCLGNBQUFBLFdBQVcsQ0FBQ0osV0FBWixHQUEwQm5CLElBQTFCO0FBQ0QsYUFGRCxNQUVPO0FBQ0x1QixjQUFBQSxXQUFXLEdBQUdBLFdBQVcsQ0FBQ2pDLFVBQVosQ0FBdUJDLFlBQXZCLENBQ1poQixRQUFRLENBQUNpQixjQUFULENBQXdCUSxJQUF4QixDQURZLEVBRVp1QixXQUFXLENBQUNFLFdBRkEsQ0FBZDtBQUlEO0FBQ0YsV0FwQkg7QUFxQkQ7QUFDRjs7QUFFRCxVQUFNNEMsS0FBSyxHQUFHckQsSUFBSSxDQUFDRyxXQUFMLENBQWlCZixLQUFqQixDQUF1QjdDLHdCQUF2QixDQUFkOztBQUNBLFVBQUk4RyxLQUFKLEVBQVc7QUFDVDtBQUNBLFlBQUksQ0FBQzdILEtBQUwsRUFBWXdFLElBQUksQ0FBQ0csV0FBTCxHQUFtQixFQUFuQjtBQUNadkIsUUFBQUEsS0FBSyxDQUFDeUUsS0FBSyxDQUFDLENBQUQsQ0FBTixDQUFMLEdBQWtCLENBQUNULFlBQUQsRUFBZWpILFlBQWYsQ0FBbEI7QUFDRDtBQUNGLEtBckNELE1BcUNPO0FBQ0w7QUFBMkI7QUFDM0IsVUFBSXFFLElBQUksQ0FBQzZDLFFBQUwsS0FBa0JDLElBQUksQ0FBQ1EsWUFBM0IsRUFBeUM7QUFDdkN4RixRQUFBQSxLQUFLLENBQUNDLElBQU4sQ0FBV2lDLElBQUksQ0FBQ3VELFVBQWhCLEVBQTRCdkYsT0FBNUIsQ0FBb0MsVUFBQXdGLElBQUksRUFBSTtBQUMxQyxjQUFNQyxLQUFLLEdBQUdELElBQUksQ0FBQ0MsS0FBTCxDQUFXQyxJQUFYLEVBQWQ7QUFDQTs7QUFDQSxjQUFNQyxJQUFJLEdBQUduSSxLQUFLLEdBQUdnSSxJQUFJLENBQUNHLElBQUwsQ0FBVXRFLE9BQVYsQ0FBa0IzQyxXQUFsQixFQUErQixFQUEvQixDQUFILEdBQXdDOEcsSUFBSSxDQUFDRyxJQUEvRDtBQUNBLGNBQU1OLEtBQUssR0FBR0ksS0FBSyxDQUFDckUsS0FBTixDQUFZN0Msd0JBQVosQ0FBZDs7QUFDQSxjQUFJOEcsS0FBSixFQUFXO0FBQ1QsZ0JBQU1PLFlBQVksR0FBR3RFLGVBQWUsQ0FBQytDLFFBQVEsQ0FBQ2dCLEtBQUssQ0FBQyxDQUFELENBQU4sQ0FBVCxDQUFwQztBQUNBekUsWUFBQUEsS0FBSyxDQUFDeUUsS0FBSyxDQUFDLENBQUQsQ0FBTixDQUFMLEdBQWtCLENBQ2hCVCxZQURnQixFQUVoQmhILGVBQWUsQ0FBQytILElBQUQsRUFBT0MsWUFBUCxFQUFxQnRCLEtBQXJCLENBRkMsQ0FBbEI7QUFJQXRDLFlBQUFBLElBQUksQ0FBQzZELGVBQUwsQ0FBcUJMLElBQUksQ0FBQ0csSUFBMUI7QUFDRCxXQVBELE1BT087QUFDTCxnQkFBTVYsUUFBTyxHQUFHUSxLQUFLLENBQUNyRSxLQUFOLENBQVkzQyxzQkFBWixDQUFoQjs7QUFDQSxnQkFBSXdHLFFBQUosRUFBYTtBQUNYLGtCQUFNYSxXQUFXLG1CQUFZSCxJQUFaLENBQWpCOztBQUVBVixjQUFBQSxRQUFPLENBQUNqRixPQUFSLENBQWdCLFVBQUM4RCxXQUFELEVBQWM3QyxLQUFkLEVBQXdCO0FBQUEseUNBQ3ZCNkMsV0FBVyxDQUFDMUMsS0FBWixDQUFrQjdDLHdCQUFsQixDQUR1QjtBQUFBO0FBQUEsb0JBQzdCRixFQUQ2Qjs7QUFFdEN1QyxnQkFBQUEsS0FBSyxDQUFDdkMsRUFBRCxDQUFMLEdBQVksQ0FDVnVHLFlBRFUsRUFFVixVQUFDbUIsSUFBRCxFQUFPQyxNQUFQLEVBQWVDLFNBQWYsRUFBNkI7QUFDM0Isc0JBQU1DLElBQUksR0FBR3pJLE9BQU8sQ0FBQzBCLEdBQVIsQ0FBWTZHLE1BQVosRUFBb0IsRUFBcEIsQ0FBYjtBQUNBRSxrQkFBQUEsSUFBSSxDQUFDSixXQUFELENBQUosR0FBb0IsQ0FBQ0ksSUFBSSxDQUFDSixXQUFELENBQUosSUFBcUJMLEtBQXRCLEVBQTZCcEUsT0FBN0IsQ0FDbEJ5QyxXQURrQixFQUVsQm1DLFNBQVMsSUFBSSxJQUFiLEdBQW9CLEVBQXBCLEdBQXlCQSxTQUZQLENBQXBCOztBQUtBLHNCQUFJaEIsUUFBTyxDQUFDN0UsTUFBUixLQUFtQixDQUFuQixJQUF3QmEsS0FBSyxHQUFHLENBQVIsS0FBY2dFLFFBQU8sQ0FBQzdFLE1BQWxELEVBQTBEO0FBQ3hENEYsb0JBQUFBLE1BQU0sQ0FBQ0csWUFBUCxDQUFvQlIsSUFBcEIsRUFBMEJPLElBQUksQ0FBQ0osV0FBRCxDQUE5QjtBQUNBSSxvQkFBQUEsSUFBSSxDQUFDSixXQUFELENBQUosR0FBb0J0RCxTQUFwQjtBQUNEO0FBQ0YsaUJBYlMsQ0FBWjtBQWVELGVBakJEOztBQW1CQWdELGNBQUFBLElBQUksQ0FBQ0MsS0FBTCxHQUFhLEVBQWI7QUFFQTs7QUFDQSxrQkFBSWpJLEtBQUssSUFBSW1JLElBQUksS0FBS0gsSUFBSSxDQUFDRyxJQUEzQixFQUFpQztBQUMvQjNELGdCQUFBQSxJQUFJLENBQUM2RCxlQUFMLENBQXFCTCxJQUFJLENBQUNHLElBQTFCO0FBQ0EzRCxnQkFBQUEsSUFBSSxDQUFDbUUsWUFBTCxDQUFrQlIsSUFBbEIsRUFBd0IsRUFBeEI7QUFDRDtBQUNGO0FBQ0Y7QUFDRixTQTdDRDtBQThDRDtBQUNGOztBQUVEZixJQUFBQSxZQUFZLElBQUksQ0FBaEI7QUF4SHFEOztBQTRCdkQsU0FBT0QsYUFBYSxDQUFDMUMsUUFBZCxFQUFQLEVBQWlDO0FBQUE7QUE2RmhDOztBQUVELFNBQU8sU0FBU21FLHNCQUFULENBQWdDTCxJQUFoQyxFQUFzQ0MsTUFBdEMsRUFBOENLLElBQTlDLEVBQW9EQyxXQUFwRCxFQUFpRTtBQUN0RSxRQUFNSixJQUFJLEdBQUd6SSxPQUFPLENBQUMwQixHQUFSLENBQVk2RyxNQUFaLEVBQW9CO0FBQUVPLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQXBCLENBQWI7O0FBRUEsUUFBSXhILFFBQVEsS0FBS21ILElBQUksQ0FBQ25ILFFBQXRCLEVBQWdDO0FBQzlCLFVBQUltSCxJQUFJLENBQUNuSCxRQUFMLElBQWlCaUgsTUFBTSxDQUFDbkIsUUFBUCxLQUFvQkMsSUFBSSxDQUFDUSxZQUE5QyxFQUE0RDtBQUMxRDVILFFBQUFBLGNBQWMsQ0FBQ3NJLE1BQUQsQ0FBZDtBQUNEOztBQUVERSxNQUFBQSxJQUFJLENBQUNNLFFBQUwsR0FBZ0IsSUFBaEI7QUFFQSxVQUFNN0UsUUFBUSxHQUFHcEMsUUFBUSxDQUFDa0gsVUFBVCxDQUNmM0gsYUFBYSxDQUFDQyxRQUFELEVBQVdnSCxJQUFJLENBQUMvRyxPQUFoQixDQUFiLENBQXNDUyxPQUR2QixFQUVmLElBRmUsQ0FBakI7QUFLQSxVQUFNaUgsWUFBWSxHQUFHNUQsWUFBWSxDQUFDbkIsUUFBRCxDQUFqQztBQUNBLFVBQU1nRixXQUFXLEdBQUcvRixLQUFLLENBQUNNLEtBQU4sQ0FBWSxDQUFaLENBQXBCO0FBRUEsVUFBSTBGLFdBQVcsR0FBRyxDQUFsQjtBQUNBLFVBQUlDLFdBQVcsR0FBR0YsV0FBVyxDQUFDRyxLQUFaLEVBQWxCO0FBRUEsVUFBTUMsT0FBTyxHQUFHLEVBQWhCO0FBRUFiLE1BQUFBLElBQUksQ0FBQ25ILFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0FtSCxNQUFBQSxJQUFJLENBQUNhLE9BQUwsR0FBZUEsT0FBZjs7QUFFQSxhQUFPTCxZQUFZLENBQUN6RSxRQUFiLEVBQVAsRUFBZ0M7QUFDOUIsWUFBTUQsSUFBSSxHQUFHMEUsWUFBWSxDQUFDbkUsV0FBMUI7O0FBRUEsWUFBSVAsSUFBSSxDQUFDNkMsUUFBTCxLQUFrQkMsSUFBSSxDQUFDQyxTQUEzQixFQUFzQztBQUNwQztBQUNBLGNBQUl4Ryx3QkFBd0IsQ0FBQzJELElBQXpCLENBQThCRixJQUFJLENBQUNHLFdBQW5DLENBQUosRUFBcUQ7QUFDbkRILFlBQUFBLElBQUksQ0FBQ0csV0FBTCxHQUFtQixFQUFuQjtBQUNELFdBRkQsTUFFTyxJQUFJM0UsS0FBSixFQUFXO0FBQ2hCd0UsWUFBQUEsSUFBSSxDQUFDRyxXQUFMLEdBQW1CSCxJQUFJLENBQUNHLFdBQUwsQ0FBaUJkLE9BQWpCLENBQXlCMUMsV0FBekIsRUFBc0MsRUFBdEMsQ0FBbkI7QUFDRDtBQUNGLFNBUEQsTUFPTyxJQUNMZCxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBWixLQUF5QixZQUF6QixJQUNBaUUsSUFBSSxDQUFDNkMsUUFBTCxLQUFrQkMsSUFBSSxDQUFDUSxZQUZsQixFQUdMO0FBQ0EsY0FDRXRELElBQUksQ0FBQ2hELE9BQUwsQ0FBYXVFLE9BQWIsQ0FBcUIsR0FBckIsSUFBNEIsQ0FBQyxDQUE3QixJQUNBLENBQUN5RCxjQUFjLENBQUM3SCxHQUFmLENBQW1CNkMsSUFBSSxDQUFDaEQsT0FBTCxDQUFhMEIsV0FBYixFQUFuQixDQUZILEVBR0U7QUFDQSxrQkFBTXVHLEtBQUssbUJBQ0UzSixnQkFBZ0IsQ0FDekIwRSxJQUR5QixDQURsQixvQ0FHa0IxRSxnQkFBZ0IsQ0FBQ3lJLElBQUQsQ0FIbEMsRUFBWDtBQUtEO0FBQ0Y7O0FBRUQsZUFBT2MsV0FBVyxJQUFJQSxXQUFXLENBQUMsQ0FBRCxDQUFYLEtBQW1CRCxXQUF6QyxFQUFzRDtBQUNwREcsVUFBQUEsT0FBTyxDQUFDM0IsSUFBUixDQUFhLENBQUNwRCxJQUFELEVBQU82RSxXQUFXLENBQUMsQ0FBRCxDQUFsQixDQUFiO0FBQ0FBLFVBQUFBLFdBQVcsR0FBR0YsV0FBVyxDQUFDRyxLQUFaLEVBQWQ7QUFDRDs7QUFFREYsUUFBQUEsV0FBVyxJQUFJLENBQWY7QUFDRDs7QUFFRCxVQUFJWixNQUFNLENBQUNuQixRQUFQLEtBQW9CQyxJQUFJLENBQUNDLFNBQTdCLEVBQXdDO0FBQ3RDbUIsUUFBQUEsSUFBSSxDQUFDZ0IsU0FBTCxHQUFpQnZGLFFBQVEsQ0FBQ3hCLFVBQVQsQ0FBb0IsQ0FBcEIsQ0FBakI7QUFDQStGLFFBQUFBLElBQUksQ0FBQ2lCLE9BQUwsR0FBZXhGLFFBQVEsQ0FBQ3hCLFVBQVQsQ0FBb0J3QixRQUFRLENBQUN4QixVQUFULENBQW9CQyxNQUFwQixHQUE2QixDQUFqRCxDQUFmO0FBRUEsWUFBSWdILGFBQWEsR0FBR3BCLE1BQXBCO0FBRUEsWUFBSXFCLEtBQUssR0FBRzFGLFFBQVEsQ0FBQ3hCLFVBQVQsQ0FBb0IsQ0FBcEIsQ0FBWjs7QUFDQSxlQUFPa0gsS0FBUCxFQUFjO0FBQ1pyQixVQUFBQSxNQUFNLENBQUMxRixVQUFQLENBQWtCQyxZQUFsQixDQUErQjhHLEtBQS9CLEVBQXNDRCxhQUFhLENBQUMzRSxXQUFwRDtBQUNBMkUsVUFBQUEsYUFBYSxHQUFHQyxLQUFoQjtBQUNBQSxVQUFBQSxLQUFLLEdBQUcxRixRQUFRLENBQUN4QixVQUFULENBQW9CLENBQXBCLENBQVI7QUFDRDtBQUNGLE9BWkQsTUFZTztBQUNMNkYsUUFBQUEsTUFBTSxDQUFDdEcsV0FBUCxDQUFtQmlDLFFBQW5CO0FBQ0Q7QUFDRjs7QUFFRCxRQUFNMkYsa0JBQWtCLEdBQUd0QixNQUFNLENBQUNzQixrQkFBbEM7O0FBQ0EsUUFBSWhCLFdBQUosRUFBaUI7QUFDZixVQUFJaUIsT0FBTyxHQUFHLEtBQWQ7QUFFQWpCLE1BQUFBLFdBQVcsR0FBR0EsV0FBVyxDQUFDcEgsR0FBWixDQUFnQixVQUFBZSxLQUFLLEVBQUk7QUFDckMsWUFBSUEsS0FBSyxZQUFZdUgsYUFBckIsRUFBb0MsT0FBT3ZILEtBQVA7QUFFcEMsWUFBSXdILFVBQVUsR0FBR3RFLGNBQWMsQ0FBQ2hFLEdBQWYsQ0FBbUJjLEtBQW5CLENBQWpCOztBQUNBLFlBQUksQ0FBQ3dILFVBQUwsRUFBaUI7QUFDZkEsVUFBQUEsVUFBVSxHQUFHLElBQUlELGFBQUosRUFBYjtBQUNBQyxVQUFBQSxVQUFVLENBQUNDLFdBQVgsQ0FBdUJ6SCxLQUF2QjtBQUNBa0QsVUFBQUEsY0FBYyxDQUFDOUQsR0FBZixDQUFtQlksS0FBbkIsRUFBMEJ3SCxVQUExQjtBQUNEOztBQUNELGVBQU9BLFVBQVA7QUFDRCxPQVZhLENBQWQ7O0FBWUEsVUFBSW5CLFdBQVcsQ0FBQ2xHLE1BQVosS0FBdUJrSCxrQkFBa0IsQ0FBQ2xILE1BQTlDLEVBQXNEO0FBQ3BEbUgsUUFBQUEsT0FBTyxHQUFHLElBQVY7O0FBQ0EsYUFBSyxJQUFJbEgsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR2lHLFdBQVcsQ0FBQ2xHLE1BQWhDLEVBQXdDQyxDQUFDLElBQUksQ0FBN0MsRUFBZ0Q7QUFDOUMsY0FBSWlHLFdBQVcsQ0FBQ2pHLENBQUQsQ0FBWCxLQUFtQmlILGtCQUFrQixDQUFDakgsQ0FBRCxDQUF6QyxFQUE4QztBQUM1Q2tILFlBQUFBLE9BQU8sR0FBRyxLQUFWO0FBQ0E7QUFDRDtBQUNGO0FBQ0Y7O0FBRUQsVUFBSSxDQUFDQSxPQUFMLEVBQWN2QixNQUFNLENBQUNzQixrQkFBUCxHQUE0QmhCLFdBQTVCO0FBQ2YsS0ExQkQsTUEwQk8sSUFBSWdCLGtCQUFrQixJQUFJQSxrQkFBa0IsQ0FBQ2xILE1BQTdDLEVBQXFEO0FBQzFENEYsTUFBQUEsTUFBTSxDQUFDc0Isa0JBQVAsR0FBNEIsRUFBNUI7QUFDRDs7QUFFRCxRQUFNZCxRQUFRLEdBQUdOLElBQUksQ0FBQ00sUUFBdEI7QUFDQU4sSUFBQUEsSUFBSSxDQUFDTSxRQUFMLEdBQWdCSCxJQUFoQjs7QUFFQSxTQUFLLElBQUlwRixLQUFLLEdBQUcsQ0FBakIsRUFBb0JBLEtBQUssR0FBR2lGLElBQUksQ0FBQ2EsT0FBTCxDQUFhM0csTUFBekMsRUFBaURhLEtBQUssSUFBSSxDQUExRCxFQUE2RDtBQUFBLCtDQUNwQ2lGLElBQUksQ0FBQ2EsT0FBTCxDQUFhOUYsS0FBYixDQURvQztBQUFBLFVBQ3BEZSxLQURvRDtBQUFBLFVBQzlDMkYsTUFEOEM7O0FBRTNELFVBQUksQ0FBQ25CLFFBQUQsSUFBYUEsUUFBUSxDQUFDdkYsS0FBRCxDQUFSLEtBQW9Cb0YsSUFBSSxDQUFDcEYsS0FBRCxDQUF6QyxFQUFrRDtBQUNoRCxZQUFJO0FBQ0YwRyxVQUFBQSxNQUFNLENBQ0o1QixJQURJLEVBRUovRCxLQUZJLEVBR0pxRSxJQUFJLENBQUNwRixLQUFELENBSEEsRUFJSnVGLFFBQVEsR0FBR0EsUUFBUSxDQUFDdkYsS0FBRCxDQUFYLEdBQXFCdUIsU0FKekIsQ0FBTjtBQU1ELFNBUEQsQ0FPRSxPQUFPb0YsS0FBUCxFQUFjO0FBQ2QsY0FBSS9KLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFaLEtBQXlCLFlBQTdCLEVBQTJDO0FBQ3pDO0FBQ0E4SixZQUFBQSxPQUFPLENBQUNELEtBQVIsNkVBQ3VFdEssZ0JBQWdCLENBQ25GeUksSUFEbUYsQ0FEdkYsZUFHUWxDLG1CQUFtQixDQUFDaEQsU0FBRCxFQUFZSSxLQUFaLENBSDNCO0FBS0Q7O0FBQ0QsZ0JBQU0yRyxLQUFOO0FBQ0Q7QUFDRjtBQUNGOztBQUVELFFBQUk1QixNQUFNLENBQUNuQixRQUFQLEtBQW9CQyxJQUFJLENBQUNDLFNBQTdCLEVBQXdDO0FBQ3RDeEgsTUFBQUEsUUFBUSxDQUFDLFVBQUEwQixLQUFLLEVBQUk7QUFDaEIsWUFBSThHLElBQUksQ0FBQytCLFVBQVQsRUFBcUI7QUFDbkIsY0FBSXRCLFFBQUosRUFBYztBQUNadkgsWUFBQUEsS0FBSyxDQUFDOEksWUFBTixDQUFtQmhDLElBQW5CO0FBQ0QsV0FGRCxNQUVPO0FBQ0w5RyxZQUFBQSxLQUFLLENBQUMrSSxZQUFOLENBQW1CakMsSUFBbkI7QUFDRDtBQUNGO0FBQ0YsT0FSTyxDQUFSO0FBU0Q7QUFDRixHQWxKRDtBQW1KRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0cmluZ2lmeUVsZW1lbnQsIHNoYWR5Q1NTLCBJU19JRSB9IGZyb20gXCIuLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgZGF0YU1hcCwgcmVtb3ZlVGVtcGxhdGUgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG5pbXBvcnQgcmVzb2x2ZVZhbHVlIGZyb20gXCIuL3Jlc29sdmVycy92YWx1ZS5qc1wiO1xuaW1wb3J0IHJlc29sdmVQcm9wZXJ0eSBmcm9tIFwiLi9yZXNvbHZlcnMvcHJvcGVydHkuanNcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnRyeSB7IHByb2Nlc3MuZW52Lk5PREVfRU5WIH0gY2F0Y2goZSkgeyB2YXIgcHJvY2VzcyA9IHsgZW52OiB7IE5PREVfRU5WOiAncHJvZHVjdGlvbicgfSB9OyB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuY29uc3QgVElNRVNUQU1QID0gRGF0ZS5ub3coKTtcblxuZXhwb3J0IGNvbnN0IGdldFBsYWNlaG9sZGVyID0gKGlkID0gMCkgPT4gYHt7aC0ke1RJTUVTVEFNUH0tJHtpZH19fWA7XG5cbmNvbnN0IFBMQUNFSE9MREVSX1JFR0VYUF9URVhUID0gZ2V0UGxhY2Vob2xkZXIoXCIoXFxcXGQrKVwiKTtcbmNvbnN0IFBMQUNFSE9MREVSX1JFR0VYUF9FUVVBTCA9IG5ldyBSZWdFeHAoYF4ke1BMQUNFSE9MREVSX1JFR0VYUF9URVhUfSRgKTtcbmNvbnN0IFBMQUNFSE9MREVSX1JFR0VYUF9BTEwgPSBuZXcgUmVnRXhwKFBMQUNFSE9MREVSX1JFR0VYUF9URVhULCBcImdcIik7XG5cbmNvbnN0IEFUVFJfUFJFRklYID0gYC0tJHtUSU1FU1RBTVB9LS1gO1xuY29uc3QgQVRUUl9SRUdFWFAgPSBuZXcgUmVnRXhwKEFUVFJfUFJFRklYLCBcImdcIik7XG5cbmNvbnN0IHByZXBhcmVkVGVtcGxhdGVzID0gbmV3IFdlYWtNYXAoKTtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGFwcGx5U2hhZHlDU1ModGVtcGxhdGUsIHRhZ05hbWUpIHtcbiAgaWYgKCF0YWdOYW1lKSByZXR1cm4gdGVtcGxhdGU7XG5cbiAgcmV0dXJuIHNoYWR5Q1NTKHNoYWR5ID0+IHtcbiAgICBsZXQgbWFwID0gcHJlcGFyZWRUZW1wbGF0ZXMuZ2V0KHRlbXBsYXRlKTtcbiAgICBpZiAoIW1hcCkge1xuICAgICAgbWFwID0gbmV3IE1hcCgpO1xuICAgICAgcHJlcGFyZWRUZW1wbGF0ZXMuc2V0KHRlbXBsYXRlLCBtYXApO1xuICAgIH1cblxuICAgIGxldCBjbG9uZSA9IG1hcC5nZXQodGFnTmFtZSk7XG5cbiAgICBpZiAoIWNsb25lKSB7XG4gICAgICBjbG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgIGNsb25lLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgICBtYXAuc2V0KHRhZ05hbWUsIGNsb25lKTtcblxuICAgICAgY29uc3Qgc3R5bGVzID0gY2xvbmUuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKFwic3R5bGVcIik7XG5cbiAgICAgIEFycmF5LmZyb20oc3R5bGVzKS5mb3JFYWNoKHN0eWxlID0+IHtcbiAgICAgICAgY29uc3QgY291bnQgPSBzdHlsZS5jaGlsZE5vZGVzLmxlbmd0aCArIDE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSkge1xuICAgICAgICAgIHN0eWxlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKFxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZ2V0UGxhY2Vob2xkZXIoKSksXG4gICAgICAgICAgICBzdHlsZSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2hhZHkucHJlcGFyZVRlbXBsYXRlKGNsb25lLCB0YWdOYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmU7XG4gIH0sIHRlbXBsYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2lnbmF0dXJlKHBhcnRzLCBzdHlsZXMpIHtcbiAgbGV0IHNpZ25hdHVyZSA9IHBhcnRzLnJlZHVjZSgoYWNjLCBwYXJ0LCBpbmRleCkgPT4ge1xuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHBhcnQ7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgcGFydHNcbiAgICAgICAgLnNsaWNlKGluZGV4KVxuICAgICAgICAuam9pbihcIlwiKVxuICAgICAgICAubWF0Y2goL15cXHMqPFxcL1xccyoodGFibGV8dHJ8dGhlYWR8dGJvZHl8dGZvb3R8Y29sZ3JvdXApPi8pXG4gICAgKSB7XG4gICAgICByZXR1cm4gYCR7YWNjfTwhLS0ke2dldFBsYWNlaG9sZGVyKGluZGV4IC0gMSl9LS0+JHtwYXJ0fWA7XG4gICAgfVxuICAgIHJldHVybiBhY2MgKyBnZXRQbGFjZWhvbGRlcihpbmRleCAtIDEpICsgcGFydDtcbiAgfSwgXCJcIik7XG5cbiAgaWYgKHN0eWxlcykge1xuICAgIHNpZ25hdHVyZSArPSBgPHN0eWxlPlxcbiR7c3R5bGVzLmpvaW4oXCJcXG4vKi0tLS0tLSovXFxuXCIpfVxcbjwvc3R5bGU+YDtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoSVNfSUUpIHtcbiAgICByZXR1cm4gc2lnbmF0dXJlLnJlcGxhY2UoXG4gICAgICAvc3R5bGVcXHMqPVxccyooW1wiXVteXCJdK1tcIl18WyddW14nXStbJ118W15cXHNcIic8Pi9dKykvZyxcbiAgICAgIG1hdGNoID0+IGAke0FUVFJfUFJFRklYfSR7bWF0Y2h9YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHNpZ25hdHVyZTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJvcGVydHlOYW1lKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nXG4gICAgLnJlcGxhY2UoL1xccyo9XFxzKlsnXCJdKiQvZywgXCJcIilcbiAgICAuc3BsaXQoL1xccysvKVxuICAgIC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZUNvbW1lbnRzKGZyYWdtZW50KSB7XG4gIGNvbnN0IGl0ZXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlTm9kZUl0ZXJhdG9yKFxuICAgIGZyYWdtZW50LFxuICAgIE5vZGVGaWx0ZXIuU0hPV19DT01NRU5ULFxuICAgIG51bGwsXG4gICAgZmFsc2UsXG4gICk7XG4gIGxldCBub2RlO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZC1hc3NpZ25cbiAgd2hpbGUgKChub2RlID0gaXRlcmF0b3IubmV4dE5vZGUoKSkpIHtcbiAgICBpZiAoUExBQ0VIT0xERVJfUkVHRVhQX0VRVUFMLnRlc3Qobm9kZS50ZXh0Q29udGVudCkpIHtcbiAgICAgIG5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoXG4gICAgICAgIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5vZGUudGV4dENvbnRlbnQpLFxuICAgICAgICBub2RlLFxuICAgICAgKTtcbiAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUludGVybmFsV2Fsa2VyKGNvbnRleHQpIHtcbiAgbGV0IG5vZGU7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXQgY3VycmVudE5vZGUoKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9LFxuICAgIG5leHROb2RlKCkge1xuICAgICAgaWYgKG5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBub2RlID0gY29udGV4dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgfSBlbHNlIGlmIChub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLmNoaWxkTm9kZXNbMF07XG4gICAgICB9IGVsc2UgaWYgKG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgbm9kZSA9IHBhcmVudE5vZGUubmV4dFNpYmxpbmc7XG5cbiAgICAgICAgd2hpbGUgKCFub2RlICYmIHBhcmVudE5vZGUgIT09IGNvbnRleHQpIHtcbiAgICAgICAgICBwYXJlbnROb2RlID0gcGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgIG5vZGUgPSBwYXJlbnROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAhIW5vZGU7XG4gICAgfSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRXh0ZXJuYWxXYWxrZXIoY29udGV4dCkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihcbiAgICBjb250ZXh0LFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQgfCBOb2RlRmlsdGVyLlNIT1dfVEVYVCxcbiAgICBudWxsLFxuICAgIGZhbHNlLFxuICApO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuY29uc3QgY3JlYXRlV2Fsa2VyID1cbiAgdHlwZW9mIHdpbmRvdy5TaGFkeURPTSA9PT0gXCJvYmplY3RcIiAmJiB3aW5kb3cuU2hhZHlET00uaW5Vc2VcbiAgICA/IGNyZWF0ZUludGVybmFsV2Fsa2VyXG4gICAgOiBjcmVhdGVFeHRlcm5hbFdhbGtlcjtcblxuY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbmNvbnN0IHN0eWxlU2hlZXRzTWFwID0gbmV3IE1hcCgpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVXaGl0ZXNwYWNlKGlucHV0LCBzdGFydEluZGVudCA9IDApIHtcbiAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC8oXltcXG5cXHNcXHQgXSspfChbXFxuXFxzXFx0IF0rJCkrL2csIFwiXCIpO1xuXG4gIGxldCBpID0gaW5wdXQuaW5kZXhPZihcIlxcblwiKTtcbiAgaWYgKGkgPiAtMSkge1xuICAgIGxldCBpbmRlbnQgPSAwIC0gc3RhcnRJbmRlbnQgLSAyO1xuICAgIGZvciAoaSArPSAxOyBpbnB1dFtpXSA9PT0gXCIgXCIgJiYgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpbmRlbnQgKz0gMTtcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL1xcbiArL2csIHQgPT5cbiAgICAgIHQuc3Vic3RyKDAsIE1hdGgubWF4KHQubGVuZ3RoIC0gaW5kZW50LCAxKSksXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBpbnB1dDtcbn1cblxuZnVuY3Rpb24gYmVhdXRpZnlUZW1wbGF0ZUxvZyhpbnB1dCwgaW5kZXgpIHtcbiAgY29uc3QgcGxhY2Vob2xkZXIgPSBnZXRQbGFjZWhvbGRlcihpbmRleCk7XG5cbiAgY29uc3Qgb3V0cHV0ID0gbm9ybWFsaXplV2hpdGVzcGFjZShpbnB1dClcbiAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAuZmlsdGVyKGkgPT4gaSlcbiAgICAubWFwKGxpbmUgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IGxpbmUuaW5kZXhPZihwbGFjZWhvbGRlcik7XG5cbiAgICAgIGlmIChzdGFydEluZGV4ID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIGB8ICR7bGluZX1cXG4tLSR7XCItXCIucmVwZWF0KHN0YXJ0SW5kZXgpfSR7XCJeXCIucmVwZWF0KDYpfWA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBgfCAke2xpbmV9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiXFxuXCIpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXRlbXBsYXRlLWN1cmx5LWluLXN0cmluZ1xuICAgIC5yZXBsYWNlKFBMQUNFSE9MREVSX1JFR0VYUF9BTEwsIFwiJHsuLi59XCIpO1xuXG4gIHJldHVybiBgJHtvdXRwdXR9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBpbGVUZW1wbGF0ZShyYXdQYXJ0cywgaXNTVkcsIHN0eWxlcykge1xuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgY29uc3QgcGFydHMgPSBbXTtcblxuICBsZXQgc2lnbmF0dXJlID0gY3JlYXRlU2lnbmF0dXJlKHJhd1BhcnRzLCBzdHlsZXMpO1xuICBpZiAoaXNTVkcpIHNpZ25hdHVyZSA9IGA8c3ZnPiR7c2lnbmF0dXJlfTwvc3ZnPmA7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChJU19JRSkge1xuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IHNpZ25hdHVyZTtcbiAgfSBlbHNlIHtcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYDx0ZW1wbGF0ZT4ke3NpZ25hdHVyZX08L3RlbXBsYXRlPmA7XG4gICAgdGVtcGxhdGUuY29udGVudC5hcHBlbmRDaGlsZChjb250YWluZXIuY2hpbGRyZW5bMF0uY29udGVudCk7XG4gIH1cblxuICBpZiAoaXNTVkcpIHtcbiAgICBjb25zdCBzdmdSb290ID0gdGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkO1xuICAgIHRlbXBsYXRlLmNvbnRlbnQucmVtb3ZlQ2hpbGQoc3ZnUm9vdCk7XG4gICAgQXJyYXkuZnJvbShzdmdSb290LmNoaWxkTm9kZXMpLmZvckVhY2gobm9kZSA9PlxuICAgICAgdGVtcGxhdGUuY29udGVudC5hcHBlbmRDaGlsZChub2RlKSxcbiAgICApO1xuICB9XG5cbiAgcmVwbGFjZUNvbW1lbnRzKHRlbXBsYXRlLmNvbnRlbnQpO1xuXG4gIGNvbnN0IGNvbXBpbGVXYWxrZXIgPSBjcmVhdGVXYWxrZXIodGVtcGxhdGUuY29udGVudCk7XG4gIGxldCBjb21waWxlSW5kZXggPSAwO1xuXG4gIHdoaWxlIChjb21waWxlV2Fsa2VyLm5leHROb2RlKCkpIHtcbiAgICBjb25zdCBub2RlID0gY29tcGlsZVdhbGtlci5jdXJyZW50Tm9kZTtcblxuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgY29uc3QgdGV4dCA9IG5vZGUudGV4dENvbnRlbnQ7XG5cbiAgICAgIGlmICghdGV4dC5tYXRjaChQTEFDRUhPTERFUl9SRUdFWFBfRVFVQUwpKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0ZXh0Lm1hdGNoKFBMQUNFSE9MREVSX1JFR0VYUF9BTEwpO1xuICAgICAgICBpZiAocmVzdWx0cykge1xuICAgICAgICAgIGxldCBjdXJyZW50Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgcmVzdWx0c1xuICAgICAgICAgICAgLnJlZHVjZShcbiAgICAgICAgICAgICAgKGFjYywgcGxhY2Vob2xkZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbYmVmb3JlLCBuZXh0XSA9IGFjYy5wb3AoKS5zcGxpdChwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZSkgYWNjLnB1c2goYmVmb3JlKTtcbiAgICAgICAgICAgICAgICBhY2MucHVzaChwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQpIGFjYy5wdXNoKG5leHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFt0ZXh0XSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5mb3JFYWNoKChwYXJ0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS50ZXh0Q29udGVudCA9IHBhcnQ7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBhcnQpLFxuICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUubmV4dFNpYmxpbmcsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZXF1YWwgPSBub2RlLnRleHRDb250ZW50Lm1hdGNoKFBMQUNFSE9MREVSX1JFR0VYUF9FUVVBTCk7XG4gICAgICBpZiAoZXF1YWwpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKCFJU19JRSkgbm9kZS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIHBhcnRzW2VxdWFsWzFdXSA9IFtjb21waWxlSW5kZXgsIHJlc29sdmVWYWx1ZV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1sb25lbHktaWZcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICBBcnJheS5mcm9tKG5vZGUuYXR0cmlidXRlcykuZm9yRWFjaChhdHRyID0+IHtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF0dHIudmFsdWUudHJpbSgpO1xuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgY29uc3QgbmFtZSA9IElTX0lFID8gYXR0ci5uYW1lLnJlcGxhY2UoQVRUUl9QUkVGSVgsIFwiXCIpIDogYXR0ci5uYW1lO1xuICAgICAgICAgIGNvbnN0IGVxdWFsID0gdmFsdWUubWF0Y2goUExBQ0VIT0xERVJfUkVHRVhQX0VRVUFMKTtcbiAgICAgICAgICBpZiAoZXF1YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5TmFtZSA9IGdldFByb3BlcnR5TmFtZShyYXdQYXJ0c1tlcXVhbFsxXV0pO1xuICAgICAgICAgICAgcGFydHNbZXF1YWxbMV1dID0gW1xuICAgICAgICAgICAgICBjb21waWxlSW5kZXgsXG4gICAgICAgICAgICAgIHJlc29sdmVQcm9wZXJ0eShuYW1lLCBwcm9wZXJ0eU5hbWUsIGlzU1ZHKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyLm5hbWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gdmFsdWUubWF0Y2goUExBQ0VIT0xERVJfUkVHRVhQX0FMTCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0cykge1xuICAgICAgICAgICAgICBjb25zdCBwYXJ0aWFsTmFtZSA9IGBhdHRyX18ke25hbWV9YDtcblxuICAgICAgICAgICAgICByZXN1bHRzLmZvckVhY2goKHBsYWNlaG9sZGVyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFssIGlkXSA9IHBsYWNlaG9sZGVyLm1hdGNoKFBMQUNFSE9MREVSX1JFR0VYUF9FUVVBTCk7XG4gICAgICAgICAgICAgICAgcGFydHNbaWRdID0gW1xuICAgICAgICAgICAgICAgICAgY29tcGlsZUluZGV4LFxuICAgICAgICAgICAgICAgICAgKGhvc3QsIHRhcmdldCwgYXR0clZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkYXRhTWFwLmdldCh0YXJnZXQsIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtwYXJ0aWFsTmFtZV0gPSAoZGF0YVtwYXJ0aWFsTmFtZV0gfHwgdmFsdWUpLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgYXR0clZhbHVlID09IG51bGwgPyBcIlwiIDogYXR0clZhbHVlLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMSB8fCBpbmRleCArIDEgPT09IHJlc3VsdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShuYW1lLCBkYXRhW3BhcnRpYWxOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YVtwYXJ0aWFsTmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgYXR0ci52YWx1ZSA9IFwiXCI7XG5cbiAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgICAgICAgaWYgKElTX0lFICYmIG5hbWUgIT09IGF0dHIubmFtZSkge1xuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHIubmFtZSk7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgXCJcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBpbGVJbmRleCArPSAxO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVRlbXBsYXRlSW5zdGFuY2UoaG9zdCwgdGFyZ2V0LCBhcmdzLCBzdHlsZVNoZWV0cykge1xuICAgIGNvbnN0IGRhdGEgPSBkYXRhTWFwLmdldCh0YXJnZXQsIHsgdHlwZTogXCJmdW5jdGlvblwiIH0pO1xuXG4gICAgaWYgKHRlbXBsYXRlICE9PSBkYXRhLnRlbXBsYXRlKSB7XG4gICAgICBpZiAoZGF0YS50ZW1wbGF0ZSB8fCB0YXJnZXQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIHJlbW92ZVRlbXBsYXRlKHRhcmdldCk7XG4gICAgICB9XG5cbiAgICAgIGRhdGEucHJldkFyZ3MgPSBudWxsO1xuXG4gICAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmltcG9ydE5vZGUoXG4gICAgICAgIGFwcGx5U2hhZHlDU1ModGVtcGxhdGUsIGhvc3QudGFnTmFtZSkuY29udGVudCxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlbmRlcldhbGtlciA9IGNyZWF0ZVdhbGtlcihmcmFnbWVudCk7XG4gICAgICBjb25zdCBjbG9uZWRQYXJ0cyA9IHBhcnRzLnNsaWNlKDApO1xuXG4gICAgICBsZXQgcmVuZGVySW5kZXggPSAwO1xuICAgICAgbGV0IGN1cnJlbnRQYXJ0ID0gY2xvbmVkUGFydHMuc2hpZnQoKTtcblxuICAgICAgY29uc3QgbWFya2VycyA9IFtdO1xuXG4gICAgICBkYXRhLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICBkYXRhLm1hcmtlcnMgPSBtYXJrZXJzO1xuXG4gICAgICB3aGlsZSAocmVuZGVyV2Fsa2VyLm5leHROb2RlKCkpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHJlbmRlcldhbGtlci5jdXJyZW50Tm9kZTtcblxuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICAgIGlmIChQTEFDRUhPTERFUl9SRUdFWFBfRVFVQUwudGVzdChub2RlLnRleHRDb250ZW50KSkge1xuICAgICAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgICAgfSBlbHNlIGlmIChJU19JRSkge1xuICAgICAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IG5vZGUudGV4dENvbnRlbnQucmVwbGFjZShBVFRSX1JFR0VYUCwgXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiAmJlxuICAgICAgICAgIG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIG5vZGUudGFnTmFtZS5pbmRleE9mKFwiLVwiKSA+IC0xICYmXG4gICAgICAgICAgICAhY3VzdG9tRWxlbWVudHMuZ2V0KG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgICAgIGBNaXNzaW5nICR7c3RyaW5naWZ5RWxlbWVudChcbiAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICApfSBlbGVtZW50IGRlZmluaXRpb24gaW4gJHtzdHJpbmdpZnlFbGVtZW50KGhvc3QpfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChjdXJyZW50UGFydCAmJiBjdXJyZW50UGFydFswXSA9PT0gcmVuZGVySW5kZXgpIHtcbiAgICAgICAgICBtYXJrZXJzLnB1c2goW25vZGUsIGN1cnJlbnRQYXJ0WzFdXSk7XG4gICAgICAgICAgY3VycmVudFBhcnQgPSBjbG9uZWRQYXJ0cy5zaGlmdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVuZGVySW5kZXggKz0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhcmdldC5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgICAgZGF0YS5zdGFydE5vZGUgPSBmcmFnbWVudC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICBkYXRhLmVuZE5vZGUgPSBmcmFnbWVudC5jaGlsZE5vZGVzW2ZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgbGV0IHByZXZpb3VzQ2hpbGQgPSB0YXJnZXQ7XG5cbiAgICAgICAgbGV0IGNoaWxkID0gZnJhZ21lbnQuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgd2hpbGUgKGNoaWxkKSB7XG4gICAgICAgICAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNoaWxkLCBwcmV2aW91c0NoaWxkLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICBwcmV2aW91c0NoaWxkID0gY2hpbGQ7XG4gICAgICAgICAgY2hpbGQgPSBmcmFnbWVudC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFkb3B0ZWRTdHlsZVNoZWV0cyA9IHRhcmdldC5hZG9wdGVkU3R5bGVTaGVldHM7XG4gICAgaWYgKHN0eWxlU2hlZXRzKSB7XG4gICAgICBsZXQgaXNFcXVhbCA9IGZhbHNlO1xuXG4gICAgICBzdHlsZVNoZWV0cyA9IHN0eWxlU2hlZXRzLm1hcChzdHlsZSA9PiB7XG4gICAgICAgIGlmIChzdHlsZSBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQpIHJldHVybiBzdHlsZTtcblxuICAgICAgICBsZXQgc3R5bGVTaGVldCA9IHN0eWxlU2hlZXRzTWFwLmdldChzdHlsZSk7XG4gICAgICAgIGlmICghc3R5bGVTaGVldCkge1xuICAgICAgICAgIHN0eWxlU2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpO1xuICAgICAgICAgIHN0eWxlU2hlZXQucmVwbGFjZVN5bmMoc3R5bGUpO1xuICAgICAgICAgIHN0eWxlU2hlZXRzTWFwLnNldChzdHlsZSwgc3R5bGVTaGVldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0eWxlU2hlZXQ7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHN0eWxlU2hlZXRzLmxlbmd0aCA9PT0gYWRvcHRlZFN0eWxlU2hlZXRzLmxlbmd0aCkge1xuICAgICAgICBpc0VxdWFsID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZVNoZWV0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChzdHlsZVNoZWV0c1tpXSAhPT0gYWRvcHRlZFN0eWxlU2hlZXRzW2ldKSB7XG4gICAgICAgICAgICBpc0VxdWFsID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0VxdWFsKSB0YXJnZXQuYWRvcHRlZFN0eWxlU2hlZXRzID0gc3R5bGVTaGVldHM7XG4gICAgfSBlbHNlIGlmIChhZG9wdGVkU3R5bGVTaGVldHMgJiYgYWRvcHRlZFN0eWxlU2hlZXRzLmxlbmd0aCkge1xuICAgICAgdGFyZ2V0LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHByZXZBcmdzID0gZGF0YS5wcmV2QXJncztcbiAgICBkYXRhLnByZXZBcmdzID0gYXJncztcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLm1hcmtlcnMubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICBjb25zdCBbbm9kZSwgbWFya2VyXSA9IGRhdGEubWFya2Vyc1tpbmRleF07XG4gICAgICBpZiAoIXByZXZBcmdzIHx8IHByZXZBcmdzW2luZGV4XSAhPT0gYXJnc1tpbmRleF0pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtYXJrZXIoXG4gICAgICAgICAgICBob3N0LFxuICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgIGFyZ3NbaW5kZXhdLFxuICAgICAgICAgICAgcHJldkFyZ3MgPyBwcmV2QXJnc1tpbmRleF0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgYEZvbGxvd2luZyBlcnJvciB3YXMgdGhyb3duIHdoZW4gdXBkYXRpbmcgYSB0ZW1wbGF0ZSBleHByZXNzaW9uIGluICR7c3RyaW5naWZ5RWxlbWVudChcbiAgICAgICAgICAgICAgICBob3N0LFxuICAgICAgICAgICAgICApfVxcbiR7YmVhdXRpZnlUZW1wbGF0ZUxvZyhzaWduYXR1cmUsIGluZGV4KX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGFyZ2V0Lm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgc2hhZHlDU1Moc2hhZHkgPT4ge1xuICAgICAgICBpZiAoaG9zdC5zaGFkb3dSb290KSB7XG4gICAgICAgICAgaWYgKHByZXZBcmdzKSB7XG4gICAgICAgICAgICBzaGFkeS5zdHlsZVN1YnRyZWUoaG9zdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNoYWR5LnN0eWxlRWxlbWVudChob3N0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cbiJdfQ==","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { storePointer } from \"../utils.js\";\n\nfunction resolveValue(_ref, setter) {\n  var target = _ref.target;\n  var value;\n\n  switch (target.type) {\n    case \"radio\":\n    case \"checkbox\":\n      value = target.checked && target.value;\n      break;\n\n    case \"file\":\n      value = target.files;\n      break;\n\n    default:\n      value = target.value;\n  }\n\n  setter(value);\n}\n\nfunction getPartialObject(name, value) {\n  return name.split(\".\").reverse().reduce(function (acc, key) {\n    if (!acc) return _defineProperty({}, key, value);\n    return _defineProperty({}, key, acc);\n  }, null);\n}\n\nvar stringCache = new Map();\nexport function set(property, valueOrPath) {\n  if (!property) {\n    throw Error(\"The first argument must be a property name or an object instance: \".concat(property));\n  }\n\n  if (_typeof(property) === \"object\") {\n    if (valueOrPath === undefined) {\n      throw Error(\"For model instance property the second argument must be defined\");\n    }\n\n    var store = storePointer.get(property);\n\n    if (!store) {\n      throw Error(\"Provided object must be a model instance of the store\");\n    }\n\n    return function (host, event) {\n      resolveValue(event, function (value) {\n        store.set(property, valueOrPath !== null ? getPartialObject(valueOrPath, value) : valueOrPath);\n      });\n    };\n  }\n\n  if (arguments.length === 2) {\n    return function (host) {\n      host[property] = valueOrPath;\n    };\n  }\n\n  var fn = stringCache.get(property);\n\n  if (!fn) {\n    fn = function fn(host, event) {\n      resolveValue(event, function (value) {\n        host[property] = value;\n      });\n    };\n\n    stringCache.set(property, fn);\n  }\n\n  return fn;\n}\nvar promiseMap = new WeakMap();\nexport function resolve(promise, placeholder) {\n  var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 200;\n  return function (host, target) {\n    var timeout;\n\n    if (placeholder) {\n      timeout = setTimeout(function () {\n        timeout = undefined;\n        requestAnimationFrame(function () {\n          placeholder(host, target);\n        });\n      }, delay);\n    }\n\n    promiseMap.set(target, promise);\n    promise.then(function (template) {\n      if (timeout) clearTimeout(timeout);\n\n      if (promiseMap.get(target) === promise) {\n        template(host, target);\n        promiseMap.set(target, null);\n      }\n    });\n  };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZW1wbGF0ZS9oZWxwZXJzLmpzIl0sIm5hbWVzIjpbInN0b3JlUG9pbnRlciIsInJlc29sdmVWYWx1ZSIsInNldHRlciIsInRhcmdldCIsInZhbHVlIiwidHlwZSIsImNoZWNrZWQiLCJmaWxlcyIsImdldFBhcnRpYWxPYmplY3QiLCJuYW1lIiwic3BsaXQiLCJyZXZlcnNlIiwicmVkdWNlIiwiYWNjIiwia2V5Iiwic3RyaW5nQ2FjaGUiLCJNYXAiLCJzZXQiLCJwcm9wZXJ0eSIsInZhbHVlT3JQYXRoIiwiRXJyb3IiLCJ1bmRlZmluZWQiLCJzdG9yZSIsImdldCIsImhvc3QiLCJldmVudCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZuIiwicHJvbWlzZU1hcCIsIldlYWtNYXAiLCJyZXNvbHZlIiwicHJvbWlzZSIsInBsYWNlaG9sZGVyIiwiZGVsYXkiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInRoZW4iLCJ0ZW1wbGF0ZSIsImNsZWFyVGltZW91dCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLFNBQVNBLFlBQVQsUUFBNkIsYUFBN0I7O0FBRUEsU0FBU0MsWUFBVCxPQUFrQ0MsTUFBbEMsRUFBMEM7QUFBQSxNQUFsQkMsTUFBa0IsUUFBbEJBLE1BQWtCO0FBQ3hDLE1BQUlDLEtBQUo7O0FBRUEsVUFBUUQsTUFBTSxDQUFDRSxJQUFmO0FBQ0UsU0FBSyxPQUFMO0FBQ0EsU0FBSyxVQUFMO0FBQ0VELE1BQUFBLEtBQUssR0FBR0QsTUFBTSxDQUFDRyxPQUFQLElBQWtCSCxNQUFNLENBQUNDLEtBQWpDO0FBQ0E7O0FBQ0YsU0FBSyxNQUFMO0FBQ0VBLE1BQUFBLEtBQUssR0FBR0QsTUFBTSxDQUFDSSxLQUFmO0FBQ0E7O0FBQ0Y7QUFDRUgsTUFBQUEsS0FBSyxHQUFHRCxNQUFNLENBQUNDLEtBQWY7QUFUSjs7QUFZQUYsRUFBQUEsTUFBTSxDQUFDRSxLQUFELENBQU47QUFDRDs7QUFFRCxTQUFTSSxn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QSxJQUFBQSxPQUFPLENBQUNNLElBQVIsQ0FBYSxVQUFBQyxRQUFRLEVBQUk7QUFDdkIsVUFBSUosT0FBSixFQUFhSyxZQUFZLENBQUNMLE9BQUQsQ0FBWjs7QUFFYixVQUFJTixVQUFVLENBQUNOLEdBQVgsQ0FBZXBCLE1BQWYsTUFBMkI2QixPQUEvQixFQUF3QztBQUN0Q08sUUFBQUEsUUFBUSxDQUFDZixJQUFELEVBQU9yQixNQUFQLENBQVI7QUFDQTBCLFFBQUFBLFVBQVUsQ0FBQ1osR0FBWCxDQUFlZCxNQUFmLEVBQXVCLElBQXZCO0FBQ0Q7QUFDRixLQVBEO0FBUUQsR0F2QkQ7QUF3QkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdG9yZVBvaW50ZXIgfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcblxuZnVuY3Rpb24gcmVzb2x2ZVZhbHVlKHsgdGFyZ2V0IH0sIHNldHRlcikge1xuICBsZXQgdmFsdWU7XG5cbiAgc3dpdGNoICh0YXJnZXQudHlwZSkge1xuICAgIGNhc2UgXCJyYWRpb1wiOlxuICAgIGNhc2UgXCJjaGVja2JveFwiOlxuICAgICAgdmFsdWUgPSB0YXJnZXQuY2hlY2tlZCAmJiB0YXJnZXQudmFsdWU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiZmlsZVwiOlxuICAgICAgdmFsdWUgPSB0YXJnZXQuZmlsZXM7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdmFsdWUgPSB0YXJnZXQudmFsdWU7XG4gIH1cblxuICBzZXR0ZXIodmFsdWUpO1xufVxuXG5mdW5jdGlvbiBnZXRQYXJ0aWFsT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBuYW1lXG4gICAgLnNwbGl0KFwiLlwiKVxuICAgIC5yZXZlcnNlKClcbiAgICAucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgaWYgKCFhY2MpIHJldHVybiB7IFtrZXldOiB2YWx1ZSB9O1xuICAgICAgcmV0dXJuIHsgW2tleV06IGFjYyB9O1xuICAgIH0sIG51bGwpO1xufVxuXG5jb25zdCBzdHJpbmdDYWNoZSA9IG5ldyBNYXAoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldChwcm9wZXJ0eSwgdmFsdWVPclBhdGgpIHtcbiAgaWYgKCFwcm9wZXJ0eSkge1xuICAgIHRocm93IEVycm9yKFxuICAgICAgYFRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgcHJvcGVydHkgbmFtZSBvciBhbiBvYmplY3QgaW5zdGFuY2U6ICR7cHJvcGVydHl9YCxcbiAgICApO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwcm9wZXJ0eSA9PT0gXCJvYmplY3RcIikge1xuICAgIGlmICh2YWx1ZU9yUGF0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgXCJGb3IgbW9kZWwgaW5zdGFuY2UgcHJvcGVydHkgdGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGRlZmluZWRcIixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcmUgPSBzdG9yZVBvaW50ZXIuZ2V0KHByb3BlcnR5KTtcblxuICAgIGlmICghc3RvcmUpIHtcbiAgICAgIHRocm93IEVycm9yKFwiUHJvdmlkZWQgb2JqZWN0IG11c3QgYmUgYSBtb2RlbCBpbnN0YW5jZSBvZiB0aGUgc3RvcmVcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIChob3N0LCBldmVudCkgPT4ge1xuICAgICAgcmVzb2x2ZVZhbHVlKGV2ZW50LCB2YWx1ZSA9PiB7XG4gICAgICAgIHN0b3JlLnNldChcbiAgICAgICAgICBwcm9wZXJ0eSxcbiAgICAgICAgICB2YWx1ZU9yUGF0aCAhPT0gbnVsbFxuICAgICAgICAgICAgPyBnZXRQYXJ0aWFsT2JqZWN0KHZhbHVlT3JQYXRoLCB2YWx1ZSlcbiAgICAgICAgICAgIDogdmFsdWVPclBhdGgsXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICByZXR1cm4gaG9zdCA9PiB7XG4gICAgICBob3N0W3Byb3BlcnR5XSA9IHZhbHVlT3JQYXRoO1xuICAgIH07XG4gIH1cblxuICBsZXQgZm4gPSBzdHJpbmdDYWNoZS5nZXQocHJvcGVydHkpO1xuXG4gIGlmICghZm4pIHtcbiAgICBmbiA9IChob3N0LCBldmVudCkgPT4ge1xuICAgICAgcmVzb2x2ZVZhbHVlKGV2ZW50LCB2YWx1ZSA9PiB7XG4gICAgICAgIGhvc3RbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgc3RyaW5nQ2FjaGUuc2V0KHByb3BlcnR5LCBmbik7XG4gIH1cblxuICByZXR1cm4gZm47XG59XG5cbmNvbnN0IHByb21pc2VNYXAgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmUocHJvbWlzZSwgcGxhY2Vob2xkZXIsIGRlbGF5ID0gMjAwKSB7XG4gIHJldHVybiAoaG9zdCwgdGFyZ2V0KSA9PiB7XG4gICAgbGV0IHRpbWVvdXQ7XG5cbiAgICBpZiAocGxhY2Vob2xkZXIpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGltZW91dCA9IHVuZGVmaW5lZDtcblxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIHBsYWNlaG9sZGVyKGhvc3QsIHRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgZGVsYXkpO1xuICAgIH1cblxuICAgIHByb21pc2VNYXAuc2V0KHRhcmdldCwgcHJvbWlzZSk7XG5cbiAgICBwcm9taXNlLnRoZW4odGVtcGxhdGUgPT4ge1xuICAgICAgaWYgKHRpbWVvdXQpIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblxuICAgICAgaWYgKHByb21pc2VNYXAuZ2V0KHRhcmdldCkgPT09IHByb21pc2UpIHtcbiAgICAgICAgdGVtcGxhdGUoaG9zdCwgdGFyZ2V0KTtcbiAgICAgICAgcHJvbWlzZU1hcC5zZXQodGFyZ2V0LCBudWxsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cbiJdfQ==","import defineElements from \"../define.js\";\nimport { compileTemplate, getPlaceholder } from \"./core.js\";\nimport * as helpers from \"./helpers.js\";\nvar PLACEHOLDER = getPlaceholder();\nvar SVG_PLACEHOLDER = getPlaceholder(\"svg\");\nvar STYLE_IMPORT_REGEXP = /@import/;\nvar templatesMap = new Map();\nvar stylesMap = new WeakMap();\nvar methods = {\n  define: function define(elements) {\n    defineElements(elements);\n    return this;\n  },\n  key: function key(id) {\n    this.id = id;\n    return this;\n  },\n  style: function style() {\n    for (var _len = arguments.length, styles = new Array(_len), _key = 0; _key < _len; _key++) {\n      styles[_key] = arguments[_key];\n    }\n\n    stylesMap.set(this, styles.filter(function (style) {\n      return style;\n    }));\n    return this;\n  }\n};\n\nfunction create(parts, args, isSVG) {\n  var createTemplate = function createTemplate(host) {\n    var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : host;\n    var styles = stylesMap.get(createTemplate);\n    var hasAdoptedStyleSheets;\n    var id = parts.join(PLACEHOLDER);\n\n    if (styles) {\n      var joinedStyles = styles.join(PLACEHOLDER);\n      hasAdoptedStyleSheets = !!target.adoptedStyleSheets && !STYLE_IMPORT_REGEXP.test(joinedStyles);\n      if (!hasAdoptedStyleSheets) id += joinedStyles;\n    }\n\n    if (isSVG) id += SVG_PLACEHOLDER;\n    var render = templatesMap.get(id);\n\n    if (!render) {\n      render = compileTemplate(parts, isSVG, !hasAdoptedStyleSheets && styles);\n      templatesMap.set(id, render);\n    }\n\n    render(host, target, args, hasAdoptedStyleSheets && styles);\n  };\n\n  return Object.assign(createTemplate, methods);\n}\n\nexport function html(parts) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  return create(parts, args);\n}\nexport function svg(parts) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  return create(parts, args, true);\n}\nObject.assign(html, helpers);\nObject.assign(svg, helpers);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZW1wbGF0ZS9pbmRleC5qcyJdLCJuYW1lcyI6WyJkZWZpbmVFbGVtZW50cyIsImNvbXBpbGVUZW1wbGF0ZSIsImdldFBsYWNlaG9sZGVyIiwiaGVscGVycyIsIlBMQUNFSE9MREVSIiwiU1ZHX1BMQUNFSE9MREVSIiwiU1RZTEVfSU1QT1JUX1JFR0VYUCIsInRlbXBsYXRlc01hcCIsIk1hcCIsInN0eWxlc01hcCIsIldlYWtNYXAiLCJtZXRob2RzIiwiZGVmaW5lIiwiZWxlbWVudHMiLCJrZXkiLCJpZCIsInN0eWxlIiwic3R5bGVzIiwic2V0IiwiZmlsdGVyIiwiY3JlYXRlIiwicGFydHMiLCJhcmdzIiwiaXNTVkciLCJjcmVhdGVUZW1wbGF0ZSIsImhvc3QiLCJ0YXJnZXQiLCJnZXQiLCJoYXNBZG9wdGVkU3R5bGVTaGVldHMiLCJqb2luIiwiam9pbmVkU3R5bGVzIiwiYWRvcHRlZFN0eWxlU2hlZXRzIiwidGVzdCIsInJlbmRlciIsIk9iamVjdCIsImFzc2lnbiIsImh0bWwiLCJzdmciXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLGNBQVAsTUFBMkIsY0FBM0I7QUFFQSxTQUFTQyxlQUFULEVBQTBCQyxjQUExQixRQUFnRCxXQUFoRDtBQUNBLE9BQU8sS0FBS0MsT0FBWixNQUF5QixjQUF6QjtBQUVBLElBQU1DLFdBQVcsR0FBR0YsY0FBYyxFQUFsQztBQUNBLElBQU1HLGVBQWUsR0FBR0gsY0FBYyxDQUFDLEtBQUQsQ0FBdEM7QUFDQSxJQUFNSSxtQkFBbUIsR0FBRyxTQUE1QjtBQUVBLElBQU1DLFlBQVksR0FBRyxJQUFJQyxHQUFKLEVBQXJCO0FBQ0EsSUFBTUMsU0FBUyxHQUFHLElBQUlDLE9BQUosRUFBbEI7QUFFQSxJQUFNQyxPQUFPLEdBQUc7QUFDZEMsRUFBQUEsTUFEYyxrQkFDUEMsUUFETyxFQUNHO0FBQ2ZiLElBQUFBLGNBQWMsQ0FBQ2EsUUFBRCxDQUFkO0FBQ0EsV0FBTyxJQUFQO0FBQ0QsR0FKYTtBQUtkQyxFQUFBQSxHQUxjLGVBS1ZDLEVBTFUsRUFLTjtBQUNOLFNBQUtBLEVBQUwsR0FBVUEsRUFBVjtBQUNBLFdBQU8sSUFBUDtBQUNELEdBUmE7QUFTZEMsRUFBQUEsS0FUYyxtQkFTRztBQUFBLHNDQUFSQyxNQUFRO0FBQVJBLE1BQUFBLE1BQVE7QUFBQTs7QUFDZlIsSUFBQUEsU0FBUyxDQUFDUyxHQUFWLENBQ0UsSUFERixFQUVFRCxNQUFNLENBQUNFLE1BQVAsQ0FBYyxVQUFBSCxLQUFLO0FBQUEsYUFBSUEsS0FBSjtBQUFBLEtBQW5CLENBRkY7QUFJQSxXQUFPLElBQVA7QUFDRDtBQWZhLENBQWhCOztBQWtCQSxTQUFTSSxNQUFULENBQWdCQyxLQUFoQixFQUF1QkMsSUFBdkIsRUFBNkJDLEtBQTdCLEVBQW9DO0FBQ2xDLE1BQU1DLGNBQWMsR0FBRyxTQUFqQkEsY0FBaUIsQ0FBQ0MsSUFBRCxFQUF5QjtBQUFBLFFBQWxCQyxNQUFrQix1RUFBVEQsSUFBUztBQUM5QyxRQUFNUixNQUFNLEdBQUdSLFNBQVMsQ0FBQ2tCLEdBQVYsQ0FBY0gsY0FBZCxDQUFmO0FBQ0EsUUFBSUkscUJBQUo7QUFDQSxRQUFJYixFQUFFLEdBQUdNLEtBQUssQ0FBQ1EsSUFBTixDQUFXekIsV0FBWCxDQUFUOztBQUVBLFFBQUlhLE1BQUosRUFBWTtBQUNWLFVBQU1hLFlBQVksR0FBR2IsTUFBTSxDQUFDWSxJQUFQLENBQVl6QixXQUFaLENBQXJCO0FBQ0F3QixNQUFBQSxxQkFBcUIsR0FDbkIsQ0FBQyxDQUFDRixNQUFNLENBQUNLLGtCQUFULElBQStCLENBQUN6QixtQkFBbUIsQ0FBQzBCLElBQXBCLENBQXlCRixZQUF6QixDQURsQztBQUVBLFVBQUksQ0FBQ0YscUJBQUwsRUFBNEJiLEVBQUUsSUFBSWUsWUFBTjtBQUM3Qjs7QUFFRCxRQUFJUCxLQUFKLEVBQVdSLEVBQUUsSUFBSVYsZUFBTjtBQUVYLFFBQUk0QixNQUFNLEdBQUcxQixZQUFZLENBQUNvQixHQUFiLENBQWlCWixFQUFqQixDQUFiOztBQUNBLFFBQUksQ0FBQ2tCLE1BQUwsRUFBYTtBQUNYQSxNQUFBQSxNQUFNLEdBQUdoQyxlQUFlLENBQUNvQixLQUFELEVBQVFFLEtBQVIsRUFBZSxDQUFDSyxxQkFBRCxJQUEwQlgsTUFBekMsQ0FBeEI7QUFDQVYsTUFBQUEsWUFBWSxDQUFDVyxHQUFiLENBQWlCSCxFQUFqQixFQUFxQmtCLE1BQXJCO0FBQ0Q7O0FBRURBLElBQUFBLE1BQU0sQ0FBQ1IsSUFBRCxFQUFPQyxNQUFQLEVBQWVKLElBQWYsRUFBcUJNLHFCQUFxQixJQUFJWCxNQUE5QyxDQUFOO0FBQ0QsR0FyQkQ7O0FBdUJBLFNBQU9pQixNQUFNLENBQUNDLE1BQVAsQ0FBY1gsY0FBZCxFQUE4QmIsT0FBOUIsQ0FBUDtBQUNEOztBQUVELE9BQU8sU0FBU3lCLElBQVQsQ0FBY2YsS0FBZCxFQUE4QjtBQUFBLHFDQUFOQyxJQUFNO0FBQU5BLElBQUFBLElBQU07QUFBQTs7QUFDbkMsU0FBT0YsTUFBTSxDQUFDQyxLQUFELEVBQVFDLElBQVIsQ0FBYjtBQUNEO0FBRUQsT0FBTyxTQUFTZSxHQUFULENBQWFoQixLQUFiLEVBQTZCO0FBQUEscUNBQU5DLElBQU07QUFBTkEsSUFBQUEsSUFBTTtBQUFBOztBQUNsQyxTQUFPRixNQUFNLENBQUNDLEtBQUQsRUFBUUMsSUFBUixFQUFjLElBQWQsQ0FBYjtBQUNEO0FBRURZLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjQyxJQUFkLEVBQW9CakMsT0FBcEI7QUFDQStCLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjRSxHQUFkLEVBQW1CbEMsT0FBbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lRWxlbWVudHMgZnJvbSBcIi4uL2RlZmluZS5qc1wiO1xuXG5pbXBvcnQgeyBjb21waWxlVGVtcGxhdGUsIGdldFBsYWNlaG9sZGVyIH0gZnJvbSBcIi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgaGVscGVycyBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5cbmNvbnN0IFBMQUNFSE9MREVSID0gZ2V0UGxhY2Vob2xkZXIoKTtcbmNvbnN0IFNWR19QTEFDRUhPTERFUiA9IGdldFBsYWNlaG9sZGVyKFwic3ZnXCIpO1xuY29uc3QgU1RZTEVfSU1QT1JUX1JFR0VYUCA9IC9AaW1wb3J0LztcblxuY29uc3QgdGVtcGxhdGVzTWFwID0gbmV3IE1hcCgpO1xuY29uc3Qgc3R5bGVzTWFwID0gbmV3IFdlYWtNYXAoKTtcblxuY29uc3QgbWV0aG9kcyA9IHtcbiAgZGVmaW5lKGVsZW1lbnRzKSB7XG4gICAgZGVmaW5lRWxlbWVudHMoZWxlbWVudHMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9LFxuICBrZXkoaWQpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIHN0eWxlKC4uLnN0eWxlcykge1xuICAgIHN0eWxlc01hcC5zZXQoXG4gICAgICB0aGlzLFxuICAgICAgc3R5bGVzLmZpbHRlcihzdHlsZSA9PiBzdHlsZSksXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZShwYXJ0cywgYXJncywgaXNTVkcpIHtcbiAgY29uc3QgY3JlYXRlVGVtcGxhdGUgPSAoaG9zdCwgdGFyZ2V0ID0gaG9zdCkgPT4ge1xuICAgIGNvbnN0IHN0eWxlcyA9IHN0eWxlc01hcC5nZXQoY3JlYXRlVGVtcGxhdGUpO1xuICAgIGxldCBoYXNBZG9wdGVkU3R5bGVTaGVldHM7XG4gICAgbGV0IGlkID0gcGFydHMuam9pbihQTEFDRUhPTERFUik7XG5cbiAgICBpZiAoc3R5bGVzKSB7XG4gICAgICBjb25zdCBqb2luZWRTdHlsZXMgPSBzdHlsZXMuam9pbihQTEFDRUhPTERFUik7XG4gICAgICBoYXNBZG9wdGVkU3R5bGVTaGVldHMgPVxuICAgICAgICAhIXRhcmdldC5hZG9wdGVkU3R5bGVTaGVldHMgJiYgIVNUWUxFX0lNUE9SVF9SRUdFWFAudGVzdChqb2luZWRTdHlsZXMpO1xuICAgICAgaWYgKCFoYXNBZG9wdGVkU3R5bGVTaGVldHMpIGlkICs9IGpvaW5lZFN0eWxlcztcbiAgICB9XG5cbiAgICBpZiAoaXNTVkcpIGlkICs9IFNWR19QTEFDRUhPTERFUjtcblxuICAgIGxldCByZW5kZXIgPSB0ZW1wbGF0ZXNNYXAuZ2V0KGlkKTtcbiAgICBpZiAoIXJlbmRlcikge1xuICAgICAgcmVuZGVyID0gY29tcGlsZVRlbXBsYXRlKHBhcnRzLCBpc1NWRywgIWhhc0Fkb3B0ZWRTdHlsZVNoZWV0cyAmJiBzdHlsZXMpO1xuICAgICAgdGVtcGxhdGVzTWFwLnNldChpZCwgcmVuZGVyKTtcbiAgICB9XG5cbiAgICByZW5kZXIoaG9zdCwgdGFyZ2V0LCBhcmdzLCBoYXNBZG9wdGVkU3R5bGVTaGVldHMgJiYgc3R5bGVzKTtcbiAgfTtcblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihjcmVhdGVUZW1wbGF0ZSwgbWV0aG9kcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBodG1sKHBhcnRzLCAuLi5hcmdzKSB7XG4gIHJldHVybiBjcmVhdGUocGFydHMsIGFyZ3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3ZnKHBhcnRzLCAuLi5hcmdzKSB7XG4gIHJldHVybiBjcmVhdGUocGFydHMsIGFyZ3MsIHRydWUpO1xufVxuXG5PYmplY3QuYXNzaWduKGh0bWwsIGhlbHBlcnMpO1xuT2JqZWN0LmFzc2lnbihzdmcsIGhlbHBlcnMpO1xuIl19","/*\r\n  TouchMIDI v2\r\n  row.js - A simple div with flexbox layout\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\nimport { html, define, property } from 'hybrids'\r\n\r\nexport const Component = {\r\n  grow: 1,\r\n  margin: 0,\r\n  border: false,\r\n  colour: property('#ffffff'),\r\n  _direction: 'row',\r\n\r\n  render: ({ grow, margin, border, colour, _direction }) => {\r\n    const borderStyle = border ? 'var(--b-width) solid' : 'none'\r\n\r\n    const css = `\r\n    :host{\r\n      flex-grow: ${grow};\r\n      margin: ${margin}rem;\r\n      display: flex;\r\n      flex-direction: ${_direction};\r\n\r\n    }\r\n    div {\r\n      display: flex;\r\n      flex-direction: ${_direction};\r\n      flex: 1 1;\r\n      border-radius: var(--b-radius);\r\n      border: ${borderStyle}; \r\n      border-color: ${colour};\r\n\r\n    }`\r\n\r\n    return html`<div><slot></div>`.style(css)\r\n  }\r\n}\r\n\r\ndefine('group-row', Component)\r\n","/*\r\n  TouchMIDI v2\r\n  column.js - A simple div with flexbox layout\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\nimport { define } from 'hybrids'\r\nimport { Component } from './row.js'\r\n\r\n// What a lovely little hack, deep clone the exported row component and change one property\r\nvar ColumnComponent = Object.assign({}, Component)\r\nColumnComponent._direction = 'column'\r\ndefine('group-column', ColumnComponent)\r\n","/*\r\n  TouchMIDI v2\r\n  midi.js - All MIDI handling and helper functions, effectively a global singleton\r\n  Ben Coleman, Dec 2020\r\n*/\r\n\r\nconst DEBUG = true\r\n\r\nexport var access\r\nvar midiOut\r\nvar globalChannel\r\n\r\nexport async function getAccess() {\r\n  try {\r\n    if (!access) {\r\n      // First try to get MIDI access, will throw error if fails\r\n      access = await navigator.requestMIDIAccess()\r\n    }\r\n    return access\r\n  } catch (err) {\r\n    console.error('MIDI getAccess failed', err)\r\n  }\r\n}\r\n\r\n// =====================================================================================\r\n// Configure globals used by MIDI, the output device and any global channel\r\n// =====================================================================================\r\nexport function setup(deviceId = 'output-1', globalChan = 0) {\r\n  midiOut = deviceId\r\n  globalChannel = globalChan\r\n}\r\n\r\n// =====================================================================================\r\n// Send MIDI note ON\r\n// =====================================================================================\r\nexport function sendNoteOn(note, chan = 1, velo = 127) {\r\n  if (!midiOut) return\r\n  const channel =  chan\r\n\r\n  checkValue(note, 'note')\r\n  checkValue(velo, 'velocity')\r\n  checkChannel(channel)\r\n\r\n  console.log(`MIDI note on - note:${note}, velo:${velo}, channel:${channel}`)\r\n  midiOut.send([0x90 + (channel - 1), note, velo])\r\n}\r\n\r\n// =====================================================================================\r\n// Send MIDI note OFF, default velocity is zero\r\n// =====================================================================================\r\nexport function sendNoteOff(note, chan = 1, velo = 0) {\r\n  if (!midiOut) return\r\n  const channel = globalChannel > 0 ? globalChannel : chan\r\n\r\n  checkValue(note, 'note')\r\n  checkValue(velo, 'velocity')\r\n  checkChannel(channel)\r\n\r\n  if (DEBUG) console.debug(`MIDI note off - note:${note}, velo:${velo}, channel:${channel}`)\r\n  midiOut.send([0x80 + (channel - 1), note, velo])\r\n}\r\n\r\n// =====================================================================================\r\n// Send MIDI controller change\r\n// =====================================================================================\r\nexport function sendCC(cc, chan = 1, val = 0) {\r\n  if (!midiOut) return\r\n  const channel = chan;\r\n\r\n  checkValue(cc, 'CC')\r\n  checkValue(val)\r\n  checkChannel(channel)\r\n\r\n  if (DEBUG) console.debug(`MIDI control - cc:${cc}, val:${val}, channel:${channel}`)\r\n  midiOut.send([0xb0 + (channel - 1), cc, val])\r\n}\r\n\r\n// =====================================================================================\r\n// Send MIDI pitch bend\r\n// =====================================================================================\r\nexport function sendPitchBend(chan = 1, val = 0) {\r\n  if (!midiOut) return\r\n  const channel = globalChannel > 0 ? globalChannel : chan\r\n\r\n  checkChannel(channel)\r\n\r\n  // I have no idea if this 14 bit stuff works...\r\n  const val_msb = Math.floor(val / 128)\r\n  const val_lsb = Math.floor(val % 128)\r\n\r\n  if (DEBUG) console.debug(`MIDI pitchbend - val_msb:${val_msb}, val_lsb:${val_lsb}, channel:${channel}`)\r\n  midiOut.send([0xe0 + (channel - 1), val_msb, val_lsb])\r\n}\r\n\r\n// =====================================================================================\r\n// Send series of messages for a NRPN change\r\n// =====================================================================================\r\nexport function sendNRPN(bytePair, chan = 1, val = 0, highRes = false) {\r\n  if (!midiOut) return\r\n  const channel = globalChannel > 0 ? globalChannel : chan\r\n\r\n  try {\r\n    const bytes = bytePair.split(',')\r\n    const lsb = parseInt(bytes[0].trim())\r\n    const msb = parseInt(bytes[1].trim())\r\n\r\n    checkValue(lsb, 'NRPN LSB')\r\n    checkValue(msb, 'NRPN MSB')\r\n    checkChannel(channel)\r\n\r\n    // Send two messages to select which NRPN we are updating\r\n    midiOut.send([0xb0 + (chan - 1), 0x63, msb])\r\n    midiOut.send([0xb0 + (chan - 1), 0x62, lsb])\r\n\r\n    if (DEBUG) console.debug(`MIDI nrpn - lsb:${lsb}, msb:${msb}, val:${val}, channel:${channel}, highRes:${highRes}`)\r\n\r\n    // Handling of high res values (e.g. greater than 127 or 14-bits)\r\n    // This has been tested on a Novation Ultranova, not sure if this is MIDI standard\r\n    if (highRes) {\r\n      if (!Number.isInteger(val)) throw 'Bad value'\r\n      const val_msb = Math.floor(val / 128)\r\n      const val_lsb = Math.floor(val % 128)\r\n      // Send two messages to set both LSB and MSB of high res 14 bit value\r\n      midiOut.send([0xb0 + (chan - 1), 0x06, val_msb])\r\n      midiOut.send([0xb0 + (chan - 1), 0x26, val_lsb])\r\n    } else {\r\n      checkValue(val)\r\n      // Send one message (CC 6) to set value\r\n      midiOut.send([0xb0 + (chan - 1), 0x06, val])\r\n    }\r\n  } catch (err) {\r\n    console.warn('Malformed NRPN, it should be two integers separated by commas:', bytePair, val)\r\n  }\r\n}\r\n\r\n// =====================================================================================\r\n// Send MIDI program change with bank select\r\n// =====================================================================================\r\nexport function sendProgChange(bytePair, chan = 1, progNum = 0, overrideGlobal) {\r\n  if (!midiOut) return\r\n  const channel = globalChannel > 0 && !overrideGlobal ? globalChannel : chan\r\n\r\n  try {\r\n    const bytes = bytePair.split(',')\r\n    const lsb = parseInt(bytes[0].trim())\r\n    const msb = parseInt(bytes[1].trim())\r\n\r\n    checkValue(lsb, 'Bank LSB')\r\n    checkValue(msb, 'Bank MSB')\r\n    checkChannel(channel)\r\n\r\n    console.log(`MIDI prog change - lsb:${lsb}, msb:${msb}, progNum:${progNum}, channel:${channel}`)\r\n\r\n    // Send three messages two for bank select and one for prog change\r\n    midiOut.send([0xb0 + (channel - 1), 0x00, msb])\r\n    midiOut.send([0xb0 + (channel - 1), 0x20, lsb])\r\n    midiOut.send([0xc0 + (channel - 1), progNum])\r\n    console.log(`Sent bank ${msb}-${lsb}, prog ${progNum} to channel ${channel}`);\r\n  } catch (err) {\r\n    console.error(err);\r\n    console.warn('Malformed program change number, it should be two integers separated by commas:', bytePair, progNum, channel)\r\n  }\r\n\r\n}\r\n\r\n// =====================================================================================\r\n// Validation functions\r\n// =====================================================================================\r\nfunction checkChannel(channel) {\r\n  if (!(channel > 0 && channel <= 16 && Number.isInteger(channel))) {\r\n    throw `MIDI channel '${channel}' is invalid, should be an integer between 1 and 16`\r\n  }\r\n}\r\n\r\nfunction checkValue(value, type = 'value') {\r\n  if (!(value >= 0 && value <= 127 && Number.isInteger(value))) {\r\n    throw `MIDI value '${value}' for '${type}' is invalid, should be an integer between 0 and 127`\r\n  }\r\n}\r\n","/*\r\n  TouchMIDI v2\r\n  utils.js - Shared functions and common helpers\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\nimport { config } from './main'\r\n\r\nconst filename = window.location.pathname.substring(window.location.pathname.lastIndexOf('/') + 1)\r\n\r\n// =====================================================================================\r\n// Good old fashion math clamping function\r\n// =====================================================================================\r\nexport function clamp(val, min, max) {\r\n  return Math.min(Math.max(val, min), max)\r\n}\r\n\r\n// =====================================================================================\r\n// Formats labels for widgets with dynamic values based on formatting codes\r\n// =====================================================================================\r\nexport function formatLabel(input, value = '', percent = '', chan = '', cc = '', note = '') {\r\n  let newLabel = input.replaceAll('\\\\n', '<br>')\r\n  // This handles %v and also %v+mod and %v-mod, e.g. '%v-63' to subtract 63 from the value\r\n  newLabel = newLabel.replaceAll(/%v([-+]\\d+)?/g, (match, modifier) => {\r\n    if (modifier) {\r\n      return value + parseInt(modifier)\r\n    }\r\n    return value\r\n  })\r\n  newLabel = newLabel.replaceAll('%h', chan)\r\n  newLabel = newLabel.replaceAll('%t', cc)\r\n  newLabel = newLabel.replaceAll('%n', note)\r\n  newLabel = newLabel.replaceAll('%a', midiNoteName(note))\r\n  newLabel = newLabel.replaceAll('%p', percent)\r\n  newLabel = newLabel.replaceAll('%%', '%')\r\n  return newLabel\r\n}\r\n\r\n// =====================================================================================\r\n// Helper to darken colours, actually it makes them semi-opaque\r\n// =====================================================================================\r\nexport function darkenColour(colour = '', hexOpacity = '60') {\r\n  if (colour.startsWith('#')) {\r\n    return `${colour}${hexOpacity}`\r\n  } else {\r\n    return `${colourNameToHex(colour)}${hexOpacity}`\r\n  }\r\n}\r\n\r\n// =============================================================================\r\n// Save widget value to local storage\r\n// =============================================================================\r\nexport function saveWidgetValue(widgetName, id, value) {\r\n  // IMPORTANT: This prevents all widgets saving their zero values when first starting\r\n  if (value === Number.MIN_SAFE_INTEGER) return\r\n  // Don't save anything when save/restored is disabled\r\n  if (!config.restoreValues) return\r\n\r\n  //console.log('SETTING', `touchmidi.${filename}.${widgetName}.${id}`, value)\r\n  localStorage.setItem(`touchmidi.${filename}.${widgetName}.${id}`, value)\r\n}\r\n\r\n// =============================================================================\r\n// Restore widget value from local storage\r\n// =============================================================================\r\nexport function getWidgetValue(widget, id = '') {\r\n  if (!id) id = `${widget.cc}${widget.chan}${widget.nrpn}`\r\n  const widgetName = widget.tagName.toLowerCase()\r\n\r\n  //console.log('GETTING', `touchmidi.${filename}.${widgetName}.${id}`)\r\n  return localStorage.getItem(`touchmidi.${filename}.${widgetName}.${id}`)\r\n}\r\n\r\n// =============================================================================\r\n// Remove all values for this layout file\r\n// =============================================================================\r\nexport function removeStorage() {\r\n  // eslint-disable-next-line no-unused-vars\r\n  for (let [key, value] of Object.entries(localStorage)) {\r\n    if (key.startsWith(`touchmidi.${filename}`)) {\r\n      localStorage.removeItem(key)\r\n    }\r\n  }\r\n}\r\n\r\n// =============================================================================\r\n// Convert a MIDI note number to a named string, e.g. 49 = 'C4'\r\n// =============================================================================\r\nexport function midiNoteName(midiNote) {\r\n  let noteNames = ['C', 'C&sharp;', 'D', 'D&sharp;', 'E', 'F', 'F&sharp;', 'G', 'G&sharp;', 'A', 'A&sharp;', 'B']\r\n  return noteNames[midiNote % 12] + (Math.floor(midiNote / 12) - 1)\r\n}\r\n\r\n// =====================================================================================\r\n// Looks up named HTML colours and returns hex representation\r\n// =====================================================================================\r\nexport function colourNameToHex(colour) {\r\n  var colours = {\r\n    aliceblue: '#f0f8ff',\r\n    antiquewhite: '#faebd7',\r\n    aqua: '#00ffff',\r\n    aquamarine: '#7fffd4',\r\n    azure: '#f0ffff',\r\n    beige: '#f5f5dc',\r\n    bisque: '#ffe4c4',\r\n    black: '#000000',\r\n    blanchedalmond: '#ffebcd',\r\n    blue: '#0000ff',\r\n    blueviolet: '#8a2be2',\r\n    brown: '#a52a2a',\r\n    burlywood: '#deb887',\r\n    cadetblue: '#5f9ea0',\r\n    chartreuse: '#7fff00',\r\n    chocolate: '#d2691e',\r\n    coral: '#ff7f50',\r\n    cornflowerblue: '#6495ed',\r\n    cornsilk: '#fff8dc',\r\n    crimson: '#dc143c',\r\n    cyan: '#00ffff',\r\n    darkblue: '#00008b',\r\n    darkcyan: '#008b8b',\r\n    darkgoldenrod: '#b8860b',\r\n    darkgray: '#a9a9a9',\r\n    darkgreen: '#006400',\r\n    darkkhaki: '#bdb76b',\r\n    darkmagenta: '#8b008b',\r\n    darkolivegreen: '#556b2f',\r\n    darkorange: '#ff8c00',\r\n    darkorchid: '#9932cc',\r\n    darkred: '#8b0000',\r\n    darksalmon: '#e9967a',\r\n    darkseagreen: '#8fbc8f',\r\n    darkslateblue: '#483d8b',\r\n    darkslategray: '#2f4f4f',\r\n    darkturquoise: '#00ced1',\r\n    darkviolet: '#9400d3',\r\n    deeppink: '#ff1493',\r\n    deepskyblue: '#00bfff',\r\n    dimgray: '#696969',\r\n    dodgerblue: '#1e90ff',\r\n    firebrick: '#b22222',\r\n    floralwhite: '#fffaf0',\r\n    forestgreen: '#228b22',\r\n    fuchsia: '#ff00ff',\r\n    gainsboro: '#dcdcdc',\r\n    ghostwhite: '#f8f8ff',\r\n    gold: '#ffd700',\r\n    goldenrod: '#daa520',\r\n    gray: '#808080',\r\n    green: '#008000',\r\n    greenyellow: '#adff2f',\r\n    honeydew: '#f0fff0',\r\n    hotpink: '#ff69b4',\r\n    'indianred ': '#cd5c5c',\r\n    indigo: '#4b0082',\r\n    ivory: '#fffff0',\r\n    khaki: '#f0e68c',\r\n    lavender: '#e6e6fa',\r\n    lavenderblush: '#fff0f5',\r\n    lawngreen: '#7cfc00',\r\n    lemonchiffon: '#fffacd',\r\n    lightblue: '#add8e6',\r\n    lightcoral: '#f08080',\r\n    lightcyan: '#e0ffff',\r\n    lightgoldenrodyellow: '#fafad2',\r\n    lightgrey: '#d3d3d3',\r\n    lightgreen: '#90ee90',\r\n    lightpink: '#ffb6c1',\r\n    lightsalmon: '#ffa07a',\r\n    lightseagreen: '#20b2aa',\r\n    lightskyblue: '#87cefa',\r\n    lightslategray: '#778899',\r\n    lightsteelblue: '#b0c4de',\r\n    lightyellow: '#ffffe0',\r\n    lime: '#00ff00',\r\n    limegreen: '#32cd32',\r\n    linen: '#faf0e6',\r\n    magenta: '#ff00ff',\r\n    maroon: '#800000',\r\n    mediumaquamarine: '#66cdaa',\r\n    mediumblue: '#0000cd',\r\n    mediumorchid: '#ba55d3',\r\n    mediumpurple: '#9370d8',\r\n    mediumseagreen: '#3cb371',\r\n    mediumslateblue: '#7b68ee',\r\n    mediumspringgreen: '#00fa9a',\r\n    mediumturquoise: '#48d1cc',\r\n    mediumvioletred: '#c71585',\r\n    midnightblue: '#191970',\r\n    mintcream: '#f5fffa',\r\n    mistyrose: '#ffe4e1',\r\n    moccasin: '#ffe4b5',\r\n    navajowhite: '#ffdead',\r\n    navy: '#000080',\r\n    oldlace: '#fdf5e6',\r\n    olive: '#808000',\r\n    olivedrab: '#6b8e23',\r\n    orange: '#ffa500',\r\n    orangered: '#ff4500',\r\n    orchid: '#da70d6',\r\n    palegoldenrod: '#eee8aa',\r\n    palegreen: '#98fb98',\r\n    paleturquoise: '#afeeee',\r\n    palevioletred: '#d87093',\r\n    papayawhip: '#ffefd5',\r\n    peachpuff: '#ffdab9',\r\n    peru: '#cd853f',\r\n    pink: '#ffc0cb',\r\n    plum: '#dda0dd',\r\n    powderblue: '#b0e0e6',\r\n    purple: '#800080',\r\n    rebeccapurple: '#663399',\r\n    red: '#ff0000',\r\n    rosybrown: '#bc8f8f',\r\n    royalblue: '#4169e1',\r\n    saddlebrown: '#8b4513',\r\n    salmon: '#fa8072',\r\n    sandybrown: '#f4a460',\r\n    seagreen: '#2e8b57',\r\n    seashell: '#fff5ee',\r\n    sienna: '#a0522d',\r\n    silver: '#c0c0c0',\r\n    skyblue: '#87ceeb',\r\n    slateblue: '#6a5acd',\r\n    slategray: '#708090',\r\n    snow: '#fffafa',\r\n    springgreen: '#00ff7f',\r\n    steelblue: '#4682b4',\r\n    tan: '#d2b48c',\r\n    teal: '#008080',\r\n    thistle: '#d8bfd8',\r\n    tomato: '#ff6347',\r\n    turquoise: '#40e0d0',\r\n    violet: '#ee82ee',\r\n    wheat: '#f5deb3',\r\n    white: '#ffffff',\r\n    whitesmoke: '#f5f5f5',\r\n    yellow: '#ffff00',\r\n    yellowgreen: '#9acd32'\r\n  }\r\n\r\n  if (typeof colours[colour.toLowerCase()] != 'undefined') return colours[colour.toLowerCase()]\r\n\r\n  return '#ffffff'\r\n}\r\n","export default \"#dialog {\\r\\n  border: var(--b-width) solid;\\r\\n  border-color: #11dd11;\\r\\n  border-radius: var(--b-radius);\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  padding: 1rem;\\r\\n  transform: translate(-50%, -50%);\\r\\n  z-index: 100;\\r\\n  background-color: var(--bg);\\r\\n  width: 100%;\\r\\n  color: #dddddd;\\r\\n}\\r\\n\\r\\n#container {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n@media (orientation: landscape) {\\r\\n  #container {\\r\\n    flex-direction: row;\\r\\n  }\\r\\n}\\r\\n\\r\\n.box {\\r\\n  flex: 1;\\r\\n  margin: 0.5rem;\\r\\n}\\r\\n@media (orientation: landscape) {\\r\\n  #container {\\r\\n    flex-direction: row;\\r\\n  }\\r\\n}\\r\\n\\r\\nINPUT[type='checkbox'] {\\r\\n  width: min(5vw, 1.3rem);\\r\\n  height: min(5vw, 1.3rem);\\r\\n}\\r\\n\\r\\nselect {\\r\\n  scrollbar-width: none;\\r\\n  background-color: var(--bg);\\r\\n  color: #bbbbbb;\\r\\n  width: 100%;\\r\\n  overflow-y: auto;\\r\\n  border: var(--b-width) solid;\\r\\n  border-color: #222222;\\r\\n  border-radius: var(--b-radius);\\r\\n  margin: 0.2rem;\\r\\n  outline: none;\\r\\n  font-family: var(--font);\\r\\n}\\r\\n\\r\\n#start {\\r\\n  border: var(--b-width) solid;\\r\\n  border-radius: var(--b-radius);\\r\\n  background-color: var(--bg);\\r\\n  font-family: var(--font);\\r\\n  margin-top: 1rem;\\r\\n  width: 100%;\\r\\n  background-color: darkgreen;\\r\\n  color: white;\\r\\n  border-color: #11dd11;\\r\\n}\\r\\n\\r\\n.disabled {\\r\\n  color: #444444 !important;\\r\\n  background-color: #111111 !important;\\r\\n  border-color: #666666 !important;\\r\\n  pointer-events: none !important;\\r\\n}\\r\\n\\r\\n#title {\\r\\n  text-align: right;\\r\\n  display: flex;\\r\\n  justify-content: flex-end;\\r\\n  color: #666666;\\r\\n}\\r\\n\\r\\n#title a {\\r\\n  color: #666666;\\r\\n  text-decoration: none;\\r\\n}\\r\\n\";","/*\r\n  TouchMIDI v2\r\n  config.js - Config dialog shown at startup\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\nimport { html, define, dispatch } from 'hybrids'\r\nimport * as midi from '../midi.js'\r\nimport { removeStorage } from '../utils.js'\r\nimport css from './config.css'\r\n\r\nimport pkg from '../../package.json'\r\n\r\nexport let defaultConfig = {\r\n  deviceId: 'output-1',\r\n  globalChannel: 1,\r\n  restoreValues: false\r\n}\r\n\r\nfunction startClicked(host) {\r\n  // Get config values from HTML\r\n  const deviceId = host.shadowRoot.querySelector('#deviceList').value\r\n  const globalChannel = parseInt(host.shadowRoot.querySelector('#channel').value) || 0\r\n  const restoreValues = host.shadowRoot.querySelector('#restoreValues').checked\r\n  const fullScreen = host.shadowRoot.querySelector('#fullScreen').checked\r\n\r\n  // Safe guard\r\n  if (!deviceId) {\r\n    return\r\n  }\r\n\r\n  // Wipe values when disabled, this allows user to reset any stored values\r\n  if (!restoreValues) {\r\n    removeStorage()\r\n  }\r\n\r\n  // Save new config options back to local storage (after wipe)\r\n  const filename = window.location.pathname.substring(window.location.pathname.lastIndexOf('/') + 1)\r\n  localStorage.setItem(`touchmidi.${filename}.config`, JSON.stringify({ deviceId, globalChannel, restoreValues }))\r\n\r\n  // Notify listeners (main.js) we're done\r\n  dispatch(host, 'config-done', {\r\n    detail: {\r\n      deviceId,\r\n      globalChannel,\r\n      restoreValues\r\n    }\r\n  })\r\n\r\n  if (fullScreen) {\r\n    document.body.requestFullscreen()\r\n  }\r\n\r\n  // Remove dialog and page mask\r\n  document.getElementById('pageMask').style.display = 'none'\r\n  document.body.removeChild(host)\r\n}\r\n\r\nfunction deviceSelected(host) {\r\n  host.shadowRoot.querySelector('#start').classList.remove('disabled')\r\n}\r\n\r\nconst Component = {\r\n  //channelNames: [],\r\n\r\n  render: () => {\r\n    // Modal darken background & block layout behind it\r\n    document.getElementById('pageMask').style.display = 'block'\r\n\r\n    if (!midi.access) {\r\n      alert('No MIDI access, something went wrong!\\nYou should never see this error!')\r\n      return\r\n    }\r\n\r\n    // Hang on! There's no devices!!\r\n    if (midi.access.outputs.size == 0) {\r\n      //alert('No MIDI output devices found!\\nConnect a MIDI device and reload the page')\r\n      return html` <div id=\"dialog\">\r\n        <div class=\"box\" style=\"text-align:center\">\r\n          No MIDI output devices were found &#128549;<br /><br />Please attach a MIDI device and try again\r\n        </div>\r\n        <button onclick=\"window.location.reload()\" id=\"start\" class=\"enabled\" style=\"background-color:darkgreen\">Reload</button>\r\n      </div>`.style(css)\r\n    }\r\n\r\n    // Simple array of ints 0 -15 for each MIDI channel number\r\n    const channels = Array.from(Array(16).keys())\r\n\r\n    // Restore saved options\r\n    const filename = window.location.pathname.substring(window.location.pathname.lastIndexOf('/') + 1)\r\n    const configJSON = localStorage.getItem(`touchmidi.${filename}.config`)\r\n    let config = {}\r\n    if (configJSON) {\r\n      config = JSON.parse(configJSON)\r\n    } else {\r\n      config = defaultConfig\r\n    }\r\n\r\n    // We can't use any JS in the rendered HTML\r\n    // This is a workaround to pre-detect if device id will be selected\r\n    let startClass = 'disabled'\r\n    midi.access.outputs.forEach(function (output, id) {\r\n      if (id == config.deviceId) startClass = 'enabled'\r\n    })\r\n\r\n    return html`\r\n      <div id=\"dialog\">\r\n        <span id=\"title\">Touch Midi v${pkg.version} &nbsp; <a href=\"https://code.benco.io/touchmidi/\" target=\"_blank\">[[ GitHub ]]</a></span>\r\n        <div id=\"container\">\r\n          <div class=\"box\">\r\n            Select MIDI Device\r\n            <select size=\"5\" id=\"deviceList\" onchange=\"${deviceSelected}\">\r\n              ${Array.from(midi.access.outputs.entries()).map(\r\n                (device) => html`<option value=\"${device[0]}\" selected=\"${device[0] == config.deviceId}\">${device[1].name}</option>`\r\n              )}\r\n            </select>\r\n            <br />\r\n          </div>\r\n          <div class=\"box\">\r\n            MIDI Channels\r\n            <select id=\"channel\">\r\n              <option value=\"0\">Set By Layout</option>\r\n              ${channels.map((chan) => html`<option value=\"${chan + 1}\" selected=\"${chan == config.globalChannel - 1}\">${chan + 1}</option>`)}\r\n            </select>\r\n          </div>\r\n          <div class=\"box\">\r\n            <input type=\"checkbox\" id=\"restoreValues\" name=\"restoreValues\" checked=\"${config.restoreValues}\" />\r\n            <label for=\"restoreValues\">Save &amp; Restore at Startup</label>\r\n            <br />\r\n            <input type=\"checkbox\" id=\"fullScreen\" name=\"fullScreen\" />\r\n            <label for=\"fullScreen\">Start Fullscreen</label>\r\n          </div>\r\n        </div>\r\n        <button onclick=\"${startClicked}\" id=\"start\" class=\"${startClass}\">Start</button>\r\n      </div>\r\n    `.style(css)\r\n  }\r\n}\r\n\r\ndefine('midi-config', Component)\r\n","/*\r\n  TouchMIDI v2\r\n  slider.js - A widget that acts like a slider or fader, sends MIDI CC or NRPN messages\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\nimport { html, define, property } from 'hybrids'\r\nimport * as midi from '../midi.js'\r\nimport { darkenColour, formatLabel, saveWidgetValue } from '../utils.js'\r\nimport css from './slider.css'\r\n\r\n// =====================================================================================\r\n// Used as the observer function for widgets _update property used by sliders and encoders\r\n// =====================================================================================\r\nexport function updateObserver(host, update) {\r\n  if (update.restoreValue) {\r\n    host.value = update.restoreValue\r\n    return\r\n  }\r\n\r\n  // IMPORTANT: save x & y as previousPos\r\n  host._previousPos = { x: update.x, y: update.y }\r\n\r\n  // Work out new value based on dx or dy\r\n  var tempValue = 0\r\n  if (host.horizontal) tempValue = host.value + update.dx\r\n  else tempValue = host.value - update.dy\r\n\r\n  // Clamp to min and max\r\n  if (tempValue > host.max) tempValue = host.max\r\n  if (tempValue < host.min) tempValue = host.min\r\n\r\n  // Finally update the value (which will trigger a render)\r\n  host.value = Math.round(tempValue)\r\n}\r\n\r\nexport const Component = {\r\n  // Private internal properties\r\n  _previousPos: null,\r\n  _width: 30,\r\n  _update: {\r\n    observe: updateObserver\r\n  },\r\n\r\n  // MIDI properties\r\n  value: Number.MIN_SAFE_INTEGER,\r\n  chan: 1,\r\n  cc: -1,\r\n  nrpn: '',\r\n  min: 0,\r\n  max: 127,\r\n  pitchBend: false,\r\n\r\n  // Display & UX properties\r\n  colour: property('#ffffff'),\r\n  label: '__unset__',\r\n  horizontal: false,\r\n  labelScale: 1,\r\n  grow: 1,\r\n\r\n  render: ({ value, colour, label, min, max, cc, chan, horizontal, nrpn, pitchBend, _width, labelScale, grow }) => {\r\n    // Safeguard against sending MIDI messages on first start\r\n    const originalValue = value\r\n\r\n    saveWidgetValue('midi-slider', `${cc}${chan}${nrpn}`, value)\r\n\r\n    // Clamp to min and max\r\n    if (value > max) value = max\r\n    if (value < min) value = min\r\n\r\n    const percent = Math.round(((value - min) / (max - min)) * 100.0)\r\n    const direction = horizontal ? 'right' : 'top'\r\n\r\n    // Default label is to show the value\r\n    if (label === '__unset__') {\r\n      label = '%v'\r\n    }\r\n\r\n    // We use some CSS tricks to draw the value as a percentage\r\n    const newStyle = `\r\n    :host { \r\n      flex-grow: ${grow} \r\n    }\r\n    div {\r\n      background: linear-gradient(to ${direction}, ${darkenColour(colour)} ${percent}%, var(--bg) ${percent}%);\r\n      color: ${colour};\r\n      border-color: ${colour};\r\n      font-size: ${_width * 0.2 * labelScale}px;\r\n    }`\r\n\r\n    // Handle MIDI actions, might be CC or NRPN\r\n    if (cc > 0 && originalValue > Number.MIN_SAFE_INTEGER) {\r\n      midi.sendCC(cc, chan, value)\r\n    }\r\n    if (nrpn && originalValue > Number.MIN_SAFE_INTEGER) {\r\n      midi.sendNRPN(nrpn, chan, value, max > 127)\r\n    }\r\n    // Pitch bend support, not sure how useful\r\n    if (pitchBend) {\r\n      midi.sendPitchBend(chan, value)\r\n    }\r\n\r\n    return html`<div innerHTML=\"${formatLabel(label, value, percent, chan, cc)}\"></div>`.style(css, newStyle)\r\n  }\r\n}\r\n\r\ndefine('midi-slider', Component)\r\n","/*\r\n  TouchMIDI v2\r\n  button.js - A widget that sends MIDI events when pressed or toggled on/off\r\n  Ben Coleman, Dec 2020\r\n*/\r\n\r\nimport { html, define, property } from 'hybrids'\r\nimport * as midi from '../midi.js'\r\nimport { darkenColour, formatLabel } from '../utils.js'\r\nimport css from './button.css'\r\n\r\nfunction eventReleased(host, evt) {\r\n  evt.preventDefault()\r\n  if (!host.toggle && host._pressed) {\r\n    host._pressed = false\r\n\r\n    if (host.note > 0) {\r\n      midi.sendNoteOff(host.note, host.chan)\r\n    }\r\n    if (host.cc > 0 && host.valueOff) {\r\n      midi.sendCC(host.cc, host.chan, host.valueOff)\r\n    }\r\n    if (host.nrpn && host.valueOff) {\r\n      midi.sendNRPN(host.nrpn, host.chan, host.valueOff, host.nrpnHires)\r\n    }\r\n  }\r\n}\r\n\r\nfunction eventPressed(host, evt) {\r\n  evt.preventDefault()\r\n  if (host.toggle) {\r\n    host._pressed = !host._pressed\r\n  } else {\r\n    host._pressed = true\r\n  }\r\n\r\n  // Handle MIDI actions, might be note, CC or NRPN\r\n  if (host._pressed) {\r\n    if (host.multinote.length >0){\r\n      const notes = host.multinote.split(',');\r\n      midi.sendProgChange('1,1', 2, 28, true)\r\n      midi.sendCC(7,2, 64);\r\n      for (const note of notes){\r\n        midi.sendNoteOn(parseInt(note), parseInt(host.chan), host.velo);\r\n      }\r\n      setTimeout(()=>{\r\n        for (const note of notes){\r\n          midi.sendNoteOff(parseInt(note), parseInt(host.chan), 0);\r\n        }\r\n        midi.sendProgChange('1,1', 2, 31, true)\r\n      },20000);\r\n    }\r\n    if (host.cc > 0) {\r\n      midi.sendCC(host.cc, host.chan, host.value)\r\n    }\r\n    if (host.nrpn) {\r\n      midi.sendNRPN(host.nrpn, host.chan, host.value, host.nrpnHires)\r\n    }\r\n    if (host.note > 0) {\r\n      midi.sendNoteOn(host.note, host.chan, host.velo)\r\n    }\r\n    if (host.prog) {\r\n      midi.sendProgChange(host.prog, host.chan, host.value)\r\n    }\r\n    if (host.multiprog) {\r\n      console.log('MULTIPROG', host.multiprog);\r\n    }\r\n    if (host.xpperform && host.xpperform.length>0) {\r\n      const bank = '1,1';\r\n      let prog = parseInt(host.xpperform) - 1;\r\n      console.log('xpperform', prog, 16);\r\n      midi.sendProgChange(bank, 16, prog, true)\r\n    }\r\n    if (host.multiprog) {\r\n      const programs = host.multiprog.split('|');\r\n      for (const program of programs) {\r\n        let progInfo = program.trim().split(',');\r\n        if (progInfo.length !== 4) {\r\n          throw new Error(`Malformed multiprog, should be \"1,1,1,1|2,1,1,2|3,1,1,3\" etc, is: ${host.multiprog}`);\r\n        }\r\n        const channel = parseInt(progInfo[0]);\r\n        const bank = progInfo[1] + ',' + progInfo[2];\r\n        let prog = parseInt(progInfo[3]);\r\n        if (!isNaN(prog) && prog > -1){\r\n          midi.sendProgChange(bank, channel, prog, true)\r\n        }\r\n      }\r\n\r\n    }\r\n  } else if (host.toggle) {\r\n    if (host.note > 0) {\r\n      midi.sendNoteOff(host.note, host.chan)\r\n    }\r\n    if (host.cc > 0 && host.valueOff) {\r\n      midi.sendCC(host.cc, host.chan, host.valueOff)\r\n    }\r\n    if (host.nrpn && host.valueOff) {\r\n      midi.sendNRPN(host.nrpn, host.chan, host.valueOff, host.nrpnHires)\r\n    }\r\n    if (host.prog && host.valueOff) {\r\n      midi.sendProgChange(host.prog, host.chan, host.valueOff)\r\n    }\r\n  }\r\n}\r\n\r\nexport const Component = {\r\n  // Private internal properties\r\n  _pressed: false,\r\n  _width: 30,\r\n\r\n  // MIDI properties\r\n  chan: 1,\r\n  cc: -1,\r\n  nrpn: '',\r\n  nrpnHires: false,\r\n  value: 0,\r\n  valueOff: 0,\r\n  velo: 127,\r\n  note: -1,\r\n  prog: '',\r\n  multiprog: '',\r\n  multinote: '',\r\n  xpperform: '',\r\n  hsl: '',\r\n\r\n  // Display & UX properties\r\n  colour: property('#ffffff'),\r\n  label: '__unset__',\r\n  toggle: false,\r\n  labelScale: 1,\r\n  grow: 1,\r\n\r\n  render: ({ label, colour, _pressed, chan, cc, nrpn, prog, note, _width, labelScale, grow, hsl }) => {\r\n\r\n    // Default label is to show the value\r\n    if (label === '__unset__') {\r\n      if (note > 0) label = '%a'\r\n      else if (cc > 0) label = '%t'\r\n      else if (nrpn) label = nrpn\r\n      else if (prog) label = prog\r\n    }\r\n\r\n    const newStyle = `\r\n    :host {\r\n      flex-grow: ${grow}\r\n    }\r\n    button {\r\n      background-color: hsl(${hsl}, 100%, 20%);\r\n      color: ${colour};\r\n      border-color: ${colour};\r\n    }`\r\n\r\n    return html`<button\r\n      onmouseup=\"${eventReleased}\"\r\n      ontouchend=\"${eventReleased}\"\r\n      onmousedown=\"${eventPressed}\"\r\n      ontouchstart=\"${eventPressed}\"\r\n      onmouseleave=\"${eventReleased}\"\r\n      innerHTML=\"${formatLabel(label, '', '', chan, cc, note)}\"\r\n    ></button>`.style(css, newStyle)\r\n  }\r\n}\r\n\r\ndefine('midi-button', Component)\r\n","/*\r\n  TouchMIDI v2\r\n  counter.js - A pair of buttons that increments and decrements a MIDI CC value\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\nimport { html, define, property } from 'hybrids'\r\nimport * as midi from '../midi.js'\r\nimport { darkenColour, saveWidgetValue } from '../utils.js'\r\nimport css from './counter.css'\r\n\r\nfunction eventPressed(host, evt) {\r\n  evt.preventDefault()\r\n\r\n  if (evt.target.id == 'inc') {\r\n    host.value = host.value + 1\r\n  } else {\r\n    host.value = host.value - 1\r\n  }\r\n\r\n  // Clamp to min and max\r\n  if (host.value > host.max) host.value = host.max\r\n  if (host.value < host.min) host.value = host.min\r\n\r\n  // Handle MIDI actions, only CC for now\r\n  if (host.cc > 0) {\r\n    midi.sendCC(host.cc, host.chan, host.value)\r\n  }\r\n}\r\n\r\nexport const Component = {\r\n  // Private internal properties\r\n  _width: 30,\r\n\r\n  // MIDI properties\r\n  chan: 1,\r\n  cc: -1,\r\n  value: 0,\r\n  min: 0,\r\n  max: 127,\r\n\r\n  // Display & UX properties\r\n  colour: property('#ffffff'),\r\n  label: '__unset__',\r\n  labelScale: 1,\r\n  grow: 1,\r\n\r\n  render: ({ colour, chan, cc, _width, labelScale, grow, value }) => {\r\n    saveWidgetValue('midi-counter', `${cc}${chan}0`, value)\r\n\r\n    const newStyle = `\r\n    :host {\r\n      flex-grow: ${grow}\r\n    }\r\n    button:active {\r\n      background-color: ${darkenColour(colour)};\r\n    }\r\n    #label {\r\n      font-size: ${_width * 0.2 * labelScale}px !important;\r\n      border-color: ${colour};\r\n      color: ${colour};\r\n      background-color: var(--bg);\r\n    }\r\n    button {\r\n      color: ${colour};\r\n      border-color: ${colour};\r\n      font-size: ${_width * 0.3 * labelScale}px !important;\r\n    }`\r\n\r\n    return html`<div>\r\n      <span id=\"label\" innerHTML=\"${value}\"></span>\r\n      <button id=\"dec\" onmousedown=\"${eventPressed}\" ontouchstart=\"${eventPressed}\">-1</button>\r\n      <button id=\"inc\" onmousedown=\"${eventPressed}\" ontouchstart=\"${eventPressed}\">+1</button>\r\n    </div>`.style(css, newStyle)\r\n  }\r\n}\r\n\r\ndefine('midi-counter', Component)\r\n","export default \":host {\\r\\n  flex: 1 1;\\r\\n  display: flex;\\r\\n  margin: var(--spacing);\\r\\n}\\r\\n\\r\\ndiv {\\r\\n  font-size: 4vw;\\r\\n  display: flex;\\r\\n  flex: 1 1;\\r\\n  border: var(--b-width) solid;\\r\\n  border-radius: var(--b-radius);\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  text-align: center;\\r\\n  line-height: 0.9em;\\r\\n  cursor: pointer;\\r\\n  overflow: hidden;\\r\\n  user-select: none;\\r\\n}\\r\\n\";","/*\r\n  TouchMIDI v2\r\n  encoder.js - A widget that acts like an encoder or knob, sends MIDI CC or NRPN messages\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\nimport { html, define, property } from 'hybrids'\r\nimport * as midi from '../midi.js'\r\nimport { formatLabel, saveWidgetValue } from '../utils.js'\r\nimport { updateObserver } from './slider.js'\r\nimport css from './encoder.css'\r\n\r\nexport const Component = {\r\n  // Private internal properties\r\n  _previousPos: null,\r\n  _width: 30,\r\n  _update: {\r\n    // We re-use the same update logic as sliders\r\n    observe: updateObserver\r\n  },\r\n\r\n  // MIDI properties\r\n  value: Number.MIN_SAFE_INTEGER,\r\n  chan: 1,\r\n  cc: -1,\r\n  nrpn: '',\r\n  min: 0,\r\n  max: 127,\r\n\r\n  // Display & UX properties\r\n  colour: property('#ffffff'),\r\n  label: '__unset__',\r\n  horizontal: false,\r\n  labelScale: 1,\r\n  grow: 1,\r\n\r\n  render: ({ value, colour, label, min, max, chan, cc, nrpn, _width, labelScale, grow }) => {\r\n    // Safeguard against sending MIDI messages on first start\r\n    const originalValue = value\r\n\r\n    // This widget saves state\r\n    saveWidgetValue('midi-encoder', `${cc}${chan}${nrpn}`, value)\r\n\r\n    // Clamp value to min and max\r\n    if (value > max) value = max\r\n    if (value < min) value = min\r\n\r\n    const percent = Math.round(((value - min) / (max - min)) * 100.0)\r\n    const valLength = ((value - min) / (max - min)) * 75.0\r\n\r\n    // Default label is to show the value\r\n    if (label === '__unset__') {\r\n      label = '%v'\r\n    }\r\n\r\n    // Handle MIDI actions, might be CC or NRPN\r\n    if (cc > 0 && originalValue > Number.MIN_SAFE_INTEGER) {\r\n      midi.sendCC(cc, chan, value)\r\n    }\r\n    if (nrpn && originalValue > Number.MIN_SAFE_INTEGER) {\r\n      midi.sendNRPN(nrpn, chan, value, max > 127)\r\n    }\r\n\r\n    const newStyle = `\r\n    :host {\r\n      flex-grow: ${grow}\r\n    }\r\n    #label {\r\n      color: ${colour}; \r\n      font-size:${_width * 0.2 * labelScale}px\r\n    }`\r\n\r\n    return html`<div>\r\n      <svg viewBox=\"0 0 36 36\">\r\n        <path\r\n          d=\"M18 2.0\r\n    a 1 1 0 0 1 0 32\r\n    a 1 1 0 0 1 0 -32\"\r\n          fill=\"none\"\r\n          stroke=\"${colour}\"\r\n          stroke-opacity=\"0.3\"\r\n          stroke-width=\"0.1rem\"\r\n          stroke-dasharray=\"75, 100\"\r\n          transform=\"rotate(226 18 18)\"\r\n          stroke-linecap=\"round\"\r\n        />\r\n        <path\r\n          d=\"M18 2.0\r\n    a 1 1 0 0 1 0 32\r\n    a 1 1 0 0 1 0 -32\"\r\n          fill=\"none\"\r\n          stroke=\"${colour}\"\r\n          stroke-width=\"0.25rem\"\r\n          stroke-dasharray=\"${valLength}, 100\"\r\n          transform=\"rotate(226 18 18)\"\r\n          stroke-linecap=\"round\"\r\n        />\r\n      </svg>\r\n      <div id=\"label\" innerHTML=\"${formatLabel(label, value, percent, chan, cc)}\"></div>\r\n    </div>`.style(css, newStyle)\r\n  }\r\n}\r\n\r\ndefine('midi-encoder', Component)\r\n","export default \":host {\\r\\n  flex: 1 1;\\r\\n  display: flex;\\r\\n  margin: var(--spacing);\\r\\n}\\r\\n\\r\\nsvg {\\r\\n  height: 100%;\\r\\n  margin: 0 auto;\\r\\n}\\r\\n\\r\\ndiv {\\r\\n  flex: auto;\\r\\n  justify-content: center;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  text-align: center;\\r\\n  cursor: pointer;\\r\\n  overflow: hidden;\\r\\n  user-select: none;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n#label {\\r\\n  font-size: 5vmin;\\r\\n  position: absolute;\\r\\n  z-index: 40;\\r\\n  left: 50%;\\r\\n  top: 50%;\\r\\n  transform: translate(-50%, -50%);\\r\\n  text-align: center;\\r\\n  line-height: 0.9em;\\r\\n  width: 100%;\\r\\n  padding: 0.2rem;\\r\\n}\\r\\n\";","export default \":host {\\r\\n  flex: 1 1;\\r\\n  display: flex;\\r\\n  margin: var(--spacing);\\r\\n}\\r\\n\\r\\nbutton {\\r\\n  font-family: var(--font);\\r\\n  display: flex;\\r\\n  flex: 1 1;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  cursor: pointer;\\r\\n  overflow: hidden;\\r\\n  width: 1px;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\nbutton .selected {\\r\\n  border: 10px solid;\\r\\n}\\r\\n\";","/*\r\n  TouchMIDI v2\r\n  xypad.js - A widget that acts like a 2D XY pad control, sends MIDI CC or NRPN messages\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\nimport { html, define, property } from 'hybrids'\r\nimport * as midi from '../midi.js'\r\nimport { darkenColour, formatLabel, saveWidgetValue, clamp } from '../utils.js'\r\nimport css from './xypad.css'\r\n\r\nexport const Component = {\r\n  // Private internal properties\r\n  _previousPos: null,\r\n  _width: 30,\r\n  _update: {\r\n    observe: (host, update) => {\r\n      if (update.restoreValue) {\r\n        host.value = update.restoreValue\r\n        return\r\n      }\r\n\r\n      // IMPORTANT: save x & y as previousPos\r\n      host._previousPos = { x: update.x, y: update.y }\r\n\r\n      // Work out new value based on dx or dy\r\n      let tempX = host.valueX + update.dx\r\n      let tempY = host.valueY - update.dy\r\n\r\n      // Clamp to min and max\r\n      tempX = clamp(tempX, host.min, host.max)\r\n      tempY = clamp(tempY, host.min, host.max)\r\n\r\n      // Finally update the value (which will trigger a render)\r\n      host.valueX = Math.round(tempX)\r\n      host.valueY = Math.round(tempY)\r\n    }\r\n  },\r\n\r\n  // MIDI properties\r\n  valueX: Number.MIN_SAFE_INTEGER,\r\n  valueY: Number.MIN_SAFE_INTEGER,\r\n  chan: 1,\r\n  ccX: -1,\r\n  ccY: -1,\r\n  min: 0,\r\n  max: 127,\r\n\r\n  // Display & UX properties\r\n  colour: property('#ffffff'),\r\n  label: '__unset__',\r\n  labelScale: 1,\r\n  grow: 1,\r\n\r\n  render: ({ valueX, valueY, colour, label, min, max, ccX, ccY, chan, nrpn, _width, labelScale, grow }) => {\r\n    // Safeguard against sending MIDI messages on first start\r\n    const originalValueX = valueX\r\n    const originalValueY = valueY\r\n\r\n    // This widget saves state, in two variables\r\n    saveWidgetValue('midi-pad', `${ccX}${chan}${nrpn}X`, valueX)\r\n    saveWidgetValue('midi-pad', `${ccY}${chan}${nrpn}Y`, valueY)\r\n\r\n    // Clamp to min and max & calc percentage\r\n    valueX = clamp(valueX, min, max)\r\n    valueY = clamp(valueY, min, max)\r\n    let percentX = Math.round(((valueX - min) / (max - min)) * 100.0)\r\n    let percentY = Math.round(((valueY - min) / (max - min)) * 100.0)\r\n\r\n    // Default label is to show the value\r\n    if (label === '__unset__') {\r\n      label = '%v'\r\n    }\r\n\r\n    // We use some CSS tricks\r\n    const newStyle = `\r\n    :host {\r\n      flex-grow: ${grow}\r\n    }\r\n    div {\r\n      color: ${colour};\r\n      border-color: ${colour};\r\n    }\r\n    #label {\r\n      font-size: ${_width * 0.4 * labelScale}px;\r\n    }\r\n    #marker {\r\n      background-color: ${darkenColour(colour)};\r\n      border-color: ${colour};\r\n      bottom: calc(${percentY}% - ${_width * 0.05}px);\r\n      left: calc(${percentX}% - ${_width * 0.05}px);\r\n      width: ${_width * 0.1}px;\r\n      height: ${_width * 0.1}px;\r\n    }`\r\n\r\n    // Handle MIDI actions, might be CC or NRPN\r\n    if (ccX > 0 && ccY > 0 && originalValueX > Number.MIN_SAFE_INTEGER && originalValueY > Number.MIN_SAFE_INTEGER) {\r\n      midi.sendCC(ccX, chan, valueX)\r\n      midi.sendCC(ccY, chan, valueY)\r\n    }\r\n\r\n    return html`<div>\r\n      <div id=\"label\" innerHTML=\"${formatLabel(label, `${valueX},${valueY}`, `${percentX},${percentY}`, chan)}\"></div>\r\n      <span id=\"marker\"></span>\r\n    </div>`.style(css, newStyle)\r\n  }\r\n}\r\n\r\ndefine('midi-pad', Component)\r\n","export default \":host {\\r\\n  flex: 1 1;\\r\\n  display: flex;\\r\\n  margin: var(--spacing);\\r\\n}\\r\\n\\r\\ndiv {\\r\\n  font-size: 4vw;\\r\\n  display: flex;\\r\\n  flex: 1 1;\\r\\n  border: var(--b-width) solid;\\r\\n  border-radius: var(--b-radius);\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  text-align: center;\\r\\n  line-height: 0.9em;\\r\\n  cursor: pointer;\\r\\n  overflow: hidden;\\r\\n  width: 1px;\\r\\n  user-select: none;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n#marker {\\r\\n  width: 3vmax;\\r\\n  height: 3vmax;\\r\\n  border-radius: 50%;\\r\\n  position: absolute;\\r\\n  background-color: white;\\r\\n  display: block;\\r\\n  z-index: 10;\\r\\n  border: 0.3vmax solid white;\\r\\n}\\r\\n\\r\\n#label {\\r\\n  border: none;\\r\\n  padding: 1rem;\\r\\n}\\r\\n\";","export default \":host {\\r\\n  flex: 1 1;\\r\\n  display: flex;\\r\\n  margin: var(--spacing);\\r\\n}\\r\\n\\r\\ndiv {\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  flex: 1 1;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\nbutton {\\r\\n  font-family: var(--font);\\r\\n  background-color: var(--bg);\\r\\n  font-size: 5vw;\\r\\n  flex: 1 1;\\r\\n  border: var(--b-width) solid;\\r\\n  border-radius: var(--b-radius);\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  cursor: pointer;\\r\\n  overflow: hidden;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n#label {\\r\\n  position: absolute;\\r\\n  background-color: var(--bg);\\r\\n  height: 50%;\\r\\n  text-align: center;\\r\\n  width: 25%;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  transform: translate(-50%, -50%);\\r\\n  z-index: 4;\\r\\n  font-size: 5vw;\\r\\n  overflow: hidden;\\r\\n  display: block;\\r\\n  pointer-events: none;\\r\\n}\\r\\n\";","/*\r\n  TouchMIDI v2\r\n  helpers.js - Very simple helpers like spacers and labels\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\nimport { html, define } from 'hybrids'\r\n\r\nexport const SpacerComponent = {\r\n  grow: 1,\r\n\r\n  render: ({ grow }) => {\r\n    const css = `\r\n    :host{\r\n      flex: ${grow} 1;\r\n    }\r\n    div {\r\n      flex ${grow} 1;\r\n    }`\r\n\r\n    return html`<div></div>`.style(css)\r\n  }\r\n}\r\ndefine('midi-spacer', SpacerComponent)\r\n\r\n// ==========================================================================\r\n\r\nexport const LabelComponent = {\r\n  grow: 1,\r\n\r\n  render: ({ grow }) => {\r\n    const css = `\r\n    :host{\r\n      flex: ${grow} 1;\r\n    }\r\n    div {\r\n      flex ${grow} 1;\r\n      font-size: 4vw;\r\n    }`\r\n\r\n    return html`<div><slot></div>`.style(css)\r\n  }\r\n}\r\ndefine('midi-label', LabelComponent)\r\n","/*\r\n  TouchMIDI v2\r\n  main.js - App entry point and event input handling\r\n  Ben Coleman, Dec 2020 \r\n*/\r\n\r\n// Load custom component widgets\r\nimport './components/row.js'\r\nimport './components/column.js'\r\nimport './components/config.js'\r\nimport './components/slider.js'\r\nimport './components/encoder.js'\r\nimport './components/button.js'\r\nimport './components/xypad.js'\r\nimport './components/counter.js'\r\nimport './components/helpers.js'\r\nimport * as midi from './midi.js'\r\nimport { clamp, getWidgetValue, removeStorage } from './utils.js'\r\n\r\nimport mainCss from './css/main.css'\r\nimport { defaultConfig } from './components/config.js'\r\nimport { fetchSetList } from './setlist'\r\n\r\n// Global config consts\r\nconst MOVE_CLAMP = 6\r\nconst SENSITIVITY = 1\r\nconst MOUSE_ID = 20\r\n\r\n// DOM query selectors for all widgets and widgets that save/restore values\r\n// TODO: Find a better way of selecting all custom elements / widgets\r\nconst SELECTOR_ALL = 'midi-slider,midi-encoder,midi-pad,midi-button,midi-counter'\r\nconst SELECTOR_SAVE = 'midi-slider,midi-encoder,midi-pad,midi-counter'\r\n\r\n// A global list of HTML nodes which are being updated (touched or clicked)\r\nlet activeWidgets = []\r\n// Global config\r\nexport let config = {}\r\n\r\n// =============================================================================\r\n// The main entry point is here, after loading the document / page\r\n// =============================================================================\r\nwindow.addEventListener('load', async () => {\r\n  await pageSetup()\r\n  const access = await midi.getAccess()\r\n\r\n  if (!access) {\r\n    document.body.innerHTML = `<div style=\"text-align: center; font-size: 120%\">\r\n    <h2 style=\"color:#ee2222\">Failed to get MIDI access &#128559;</h2>\r\n    <br>This is likely because your browser doesn't support MIDI or permissions were not granted.\r\n    <br>Also ensure you load the page from a https:// or file:// URL origin. <br><br>Try again using Chrome or Edge</div>`\r\n    return\r\n  }\r\n\r\n  // Debug info and device ids\r\n  for (let output of access.outputs.values()) {\r\n    console.log(`MIDI device found --- deviceId: ${output.id}, name: ${output.name}`)\r\n  }\r\n\r\n  // TODO: Disabled for now, requires a lot more work\r\n  // const channelNames = parseChannels()\r\n  // console.log(channelNames)\r\n\r\n  // Start with MIDI config dialog, which needs MIDI access\r\n  // We can bypass this (only for dev & testing really) with special `?nomidi` URL query param\r\n  const urlParams = new URLSearchParams(window.location.search)\r\n  const noMidi = urlParams.get('nomidi')\r\n  if (noMidi === null) openConfigDialog()\r\n\r\n  // Notify widgets of their real width, used in order to scale fonts on labels\r\n  // Tiny delay prevents it not working sometimes, probably race condition with document loading\r\n  window.addEventListener('resize', updateWidgetWidths)\r\n  setTimeout(updateWidgetWidths, 200)\r\n\r\n  // Why so many event listeners?! Basically to get the behaviour we need\r\n  // Mainly to allow moving a widget once the mouse or touch moves outside it\r\n  window.addEventListener('mousedown', eventMouseDown, false)\r\n  window.addEventListener('mousemove', eventMouseMove, false)\r\n  window.addEventListener('mouseup', eventMouseUp, false)\r\n  window.addEventListener('touchstart', eventTouchStart, false)\r\n  window.addEventListener('touchmove', eventTouchMove, false)\r\n  window.addEventListener('touchend', eventTouchEnd, false)\r\n  window.addEventListener('dblclick', eventSinkHole, false)\r\n  window.addEventListener('contextmenu', eventSinkHole, false)\r\n})\r\n\r\n// Handle multiple touches and track which ones to send updates to\r\nfunction eventTouchStart(evt) {\r\n  for (let touch of evt.changedTouches) {\r\n    activeWidgets[touch.identifier] = touch.target\r\n  }\r\n}\r\nfunction eventTouchMove(evt) {\r\n  for (let touch of evt.changedTouches) {\r\n    updateWidget(touch.target, touch.screenX, touch.screenY)\r\n  }\r\n}\r\nfunction eventTouchEnd(evt) {\r\n  for (let touch of evt.changedTouches) {\r\n    activeWidgets.splice(touch.identifier, 1)\r\n  }\r\n}\r\n\r\n// Mouse events are also tracked but there's only ever only one\r\nfunction eventMouseDown(evt) {\r\n  activeWidgets[MOUSE_ID] = evt.target\r\n}\r\nfunction eventMouseMove(evt) {\r\n  updateWidget(activeWidgets[MOUSE_ID], evt.screenX, evt.screenY)\r\n}\r\nfunction eventMouseUp() {\r\n  activeWidgets.splice(MOUSE_ID, 1)\r\n}\r\n\r\n// =============================================================================\r\n// Logic to calculate how much the user has moved the mouse or touch-point\r\n// Then update the widget with the deltas and store the previous position\r\n// =============================================================================\r\nfunction updateWidget(widget, x, y) {\r\n  if (!widget) return\r\n  let dx = 0\r\n  let dy = 0\r\n  if (widget._previousPos) {\r\n    dx = x - widget._previousPos.x\r\n    dy = y - widget._previousPos.y\r\n    dx = clamp(dx, -MOVE_CLAMP, MOVE_CLAMP) / SENSITIVITY\r\n    dy = clamp(dy, -MOVE_CLAMP, MOVE_CLAMP) / SENSITIVITY\r\n  }\r\n\r\n  // IMPORTANT This is how we notify widgets of changes\r\n  // The special _update property has an observer function which handles the new values\r\n  widget._update = { dx, dy, x, y }\r\n}\r\n\r\n// =============================================================================\r\n// For events I want to disable, such as right & double click\r\n// =============================================================================\r\nfunction eventSinkHole(evt) {\r\n  evt.preventDefault()\r\n}\r\n\r\n// =============================================================================\r\n// Set up the page, CSS etc, keeps the HTML free of requirements\r\n// =============================================================================\r\nasync function pageSetup() {\r\n  // Mask used for modal config dialog\r\n  const pageMask = document.createElement('div')\r\n  pageMask.id = 'pageMask'\r\n  document.body.append(pageMask)\r\n\r\n  // Global main styles\r\n  const style = document.createElement('style')\r\n  style.textContent = mainCss\r\n\r\n  // Viewport\r\n  let viewport = document.createElement('meta')\r\n  viewport.setAttribute('name', 'viewport')\r\n  viewport.setAttribute('content', 'width=device-width, user-scalable=no, initial-scale=1.0')\r\n  document.getElementsByTagName('head')[0].appendChild(viewport)\r\n\r\n  // Set favicon\r\n  let iconLink = document.querySelector(\"link[rel~='icon']\")\r\n  if (!iconLink) {\r\n    iconLink = document.createElement('link')\r\n    iconLink.rel = 'icon'\r\n    iconLink.href = 'https://raw.githubusercontent.com/benc-uk/touchmidi/main/src/assets/favicon.png'\r\n    document.getElementsByTagName('head')[0].appendChild(iconLink)\r\n  }\r\n\r\n  // Inject stylesheet (keeps HTML clean)\r\n  document.head.append(style)\r\n}\r\n\r\n// =============================================================================\r\n// Display the initial config setup dialog\r\n// =============================================================================\r\nfunction openConfigDialog(channelNames) {\r\n  // Auto start without config dialog, if ?start=true provided on URL\r\n  // Check URL query for config options, these override everything\r\n  const urlParams = new URLSearchParams(window.location.search)\r\n  if (urlParams.has('channel') || urlParams.has('device') || urlParams.has('restore')) {\r\n    // Get other config options from URL query params\r\n    config = defaultConfig\r\n    config.globalChannel = urlParams.has('channel') ? parseInt(urlParams.get('channel')) : 1\r\n    config.deviceId = urlParams.has('device') ? urlParams.get('device') : config.deviceId\r\n    config.restoreValues = urlParams.has('restore') ? urlParams.get('restore') === 'true' : config.restoreValues\r\n\r\n    // Wipe values when disabled, this allows user to reset any stored values\r\n    if (!config.restoreValues) {\r\n      removeStorage()\r\n    }\r\n\r\n    // Save new config options back to local storage (after wipe)\r\n    const filename = window.location.pathname.substring(window.location.pathname.lastIndexOf('/') + 1)\r\n    localStorage.setItem(`touchmidi.${filename}.config`, JSON.stringify(config))\r\n\r\n    // Begin!\r\n    startLayout(config)\r\n    return\r\n  }\r\n\r\n  // Create config dialog element and pass it the MIDI access\r\n  const configDialog = document.createElement('midi-config')\r\n  configDialog.channelNames = channelNames\r\n\r\n  // Event handler\r\n  // Get settings returned from config dialog (when config-done event fires)\r\n  configDialog.addEventListener('config-done', (evt) => {\r\n    // Begin!\r\n    startLayout(evt.detail)\r\n  })\r\n\r\n  // Show config dialog element, by adding to the body\r\n  document.body.appendChild(configDialog)\r\n}\r\n\r\n// =============================================================================\r\n// Start the layout with the given config\r\n// =============================================================================\r\nasync function startLayout(config) {\r\n  // Some device ID validation\r\n  if (!config.deviceId) {\r\n    alert('No MIDI device id, MIDI output will fail!')\r\n    return\r\n  }\r\n\r\n  await fetchSetList();\r\n\r\n  // Only possible to provide an invalid device if auto-starting with query ?start=true\r\n  let validDevice = false\r\n  for (let outDevice of midi.access.outputs.values()) {\r\n    if (outDevice.id === config.deviceId) validDevice = true\r\n  }\r\n  if (!validDevice) {\r\n    alert(`The provided MIDI device id '${config.deviceId}' is invalid, MIDI output will fail!`)\r\n    return\r\n  }\r\n\r\n  // Configure MIDI with global settings\r\n  midi.setup(midi.access.outputs.get(config.deviceId), config.globalChannel || 0)\r\n  console.log(`MIDI configured for device '${config.deviceId}' and channel: ${config.globalChannel}`)\r\n\r\n  // Restore saved values for certain widgets, if user sets restoreValues\r\n  if (config.restoreValues) {\r\n    console.log('Restoring saved widget values...')\r\n    for (let widget of document.body.querySelectorAll(SELECTOR_SAVE)) {\r\n      if (widget.tagName.toLowerCase() == 'midi-pad') {\r\n        let savedValX = getWidgetValue(widget, `${widget.ccX}${widget.chan}${widget.nrpn}X`)\r\n        let savedValY = getWidgetValue(widget, `${widget.ccY}${widget.chan}${widget.nrpn}Y`)\r\n        if (savedValX) widget.valueX = savedValX\r\n        if (savedValY) widget.valueY = savedValY\r\n      } else {\r\n        let savedVal = getWidgetValue(widget)\r\n        // By setting the value we trigger a redraw AND a send of the MIDI events\r\n        if (savedVal) widget.value = savedVal\r\n      }\r\n    }\r\n  }\r\n}\r\n// =============================================================================\r\n// Notify all widgets of their current client width\r\n// =============================================================================\r\nfunction updateWidgetWidths() {\r\n  for (let widget of document.body.querySelectorAll(SELECTOR_ALL)) {\r\n    widget._width = widget.clientWidth\r\n  }\r\n}\r\n\r\n// =============================================================================\r\n// Scan layout for channels and return list of named ones\r\n// =============================================================================\r\n/*function parseChannels() {\r\n  // List of all channel names we discover\r\n  let channelNames = []\r\n  let prompt = true\r\n\r\n  for (let widget of document.body.querySelectorAll(SELECTOR_ALL)) {\r\n    if (!widget.channel || widget.channel.trim().length == 0) continue\r\n    const chanNum = parseInt(widget.channel)\r\n    if (isNaN(chanNum)) {\r\n      channelNames.push(widget.channel.trim())\r\n    } else {\r\n      // If we have a channel number we can set it here and not prompt the user for it\r\n      if (chanNum >= 1 && chanNum <= 16) {\r\n        widget._channelNum = chanNum\r\n        prompt = false\r\n      }\r\n    }\r\n  }\r\n\r\n  // There are three possible outputs from this function:\r\n  // - Array of channel names: config dialog should prompt user for each one\r\n  // - Boolean (true): config dialog should prompt user single global channel\r\n  // - Boolean (false): Do not prompt the user for any channels\r\n\r\n  // Multi channel mode detected, return list of channel names\r\n  if (channelNames.length > 0) {\r\n    // Return list of distinct / unique channel names\r\n    return [...new Set(channelNames)]\r\n  }\r\n\r\n  // Single channel mode\r\n  return prompt\r\n}*/\r\n","import { parseCSV } from './setlist/csv'\r\n\r\nexport async function loadSetList(url) {\r\n  const response = await fetch(url)\r\n  const csvText = await response.text()\r\n  let csvArray = parseCSV(csvText)\r\n  let counter = 0\r\n  let rowCount = 0\r\n  let rowDiv = document.createElement('group-row')\r\n  document.body.appendChild(rowDiv)\r\n  //['Patch Name', 'XP50 User', 'JX8P', 'Korg', 'XP50 Perform', 'AKAI']\r\n  csvArray.shift()\r\n  csvArray = csvArray.sort((a, b) => {\r\n    return a[0] > b[0] ? 1 : -1\r\n  })\r\n  for (let row of csvArray) {\r\n    console.log(counter, row)\r\n    const patchName = row[0]\r\n    const xp50User = `1,1,1,${row[1] - 1}`\r\n    const jx8P = `2,0,1,${row[2]-1}`\r\n    const korg = `3,0,1,${row[3]}`\r\n    const xpperform = row[4] //TODO\r\n    const akai = row[5] //TODO\r\n    const el = document.createElement('midi-button')\r\n    el.setAttribute('label', patchName)\r\n    el.setAttribute('multiprog', `${xp50User}|${jx8P}|${korg}`)\r\n    if(xpperform.length>0){\r\n      console.log('xpperform', xpperform)\r\n      el.setAttribute('xpperform', xpperform)\r\n    }\r\n    el.setAttribute('hsl', ((counter / (csvArray.length - 2)) * 360).toString())\r\n    rowDiv.appendChild(el)\r\n    console.log(patchName, xp50User, jx8P, korg, xpperform, akai)\r\n    if (rowCount > 5) {\r\n      rowDiv = document.createElement('group-row')\r\n      document.body.appendChild(rowDiv)\r\n      rowCount = 0\r\n    }\r\n    rowCount++;\r\n    counter++;\r\n  }\r\n\r\n}\r\n\r\nexport async function fetchSetList() {\r\n  await loadSetList(`../assets/csv/patches.csv?random=${Math.random()}`);\r\n}\r\n","export function parseCSV(str) {\r\n  let arr = []\r\n  let quote = false   // 'true' means we're inside a quoted field\r\n\r\n  // Iterate over each character, keep track of current row and column (of the returned array)\r\n  let row = 0, col = 0, c = 0\r\n  for (; c < str.length; c++) {\r\n    const cc = str[c], nc = str[c + 1]        // Current character, next character\r\n    arr[row] = arr[row] || [];             // Create a new row if necessary\r\n    arr[row][col] = arr[row][col] || '';   // Create a new column (start with empty string) if necessary\r\n\r\n    // If the current character is a quotation mark, and we're inside a\r\n    // quoted field, and the next character is also a quotation mark,\r\n    // add a quotation mark to the current column and skip the next character\r\n    if (cc == '\"' && quote && nc == '\"') { arr[row][col] += cc; ++c; continue; }\r\n\r\n    // If it's just one quotation mark, begin/end quoted field\r\n    if (cc == '\"') { quote = !quote; continue; }\r\n\r\n    // If it's a comma and we're not in a quoted field, move on to the next column\r\n    if (cc == ',' && !quote) { ++col; continue; }\r\n\r\n    // If it's a newline (CRLF) and we're not in a quoted field, skip the next character\r\n    // and move on to the next row and move to column 0 of that new row\r\n    if (cc == '\\r' && nc == '\\n' && !quote) { ++row; col = 0; ++c; continue; }\r\n\r\n    // If it's a newline (LF or CR) and we're not in a quoted field,\r\n    // move on to the next row and move to column 0 of that new row\r\n    if (cc == '\\n' && !quote) { ++row; col = 0; continue; }\r\n    if (cc == '\\r' && !quote) { ++row; col = 0; continue; }\r\n\r\n    // Otherwise, append the current character to the current column\r\n    arr[row][col] += cc;\r\n  }\r\n  return arr;\r\n}","export default \"@import url('https://fonts.googleapis.com/css2?family=PT+Sans&display=swap');\\r\\n\\r\\n:root {\\r\\n  /* these variables are used everywhere */\\r\\n  --bg: black; /* background colour */\\r\\n  --b-radius: 0; /* border radius */\\r\\n  --b-width: 0rem; /* border thickness */\\r\\n  --spacing: 0rem; /* widget spacing */\\r\\n\\r\\n  --font: sans-serif; /* Consolas, 'Courier New', monospace; */\\r\\n}\\r\\n\\r\\nhtml,\\r\\nbody {\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n  overflow-y: hidden;\\r\\n  color: white;\\r\\n  background-color: var(--bg);\\r\\n  font-family: var(--font);\\r\\n  touch-action: none;\\r\\n  padding-right: 10px;\\r\\n}\\r\\n\\r\\nbody {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n/* Used to hide the page behind the config dialog */\\r\\n#pageMask {\\r\\n  background: rgba(0, 0, 0, 0.8);\\r\\n  position: fixed;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  bottom: 0;\\r\\n  left: 0;\\r\\n  display: none;\\r\\n}\\r\\n\";","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(476);\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}